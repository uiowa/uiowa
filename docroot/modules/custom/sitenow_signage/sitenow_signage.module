<?php

/**
 * @file
 * Module code for SiteNow Signage.
 */

use Drupal\node\NodeInterface;

/**
 * Implements hook_preprocess_HOOK().
 */
function sitenow_signage_preprocess_html(&$variables) {
  $test = 'thing';
}

/**
 * Implements hook_preprocess_HOOK().
 */
function sitenow_signage_preprocess_page(&$variables) {
  // Unset parts of the page based on the
  // Check that a node is being rendered.
  if (isset($variables['node']) && $variables['node'] instanceof NodeInterface) {
    $node = $variables['node'];
    // Check that the node is a sign node.
    if ($node->getType() === 'sign') {
      // Check that user is logged out before unsetting anything.
      if (\Drupal::currentUser()->isAnonymous()) {
        // @todo Check for a query string variable of 'signage-display'.
        // Unset the header region.
        $variables['page']['header'] = [];
      }
    }
  }
}

/**
 * Implements hook_preprocess_HOOK().
 */
function sitenow_signage_preprocess_block(&$variables) {
  if ($variables['plugin_id'] == 'inline_block:slideshow') {
    $variables['#attached']['library'][] = 'sitenow_signage/slideshow';
  }
}
