@use 'sass:color';
@use '../../uids/scss/abstracts/_variables.scss';
@use '../../uids/scss/abstracts/_utilities.scss';

.webform-submission-form {

  // Make fields respect field width settings
  input[size]:not([size='60']) {
    width: inherit;
  }

  &.form [type=checkbox][class*="webform-scale"] + label[for],
  &.form [type=radio][class*="webform-scale"] + label[for],
  &.form [type=radio] + label[for].webform-options-display-buttons-label {
    flex: none;
  }

  span.form-required {
    position: relative;

    &:after {
      margin: 0 variables.$xsm;
      content: "*";
      color: variables.$danger;
      vertical-align: middle;
    }
  }

  .webform-options-display-two-columns div.form-item,
  .webform-options-display-three-columns div.form-item {
    margin-bottom: 1rem;
  }

  .webform-options-display-one-column,
  .webform-options-display-side-by-side,
  .webform-options-display-buttons-horizontal,
  .webform-options-display-buttons-vertical {
    margin-top: -.5rem;
  }

  .fieldgroup {
    border: none;
    padding: 0;
  }

  .webform-element-help {
    background: variables.$brand-cool-gray;
    border: 2px solid variables.$brand-cool-gray;

    &:hover,
    &:focus {
      border: 2px solid variables.$info;
      background: variables.$info;
    }
  }

  // --------------------------------
  // Help/Description
  // --------------------------------
  .help-text,
  .field-prefix,
  .field-suffix {
    font-size: 0.9rem;
    line-height: 1.4;
    clear: both;
  }

  // --------------------------------
  // More
  // --------------------------------
  .webform-element-more {
    &--content {
      line-height: 1.6;
    }
  }

  .description .webform-element-more {
    margin-top: variables.$xsm;
    margin-block-start: variables.$xsm;
  }

  // --------------------------------
  // Checkboxes
  // --------------------------------

  .webform-type-checkboxes,
  .webform-checkboxes-other,
  .webform-type-radios,
  .webform-type-webform-radios-other {
    .form-type-checkbox,
    .form-type-radio:not(.form-item-radios-buttons) {
      label {
        flex: 1;
      }
    }

    & legend {
      margin-bottom: variables.$xsm;
    }

    & .fieldset-wrapper {
      margin-left: 0;
      margin-inline-start: 0;
    }
  }

  // --------------------------------
  // Details
  // --------------------------------
  .details-description {
    line-height: 1.6;
  }

  // --------------------------------
  // Flexbox
  // --------------------------------
  .webform-flexbox {
    & .webform-flex--container {
      & .form-actions [type="submit"] {
        width: 100%; // Set button full-width.
        height: 57px;
      }
    }
  }

  // --------------------------------
  // Terms of service
  // --------------------------------
  .webform-terms-of-service-details {
    max-height: 80vh !important;
  }

  // --------------------------------
  // Prefix/suffix
  // --------------------------------
  .field-prefix,
  .field-suffix {
    display: block;
  }

  // --------------------------------
  // Scale
  // --------------------------------
  .webform-scale {
    & input:checked + label {
      [class*="bg--gold"] & {
        border-color: variables.$secondary;
        background-color: variables.$light;
        color: variables.$secondary;
      }

      [class*="bg--black"] & {
        background-color: color.scale(#FFCD00, variables.$lightness:40%);
      }
    }

    & input:checked:focus + label {
      box-shadow: 0 0 5px #cacaca;
    }
  }

  // --------------------------------
  // Progress Wizard
  // --------------------------------
  .webform-button--next,
  .webform-button--previous {
    @include utilities.bttn--secondary;

    [class*="bg--black"] & {
      background: variables.$light;
      color: variables.$secondary;
    }
  }

  .webform-progress-tracker .progress-text,
  .webform-progress-tracker .progress-step.is-active .progress-text,
  .webform-progress-tracker .progress-step.is-complete .progress-text {
    color: currentColor;
  }

  .webform-progress-tracker .progress-step .progress-marker:before {
    padding: 1rem;
  }

  .webform-progress-tracker .progress-step .progress-marker:after {
    top: .8rem;
  }

  .webform-progress-tracker .progress-step.is-active .progress-marker::before {
    background-color: variables.$primary;
    color: variables.$secondary;

    [class*="bg--gold"] & {
      background: variables.$secondary;
      color: #fff;
    }
  }

  // --------------------------------
  // Horizontal rules
  // --------------------------------
  .webform-horizontal-rule {
    &--thin {
      border: 0;
      border-top: 1px solid rgba(0, 0, 0, 0.2);
      border-block-start: 1px solid rgba(0, 0, 0, 0.2);
      border-bottom: 1px solid rgba(255, 255, 255, 0.3);
      border-block-end: 1px solid rgba(255, 255, 255, 0.3);
    }

    &--thick {
      @extend .webform-horizontal-rule--thin;
      border-top-width: 4px;

      [class*="bg--black"] & {
        border-top-color: rgba(255, 255, 255, 0.8);
        border-block-start-color: rgba(255, 255, 255, 0.8);
      }
    }

    &--glyph:after {
      [class*="bg--gray"] & {
        background-color: variables.$light;
      }

      [class*="bg--gold"] & {
        background-color: variables.$primary;
      }

      [class*="bg--black"] & {
        background-color: variables.$secondary;
      }
    }
  }
}

// --------------------------------
// Preview
// --------------------------------
.node-preview-container {
  margin-bottom: 0;

  form {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
}

// --------------------------------
// Tour
// Set above admin toolbar and superfish.
// --------------------------------
.joyride-tip-guide {
  z-index: 550;

  a.btn.btn-primary.btn-block {
    color: #212529;

    &:hover,
    &:focus {
      color: #fff;
    }
  }
}

// --------------------------------
// Message
// --------------------------------
.webform-message {
  margin: 0.625rem 0;
  // Hide the close link in favor of the close button provided by alert component.
  .webform-message__link {
    display: none !important;
  }
}

