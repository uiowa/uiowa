From fec60b77165c65222246e08c7951b9acecae828e Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Tue, 21 Nov 2023 11:49:55 -0600
Subject: [PATCH 01/17] Getting some of the scaffolding out of the way.

---
 .gitignore                                    |    1 +
 js/build/linkitMediaLibrary.js                |    1 +
 .../linkitMediaLibrary/src/index.js           |   21 +
 js/linkitMediaLibrary.js                      |    0
 linkit_media_library.ckeditor5.yml            |    9 +
 linkit_media_library.libraries.yml            |    8 +
 package.json                                  |   21 +
 webpack.config.js                             |   66 +
 yarn.lock                                     | 2712 +++++++++++++++++
 9 files changed, 2839 insertions(+)
 create mode 100644 .gitignore
 create mode 100644 js/build/linkitMediaLibrary.js
 create mode 100644 js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
 create mode 100644 js/linkitMediaLibrary.js
 create mode 100644 linkit_media_library.ckeditor5.yml
 create mode 100644 linkit_media_library.libraries.yml
 create mode 100644 package.json
 create mode 100644 webpack.config.js
 create mode 100644 yarn.lock

diff --git a/.gitignore b/.gitignore
new file mode 100644
index 0000000..3c3629e
--- /dev/null
+++ b/.gitignore
@@ -0,0 +1 @@
+node_modules
diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
new file mode 100644
index 0000000..36799ab
--- /dev/null
+++ b/js/build/linkitMediaLibrary.js
@@ -0,0 +1 @@
+!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.CKEditor5=r():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=r())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,r,t)=>{e.exports=t("dll-reference CKEditor5.dll")("./src/core.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},r={};function t(o){var i=r[o];if(void 0!==i)return i.exports;var d=r[o]={exports:{}};return e[o](d,d.exports,t),d.exports}t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var o={};return(()=>{"use strict";t.d(o,{default:()=>i});var e=t("ckeditor5/src/core.js");class r extends e.Plugin{static get requires(){return[]}static get pluginName(){return"LinkitMediaLibrary"}}const i={LinkitMediaLibrary:r}})(),o=o.default})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
new file mode 100644
index 0000000..36e808e
--- /dev/null
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -0,0 +1,21 @@
+import { Plugin } from 'ckeditor5/src/core';
+
+class LinkitMediaLibrary extends Plugin {
+  /**
+   * @inheritdoc
+   */
+  static get requires() {
+    return [];
+  }
+
+  /**
+   * @inheritdoc
+   */
+  static get pluginName() {
+    return 'LinkitMediaLibrary';
+  }
+}
+
+export default {
+  LinkitMediaLibrary,
+};
diff --git a/js/linkitMediaLibrary.js b/js/linkitMediaLibrary.js
new file mode 100644
index 0000000..e69de29
diff --git a/linkit_media_library.ckeditor5.yml b/linkit_media_library.ckeditor5.yml
new file mode 100644
index 0000000..0f96f64
--- /dev/null
+++ b/linkit_media_library.ckeditor5.yml
@@ -0,0 +1,9 @@
+linkit_media_library:
+  drupal:
+    label: LinkIt media library
+    library: linkit_media_library/ckeditor5
+    elements:
+      - <a aria-label title class id target="_blank" rel>
+    conditions:
+      plugins:
+        - ckeditor5_link
diff --git a/linkit_media_library.libraries.yml b/linkit_media_library.libraries.yml
new file mode 100644
index 0000000..81c961d
--- /dev/null
+++ b/linkit_media_library.libraries.yml
@@ -0,0 +1,8 @@
+ckeditor5:
+  version: VERSION
+  js:
+    js/build/linkitMediaLibrary.js: { preprocess: false, minified: true }
+  dependencies:
+    - core/drupal
+    - ckeditor5/ckeditor5
+    - ckeditor5/ckeditor5.link
diff --git a/package.json b/package.json
new file mode 100644
index 0000000..bb2f888
--- /dev/null
+++ b/package.json
@@ -0,0 +1,21 @@
+{
+  "name": "drupal-linkit-media-library",
+  "version": "2.0.0",
+  "description": "Create links from media library.",
+  "author": "",
+  "license": "GPL-2.0-or-later",
+  "scripts": {
+    "watch": "webpack --mode development --watch",
+    "build": "webpack"
+  },
+  "devDependencies": {
+    "@ckeditor/ckeditor5-dev-utils": "^30.0.0",
+    "@ckeditor/ckeditor5-theme-lark": "^38.1.0",
+    "ckeditor5": "~35.1.0",
+    "css-loader": "^6.8.1",
+    "raw-loader": "^4.0.2",
+    "terser-webpack-plugin": "^5.3.3",
+    "webpack": "^5.51.1",
+    "webpack-cli": "^4.4.0"
+  }
+}
diff --git a/webpack.config.js b/webpack.config.js
new file mode 100644
index 0000000..a4c073e
--- /dev/null
+++ b/webpack.config.js
@@ -0,0 +1,66 @@
+const path = require('path');
+const fs = require('fs');
+const webpack = require('webpack');
+const { styles, builds } = require('@ckeditor/ckeditor5-dev-utils');
+const TerserPlugin = require('terser-webpack-plugin');
+
+function getDirectories(srcpath) {
+  return fs
+    .readdirSync(srcpath)
+    .filter((item) => fs.statSync(path.join(srcpath, item)).isDirectory());
+}
+
+module.exports = [];
+// Loop through every subdirectory in src, each a different plugin, and build
+// each one in ./build.
+getDirectories('./js/ckeditor5_plugins').forEach((dir) => {
+  const bc = {
+    mode: 'production',
+    optimization: {
+      minimize: true,
+      minimizer: [
+        new TerserPlugin({
+          terserOptions: {
+            format: {
+              comments: false,
+            },
+          },
+          test: /\.js(\?.*)?$/i,
+          extractComments: false,
+        }),
+      ],
+      moduleIds: 'named',
+    },
+    entry: {
+      path: path.resolve(
+        __dirname,
+        'js/ckeditor5_plugins',
+        dir,
+        'src/index.js',
+      ),
+    },
+    output: {
+      path: path.resolve(__dirname, './js/build'),
+      filename: `${dir}.js`,
+      library: ['CKEditor5', dir],
+      libraryTarget: 'umd',
+      libraryExport: 'default',
+    },
+    plugins: [
+      // It is possible to require the ckeditor5-dll.manifest.json used in
+      // core/node_modules rather than having to install CKEditor 5 here.
+      // However, that requires knowing the location of that file relative to
+      // where your module code is located.
+      new webpack.DllReferencePlugin({
+        manifest: require('./node_modules/ckeditor5/build/ckeditor5-dll.manifest.json'), // eslint-disable-line global-require, import/no-unresolved
+        scope: 'ckeditor5/src',
+        name: 'CKEditor5.dll',
+      }),
+    ],
+    module: {
+      rules: [{ test: /\.svg$/, use: 'raw-loader' }],
+    },
+  };
+
+  module.exports.push(bc);
+});
diff --git a/yarn.lock b/yarn.lock
new file mode 100644
index 0000000..f1de48e
--- /dev/null
+++ b/yarn.lock
@@ -0,0 +1,2712 @@
+# THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
+# yarn lockfile v1
+
+
+"@babel/code-frame@^7.0.0", "@babel/code-frame@^7.22.13", "@babel/code-frame@^7.23.4":
+  version "7.23.4"
+  resolved "https://registry.yarnpkg.com/@babel/code-frame/-/code-frame-7.23.4.tgz#03ae5af150be94392cb5c7ccd97db5a19a5da6aa"
+  integrity sha512-r1IONyb6Ia+jYR2vvIDhdWdlTGhqbBoFqLTQidzZ4kepUFH15ejXvFHxCVbtl7BOXIudsIubf4E81xeA3h3IXA==
+  dependencies:
+    "@babel/highlight" "^7.23.4"
+    chalk "^2.4.2"
+
+"@babel/generator@^7.23.4":
+  version "7.23.4"
+  resolved "https://registry.yarnpkg.com/@babel/generator/-/generator-7.23.4.tgz#4a41377d8566ec18f807f42962a7f3551de83d1c"
+  integrity sha512-esuS49Cga3HcThFNebGhlgsrVLkvhqvYDTzgjfFFlHJcIfLe5jFmRRfCQ1KuBfc4Jrtn3ndLgKWAKjBE+IraYQ==
+  dependencies:
+    "@babel/types" "^7.23.4"
+    "@jridgewell/gen-mapping" "^0.3.2"
+    "@jridgewell/trace-mapping" "^0.3.17"
+    jsesc "^2.5.1"
+
+"@babel/helper-environment-visitor@^7.22.20":
+  version "7.22.20"
+  resolved "https://registry.yarnpkg.com/@babel/helper-environment-visitor/-/helper-environment-visitor-7.22.20.tgz#96159db61d34a29dba454c959f5ae4a649ba9167"
+  integrity sha512-zfedSIzFhat/gFhWfHtgWvlec0nqB9YEIVrpuwjruLlXfUSnA8cJB0miHKwqDnQ7d32aKo2xt88/xZptwxbfhA==
+
+"@babel/helper-function-name@^7.23.0":
+  version "7.23.0"
+  resolved "https://registry.yarnpkg.com/@babel/helper-function-name/-/helper-function-name-7.23.0.tgz#1f9a3cdbd5b2698a670c30d2735f9af95ed52759"
+  integrity sha512-OErEqsrxjZTJciZ4Oo+eoZqeW9UIiOcuYKRJA4ZAgV9myA+pOXhhmpfNCKjEH/auVfEYVFJ6y1Tc4r0eIApqiw==
+  dependencies:
+    "@babel/template" "^7.22.15"
+    "@babel/types" "^7.23.0"
+
+"@babel/helper-hoist-variables@^7.22.5":
+  version "7.22.5"
+  resolved "https://registry.yarnpkg.com/@babel/helper-hoist-variables/-/helper-hoist-variables-7.22.5.tgz#c01a007dac05c085914e8fb652b339db50d823bb"
+  integrity sha512-wGjk9QZVzvknA6yKIUURb8zY3grXCcOZt+/7Wcy8O2uctxhplmUPkOdlgoNhmdVee2c92JXbf1xpMtVNbfoxRw==
+  dependencies:
+    "@babel/types" "^7.22.5"
+
+"@babel/helper-split-export-declaration@^7.22.6":
+  version "7.22.6"
+  resolved "https://registry.yarnpkg.com/@babel/helper-split-export-declaration/-/helper-split-export-declaration-7.22.6.tgz#322c61b7310c0997fe4c323955667f18fcefb91c"
+  integrity sha512-AsUnxuLhRYsisFiaJwvp1QF+I3KjD5FOxut14q/GzovUe6orHLesW2C7d754kRm53h5gqrz6sFl6sxc4BVtE/g==
+  dependencies:
+    "@babel/types" "^7.22.5"
+
+"@babel/helper-string-parser@^7.23.4":
+  version "7.23.4"
+  resolved "https://registry.yarnpkg.com/@babel/helper-string-parser/-/helper-string-parser-7.23.4.tgz#9478c707febcbbe1ddb38a3d91a2e054ae622d83"
+  integrity sha512-803gmbQdqwdf4olxrX4AJyFBV/RTr3rSmOj0rKwesmzlfhYNDEs+/iOcznzpNWlJlIlTJC2QfPFcHB6DlzdVLQ==
+
+"@babel/helper-validator-identifier@^7.22.20":
+  version "7.22.20"
+  resolved "https://registry.yarnpkg.com/@babel/helper-validator-identifier/-/helper-validator-identifier-7.22.20.tgz#c4ae002c61d2879e724581d96665583dbc1dc0e0"
+  integrity sha512-Y4OZ+ytlatR8AI+8KZfKuL5urKp7qey08ha31L8b3BwewJAoJamTzyvxPR/5D+KkdJCGPq/+8TukHBlY10FX9A==
+
+"@babel/highlight@^7.23.4":
+  version "7.23.4"
+  resolved "https://registry.yarnpkg.com/@babel/highlight/-/highlight-7.23.4.tgz#edaadf4d8232e1a961432db785091207ead0621b"
+  integrity sha512-acGdbYSfp2WheJoJm/EBBBLh/ID8KDc64ISZ9DYtBmC8/Q204PZJLHyzeB5qMzJ5trcOkybd78M4x2KWsUq++A==
+  dependencies:
+    "@babel/helper-validator-identifier" "^7.22.20"
+    chalk "^2.4.2"
+    js-tokens "^4.0.0"
+
+"@babel/parser@^7.18.9", "@babel/parser@^7.22.15", "@babel/parser@^7.23.4":
+  version "7.23.4"
+  resolved "https://registry.yarnpkg.com/@babel/parser/-/parser-7.23.4.tgz#409fbe690c333bb70187e2de4021e1e47a026661"
+  integrity sha512-vf3Xna6UEprW+7t6EtOmFpHNAuxw3xqPZghy+brsnusscJRW5BMUzzHZc5ICjULee81WeUV2jjakG09MDglJXQ==
+
+"@babel/template@^7.22.15":
+  version "7.22.15"
+  resolved "https://registry.yarnpkg.com/@babel/template/-/template-7.22.15.tgz#09576efc3830f0430f4548ef971dde1350ef2f38"
+  integrity sha512-QPErUVm4uyJa60rkI73qneDacvdvzxshT3kksGqlGWYdOTIUOwJ7RDUL8sGqslY1uXWSL6xMFKEXDS3ox2uF0w==
+  dependencies:
+    "@babel/code-frame" "^7.22.13"
+    "@babel/parser" "^7.22.15"
+    "@babel/types" "^7.22.15"
+
+"@babel/traverse@^7.18.9":
+  version "7.23.4"
+  resolved "https://registry.yarnpkg.com/@babel/traverse/-/traverse-7.23.4.tgz#c2790f7edf106d059a0098770fe70801417f3f85"
+  integrity sha512-IYM8wSUwunWTB6tFC2dkKZhxbIjHoWemdK+3f8/wq8aKhbUscxD5MX72ubd90fxvFknaLPeGw5ycU84V1obHJg==
+  dependencies:
+    "@babel/code-frame" "^7.23.4"
+    "@babel/generator" "^7.23.4"
+    "@babel/helper-environment-visitor" "^7.22.20"
+    "@babel/helper-function-name" "^7.23.0"
+    "@babel/helper-hoist-variables" "^7.22.5"
+    "@babel/helper-split-export-declaration" "^7.22.6"
+    "@babel/parser" "^7.23.4"
+    "@babel/types" "^7.23.4"
+    debug "^4.1.0"
+    globals "^11.1.0"
+
+"@babel/types@^7.22.15", "@babel/types@^7.22.5", "@babel/types@^7.23.0", "@babel/types@^7.23.4":
+  version "7.23.4"
+  resolved "https://registry.yarnpkg.com/@babel/types/-/types-7.23.4.tgz#7206a1810fc512a7f7f7d4dace4cb4c1c9dbfb8e"
+  integrity sha512-7uIFwVYpoplT5jp/kVv6EF93VaJ8H+Yn5IczYiaAi98ajzjfoZfslet/e0sLh+wVBjb2qqIut1b0S26VSafsSQ==
+  dependencies:
+    "@babel/helper-string-parser" "^7.23.4"
+    "@babel/helper-validator-identifier" "^7.22.20"
+    to-fast-properties "^2.0.0"
+
+"@ckeditor/ckeditor5-clipboard@^35.1.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-clipboard/-/ckeditor5-clipboard-35.4.0.tgz#8529fd45d06a7edea0f73cd0b5b3052f2272335c"
+  integrity sha512-B6rIQxvOrHvO9TZRC8JA0wKk+IfN880UJkYIg1qlhf9HFNVjdVbtHaiCsPD+TzGmQN3XHXfNjgjabGRIn0iZmw==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "^35.4.0"
+    "@ckeditor/ckeditor5-engine" "^35.4.0"
+    "@ckeditor/ckeditor5-utils" "^35.4.0"
+    "@ckeditor/ckeditor5-widget" "^35.4.0"
+    lodash-es "^4.17.11"
+
+"@ckeditor/ckeditor5-core@38.1.1":
+  version "38.1.1"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-core/-/ckeditor5-core-38.1.1.tgz#8a71debe72ee2fec7b8419654e074a688470d6ba"
+  integrity sha512-5yC+oSoCnjfOrvmECbwtu4zBt9S5dJfOYsAzfIGEbmD9DVGIyLBDKEjJ9IbAKAy1HG6CgAkZyv1YyEc5G5g3ew==
+  dependencies:
+    "@ckeditor/ckeditor5-engine" "38.1.1"
+    "@ckeditor/ckeditor5-utils" "38.1.1"
+    lodash-es "^4.17.15"
+
+"@ckeditor/ckeditor5-core@^35.1.0", "@ckeditor/ckeditor5-core@^35.4.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-core/-/ckeditor5-core-35.4.0.tgz#39390445c8363a80d4ce0e45d93efa13b8523f6e"
+  integrity sha512-Rf0H7C4inCj/YC8aii0cT7TC/IuBIQ+tXmu9qd8/1BJ/rz1MCHXtBPApjTbFp33OE3aOFB5+NUaKt05k/dL3OA==
+  dependencies:
+    "@ckeditor/ckeditor5-engine" "^35.4.0"
+    "@ckeditor/ckeditor5-ui" "^35.4.0"
+    "@ckeditor/ckeditor5-utils" "^35.4.0"
+    lodash-es "^4.17.15"
+
+"@ckeditor/ckeditor5-dev-utils@^30.0.0", "@ckeditor/ckeditor5-dev-utils@^30.5.0":
+  version "30.5.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-dev-utils/-/ckeditor5-dev-utils-30.5.0.tgz#798291a79183db716b667591a2ccebe6fcb7a7f8"
+  integrity sha512-R5oC9ka68X7NwafM5rFvIv6q0qT2kMsBkRikdEygx7cmGkV4dy7uM5HuOBUuIoLW7Md2o3QfkD3dnk6OdzuuJw==
+  dependencies:
+    "@babel/parser" "^7.18.9"
+    "@babel/traverse" "^7.18.9"
+    "@ckeditor/ckeditor5-dev-webpack-plugin" "^30.5.0"
+    chalk "^3.0.0"
+    cli-cursor "^3.1.0"
+    cli-spinners "^2.6.1"
+    cssnano "^5.0.0"
+    del "^5.0.0"
+    escodegen "^1.9.0"
+    fs-extra "^8.1.0"
+    is-interactive "^1.0.0"
+    javascript-stringify "^1.6.0"
+    pofile "^1.0.9"
+    postcss "^8.4.12"
+    postcss-import "^14.1.0"
+    postcss-loader "^4.3.0"
+    postcss-mixins "^9.0.2"
+    postcss-nesting "^10.1.4"
+    raw-loader "^4.0.1"
+    shelljs "^0.8.1"
+    style-loader "^2.0.0"
+    terser-webpack-plugin "^4.2.3"
+    through2 "^3.0.1"
+    ts-loader "^9.3.0"
+
+"@ckeditor/ckeditor5-dev-webpack-plugin@^30.5.0":
+  version "30.5.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-dev-webpack-plugin/-/ckeditor5-dev-webpack-plugin-30.5.0.tgz#732033e117ce0b00cb0efaf009495ab767ec47de"
+  integrity sha512-mErNKfGd8XBjJxB7K7yCDnNq4pLQKbEjwJHf9g2EW4gOD1U55rgPc1XpmgfxhMj44QQ8YOZXAQ/Y/55AN7GATA==
+  dependencies:
+    "@ckeditor/ckeditor5-dev-utils" "^30.5.0"
+    chalk "^4.0.0"
+    rimraf "^3.0.2"
+    semver "^7.3.4"
+    webpack-sources "^2.0.1"
+
+"@ckeditor/ckeditor5-engine@38.1.1":
+  version "38.1.1"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-engine/-/ckeditor5-engine-38.1.1.tgz#dddfb4cc1731954417467002731a3e9f48444517"
+  integrity sha512-Z0LYg7B4vN3ZNUf3utmBRXQBn3JNy81Xs+45sQ09Fpf5p6aKer37vxEA315O17PnWYndildeKNRUNdjI942HcQ==
+  dependencies:
+    "@ckeditor/ckeditor5-utils" "38.1.1"
+    lodash-es "^4.17.15"
+
+"@ckeditor/ckeditor5-engine@^35.1.0", "@ckeditor/ckeditor5-engine@^35.4.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-engine/-/ckeditor5-engine-35.4.0.tgz#cb0ed9f0c5a9ef00b24ffbd8d2100fff1e0e90cb"
+  integrity sha512-67QKtUGJeLM072h9qURvzczYGU3ecuxR9LLmM4dffnV+PBNQ9e8RDCY7PuuEP0pplmAUI6/XqoZJIbk6h7ZV3Q==
+  dependencies:
+    "@ckeditor/ckeditor5-utils" "^35.4.0"
+    lodash-es "^4.17.15"
+
+"@ckeditor/ckeditor5-enter@^35.1.0", "@ckeditor/ckeditor5-enter@^35.4.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-enter/-/ckeditor5-enter-35.4.0.tgz#c0f967dc3f48faeb07d839ac0426227e118ade56"
+  integrity sha512-y95RnA/Gw72e220PJKVwNbwPzX4SRs82/rXu1jVyJXty7CcEZqqfyRtW6odICAXr5eKI5XKgzFgpFYULL3D9Nw==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "^35.4.0"
+    "@ckeditor/ckeditor5-engine" "^35.4.0"
+
+"@ckeditor/ckeditor5-paragraph@^35.1.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-paragraph/-/ckeditor5-paragraph-35.4.0.tgz#db6babd19eb37c66771b7355d0cd0880cb9b599c"
+  integrity sha512-8nhkEEFv1WClhH6q/HW8P596d+dlatSVc46kQ2+jGlYirL8P66tV/nK+OiE8z1d897oVr4QPGsqk2qGkRFUChw==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "^35.4.0"
+    "@ckeditor/ckeditor5-ui" "^35.4.0"
+    "@ckeditor/ckeditor5-utils" "^35.4.0"
+
+"@ckeditor/ckeditor5-select-all@^35.1.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-select-all/-/ckeditor5-select-all-35.4.0.tgz#b7c20e9f686e59497e84825c4786dd874e22d4e2"
+  integrity sha512-c+pIIY77SP6ux4/cyD7cCrllQAqtFVSnzNYdy7ygNPqljCGngCnpSV9xfCO/blFo6/zx2vsmzVGdRq3ArzGoMg==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "^35.4.0"
+    "@ckeditor/ckeditor5-ui" "^35.4.0"
+    "@ckeditor/ckeditor5-utils" "^35.4.0"
+
+"@ckeditor/ckeditor5-theme-lark@^38.1.0":
+  version "38.1.1"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-theme-lark/-/ckeditor5-theme-lark-38.1.1.tgz#517b7564685d1c8db94a220d4ce3821868e85572"
+  integrity sha512-kuUP7XnrcvtBPERLO1AfiHGdS+n9uC8Fdg2w5g06pDyi+/QpqS40liISffxX8wWlUOKM2rjAnI775sGCGl32Yg==
+  dependencies:
+    "@ckeditor/ckeditor5-ui" "38.1.1"
+
+"@ckeditor/ckeditor5-typing@^35.1.0", "@ckeditor/ckeditor5-typing@^35.4.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-typing/-/ckeditor5-typing-35.4.0.tgz#b786032a541cfd102562eb07c21c62e0b6d502c6"
+  integrity sha512-Ad/PHWbVWcnAj9oevkkfLqf6CmvCFOti466uhvfOCKRNVf2+/xuGwleOGr8W6Lir/x/qav7ojFjKPKDxqbPXhA==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "^35.4.0"
+    "@ckeditor/ckeditor5-engine" "^35.4.0"
+    "@ckeditor/ckeditor5-utils" "^35.4.0"
+    lodash-es "^4.17.15"
+
+"@ckeditor/ckeditor5-ui@38.1.1":
+  version "38.1.1"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-ui/-/ckeditor5-ui-38.1.1.tgz#287ff780103ec79e69c26f5de07c5223821b00e6"
+  integrity sha512-lTqOaciupH66Zz7BSRGOm5DyjLURJwmFfZyCYCKD6+ZbTsxcP1asdiUm8y3bOx2maRCZTrHMhuAANp3qFWXoLQ==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "38.1.1"
+    "@ckeditor/ckeditor5-utils" "38.1.1"
+    color-convert "2.0.1"
+    color-parse "1.4.2"
+    lodash-es "^4.17.15"
+    vanilla-colorful "0.7.2"
+
+"@ckeditor/ckeditor5-ui@^35.1.0", "@ckeditor/ckeditor5-ui@^35.4.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-ui/-/ckeditor5-ui-35.4.0.tgz#76e59032aee6652c6bd717f30fc330a064b3451e"
+  integrity sha512-0SmYE+k1cYQPqyw2rQsPDV/RpudneBh1bNfiaTOz+rqViJIMe+TxiuK6Fz+znNZ05s0exr+ZHWvMttGqlVoQNw==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "^35.4.0"
+    "@ckeditor/ckeditor5-utils" "^35.4.0"
+    lodash-es "^4.17.15"
+
+"@ckeditor/ckeditor5-undo@^35.1.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-undo/-/ckeditor5-undo-35.4.0.tgz#f79b19be69b8b9ab57592cfe4ec4645b3728b773"
+  integrity sha512-0RhsK0f/pX/7KB/JXYTLiDOswmUTQ9EKIIuewAwr7LTsBf4Q309FZSFdbeTmc0wIyX33212Xh5xsi3LyG1VJRg==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "^35.4.0"
+    "@ckeditor/ckeditor5-engine" "^35.4.0"
+    "@ckeditor/ckeditor5-ui" "^35.4.0"
+
+"@ckeditor/ckeditor5-upload@^35.1.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-upload/-/ckeditor5-upload-35.4.0.tgz#57944a4e824cdee37bb53d795dbe98055e11d748"
+  integrity sha512-+eJAluAc4mAFmx5FNuSGjkCYmbm0V9NpSleubAXEx2e+KNiLarPAnsolwRaAcYXcloNp4C9/l0D+lPEx7VRYtg==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "^35.4.0"
+    "@ckeditor/ckeditor5-ui" "^35.4.0"
+    "@ckeditor/ckeditor5-utils" "^35.4.0"
+
+"@ckeditor/ckeditor5-utils@38.1.1":
+  version "38.1.1"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-utils/-/ckeditor5-utils-38.1.1.tgz#fbbdce99709e962aeba80127bb5ac5a9687a7d32"
+  integrity sha512-+dSCchr8sseqWSfCuuOk5uajCo2Tr71IXmn3EGalEHE6Fc1GjWElO90GAA4Pbezrt1zG1tDqhh+bZHULAcK8wQ==
+  dependencies:
+    lodash-es "^4.17.15"
+
+"@ckeditor/ckeditor5-utils@^35.1.0", "@ckeditor/ckeditor5-utils@^35.4.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-utils/-/ckeditor5-utils-35.4.0.tgz#c5c296a2c1883684e674b1a710fcc41b745e156b"
+  integrity sha512-sFjbb+1VYdLbELDLWVYk86WzVN7Lo3sXHbVhdr8+kc0Ufxdr3mTFHDAkiymFt2fs1FOB5gZyWJlJU+EeJnhKUw==
+  dependencies:
+    lodash-es "^4.17.15"
+
+"@ckeditor/ckeditor5-widget@^35.1.0", "@ckeditor/ckeditor5-widget@^35.4.0":
+  version "35.4.0"
+  resolved "https://registry.yarnpkg.com/@ckeditor/ckeditor5-widget/-/ckeditor5-widget-35.4.0.tgz#a80ed4c4f57a1198b47c4e93090f8ebe62f70ecb"
+  integrity sha512-SNYOXXWu7XV1BZET+ar0Cea25836vzNtUqXlDPwBx/jrmK86b8GMbFR99P2bUG0NvtIsH5cSk7XCmnxb4ZQ6wA==
+  dependencies:
+    "@ckeditor/ckeditor5-core" "^35.4.0"
+    "@ckeditor/ckeditor5-engine" "^35.4.0"
+    "@ckeditor/ckeditor5-enter" "^35.4.0"
+    "@ckeditor/ckeditor5-typing" "^35.4.0"
+    "@ckeditor/ckeditor5-ui" "^35.4.0"
+    "@ckeditor/ckeditor5-utils" "^35.4.0"
+    lodash-es "^4.17.15"
+
+"@csstools/selector-specificity@^2.0.0":
+  version "2.2.0"
+  resolved "https://registry.yarnpkg.com/@csstools/selector-specificity/-/selector-specificity-2.2.0.tgz#2cbcf822bf3764c9658c4d2e568bd0c0cb748016"
+  integrity sha512-+OJ9konv95ClSTOJCmMZqpd5+YGsB2S+x6w3E1oaM8UuR5j8nTNHYSz8c9BEPGDOCMQYIEEGlVPj/VY64iTbGw==
+
+"@discoveryjs/json-ext@^0.5.0":
+  version "0.5.7"
+  resolved "https://registry.yarnpkg.com/@discoveryjs/json-ext/-/json-ext-0.5.7.tgz#1d572bfbbe14b7704e0ba0f39b74815b84870d70"
+  integrity sha512-dBVuXR082gk3jsFp7Rd/JI4kytwGHecnCoTtXFb7DB6CNHp4rg5k1bhg0nWdLGLnOV71lmDzGQaLMy8iPLY0pw==
+
+"@gar/promisify@^1.0.1":
+  version "1.1.3"
+  resolved "https://registry.yarnpkg.com/@gar/promisify/-/promisify-1.1.3.tgz#555193ab2e3bb3b6adc3d551c9c030d9e860daf6"
+  integrity sha512-k2Ty1JcVojjJFwrg/ThKi2ujJ7XNLYaFGNB/bWT9wGR+oSMJHMa5w+CUq6p/pVrKeNNgA7pCqEcjSnHVoqJQFw==
+
+"@jridgewell/gen-mapping@^0.3.0", "@jridgewell/gen-mapping@^0.3.2":
+  version "0.3.3"
+  resolved "https://registry.yarnpkg.com/@jridgewell/gen-mapping/-/gen-mapping-0.3.3.tgz#7e02e6eb5df901aaedb08514203b096614024098"
+  integrity sha512-HLhSWOLRi875zjjMG/r+Nv0oCW8umGb0BgEhyX3dDX3egwZtB8PqLnjz3yedt8R5StBrzcg4aBpnh8UA9D1BoQ==
+  dependencies:
+    "@jridgewell/set-array" "^1.0.1"
+    "@jridgewell/sourcemap-codec" "^1.4.10"
+    "@jridgewell/trace-mapping" "^0.3.9"
+
+"@jridgewell/resolve-uri@^3.1.0":
+  version "3.1.1"
+  resolved "https://registry.yarnpkg.com/@jridgewell/resolve-uri/-/resolve-uri-3.1.1.tgz#c08679063f279615a3326583ba3a90d1d82cc721"
+  integrity sha512-dSYZh7HhCDtCKm4QakX0xFpsRDqjjtZf/kjI/v3T3Nwt5r8/qz/M19F9ySyOqU94SXBmeG9ttTul+YnR4LOxFA==
+
+"@jridgewell/set-array@^1.0.1":
+  version "1.1.2"
+  resolved "https://registry.yarnpkg.com/@jridgewell/set-array/-/set-array-1.1.2.tgz#7c6cf998d6d20b914c0a55a91ae928ff25965e72"
+  integrity sha512-xnkseuNADM0gt2bs+BvhO0p78Mk762YnZdsuzFV018NoG1Sj1SCQvpSqa7XUaTam5vAGasABV9qXASMKnFMwMw==
+
+"@jridgewell/source-map@^0.3.3":
+  version "0.3.5"
+  resolved "https://registry.yarnpkg.com/@jridgewell/source-map/-/source-map-0.3.5.tgz#a3bb4d5c6825aab0d281268f47f6ad5853431e91"
+  integrity sha512-UTYAUj/wviwdsMfzoSJspJxbkH5o1snzwX0//0ENX1u/55kkZZkcTZP6u9bwKGkv+dkk9at4m1Cpt0uY80kcpQ==
+  dependencies:
+    "@jridgewell/gen-mapping" "^0.3.0"
+    "@jridgewell/trace-mapping" "^0.3.9"
+
+"@jridgewell/sourcemap-codec@^1.4.10", "@jridgewell/sourcemap-codec@^1.4.14":
+  version "1.4.15"
+  resolved "https://registry.yarnpkg.com/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.4.15.tgz#d7c6e6755c78567a951e04ab52ef0fd26de59f32"
+  integrity sha512-eF2rxCRulEKXHTRiDrDy6erMYWqNw4LPdQ8UQA4huuxaQsVeRPFl2oM8oDGxMFhJUWZf9McpLtJasDDZb/Bpeg==
+
+"@jridgewell/trace-mapping@^0.3.17", "@jridgewell/trace-mapping@^0.3.9":
+  version "0.3.20"
+  resolved "https://registry.yarnpkg.com/@jridgewell/trace-mapping/-/trace-mapping-0.3.20.tgz#72e45707cf240fa6b081d0366f8265b0cd10197f"
+  integrity sha512-R8LcPeWZol2zR8mmH3JeKQ6QRCFb7XgUhV9ZlGhHLGyg4wpPiPZNQOOWhFZhxKw8u//yTbNGI42Bx/3paXEQ+Q==
+  dependencies:
+    "@jridgewell/resolve-uri" "^3.1.0"
+    "@jridgewell/sourcemap-codec" "^1.4.14"
+
+"@nodelib/fs.scandir@2.1.5":
+  version "2.1.5"
+  resolved "https://registry.yarnpkg.com/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz#7619c2eb21b25483f6d167548b4cfd5a7488c3d5"
+  integrity sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==
+  dependencies:
+    "@nodelib/fs.stat" "2.0.5"
+    run-parallel "^1.1.9"
+
+"@nodelib/fs.stat@2.0.5", "@nodelib/fs.stat@^2.0.2":
+  version "2.0.5"
+  resolved "https://registry.yarnpkg.com/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz#5bd262af94e9d25bd1e71b05deed44876a222e8b"
+  integrity sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==
+
+"@nodelib/fs.walk@^1.2.3":
+  version "1.2.8"
+  resolved "https://registry.yarnpkg.com/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz#e95737e8bb6746ddedf69c556953494f196fe69a"
+  integrity sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==
+  dependencies:
+    "@nodelib/fs.scandir" "2.1.5"
+    fastq "^1.6.0"
+
+"@npmcli/fs@^1.0.0":
+  version "1.1.1"
+  resolved "https://registry.yarnpkg.com/@npmcli/fs/-/fs-1.1.1.tgz#72f719fe935e687c56a4faecf3c03d06ba593257"
+  integrity sha512-8KG5RD0GVP4ydEzRn/I4BNDuxDtqVbOdm8675T49OIG/NGhaK0pjPX7ZcDlvKYbA+ulvVK3ztfcF4uBdOxuJbQ==
+  dependencies:
+    "@gar/promisify" "^1.0.1"
+    semver "^7.3.5"
+
+"@npmcli/move-file@^1.0.1":
+  version "1.1.2"
+  resolved "https://registry.yarnpkg.com/@npmcli/move-file/-/move-file-1.1.2.tgz#1a82c3e372f7cae9253eb66d72543d6b8685c674"
+  integrity sha512-1SUf/Cg2GzGDyaf15aR9St9TWlb+XvbZXWpDx8YKs7MLzMH/BCeopv+y9vzrzgkfykCGuWOlSu3mZhj2+FQcrg==
+  dependencies:
+    mkdirp "^1.0.4"
+    rimraf "^3.0.2"
+
+"@trysound/sax@0.2.0":
+  version "0.2.0"
+  resolved "https://registry.yarnpkg.com/@trysound/sax/-/sax-0.2.0.tgz#cccaab758af56761eb7bf37af6f03f326dd798ad"
+  integrity sha512-L7z9BgrNEcYyUYtF+HaEfiS5ebkh9jXqbszz7pC0hRBPaatV0XjSD3+eHrpqFemQfgwiFF0QPIarnIihIDn7OA==
+
+"@types/eslint-scope@^3.7.3":
+  version "3.7.7"
+  resolved "https://registry.yarnpkg.com/@types/eslint-scope/-/eslint-scope-3.7.7.tgz#3108bd5f18b0cdb277c867b3dd449c9ed7079ac5"
+  integrity sha512-MzMFlSLBqNF2gcHWO0G1vP/YQyfvrxZ0bF+u7mzUdZ1/xK4A4sru+nraZz5i3iEIk1l1uyicaDVTB4QbbEkAYg==
+  dependencies:
+    "@types/eslint" "*"
+    "@types/estree" "*"
+
+"@types/eslint@*":
+  version "8.44.7"
+  resolved "https://registry.yarnpkg.com/@types/eslint/-/eslint-8.44.7.tgz#430b3cc96db70c81f405e6a08aebdb13869198f5"
+  integrity sha512-f5ORu2hcBbKei97U73mf+l9t4zTGl74IqZ0GQk4oVea/VS8tQZYkUveSYojk+frraAVYId0V2WC9O4PTNru2FQ==
+  dependencies:
+    "@types/estree" "*"
+    "@types/json-schema" "*"
+
+"@types/estree@*", "@types/estree@^1.0.0":
+  version "1.0.5"
+  resolved "https://registry.yarnpkg.com/@types/estree/-/estree-1.0.5.tgz#a6ce3e556e00fd9895dd872dd172ad0d4bd687f4"
+  integrity sha512-/kYRxGDLWzHOB7q+wtSUQlFrtcdUccpfy+X+9iMBpHK8QLLhx2wIPYuS5DYtR9Wa/YlZAbIovy7qVdB1Aq6Lyw==
+
+"@types/glob@^7.1.1":
+  version "7.2.0"
+  resolved "https://registry.yarnpkg.com/@types/glob/-/glob-7.2.0.tgz#bc1b5bf3aa92f25bd5dd39f35c57361bdce5b2eb"
+  integrity sha512-ZUxbzKl0IfJILTS6t7ip5fQQM/J3TJYubDm3nMbgubNNYS62eXeUpoLUC8/7fJNiFYHTrGPQn7hspDUzIHX3UA==
+  dependencies:
+    "@types/minimatch" "*"
+    "@types/node" "*"
+
+"@types/json-schema@*", "@types/json-schema@^7.0.8":
+  version "7.0.15"
+  resolved "https://registry.yarnpkg.com/@types/json-schema/-/json-schema-7.0.15.tgz#596a1747233694d50f6ad8a7869fcb6f56cf5841"
+  integrity sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==
+
+"@types/minimatch@*":
+  version "5.1.2"
+  resolved "https://registry.yarnpkg.com/@types/minimatch/-/minimatch-5.1.2.tgz#07508b45797cb81ec3f273011b054cd0755eddca"
+  integrity sha512-K0VQKziLUWkVKiRVrx4a40iPaxTUefQmjtkQofBkYRcoaaL/8rhwDWww9qWbrgicNOgnpIsMxyNIUM4+n6dUIA==
+
+"@types/node@*":
+  version "20.9.3"
+  resolved "https://registry.yarnpkg.com/@types/node/-/node-20.9.3.tgz#e089e1634436f676ff299596c9531bd2b59fffc6"
+  integrity sha512-nk5wXLAXGBKfrhLB0cyHGbSqopS+nz0BUgZkUQqSHSSgdee0kssp1IAqlQOu333bW+gMNs2QREx7iynm19Abxw==
+  dependencies:
+    undici-types "~5.26.4"
+
+"@types/parse-json@^4.0.0":
+  version "4.0.2"
+  resolved "https://registry.yarnpkg.com/@types/parse-json/-/parse-json-4.0.2.tgz#5950e50960793055845e956c427fc2b0d70c5239"
+  integrity sha512-dISoDXWWQwUquiKsyZ4Ng+HX2KsPL7LyHKHQwgGFEA3IaKac4Obd+h2a/a6waisAoepJlBcx9paWqjA8/HVjCw==
+
+"@webassemblyjs/ast@1.11.6", "@webassemblyjs/ast@^1.11.5":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/ast/-/ast-1.11.6.tgz#db046555d3c413f8966ca50a95176a0e2c642e24"
+  integrity sha512-IN1xI7PwOvLPgjcf180gC1bqn3q/QaOCwYUahIOhbYUu8KA/3tw2RT/T0Gidi1l7Hhj5D/INhJxiICObqpMu4Q==
+  dependencies:
+    "@webassemblyjs/helper-numbers" "1.11.6"
+    "@webassemblyjs/helper-wasm-bytecode" "1.11.6"
+
+"@webassemblyjs/floating-point-hex-parser@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/floating-point-hex-parser/-/floating-point-hex-parser-1.11.6.tgz#dacbcb95aff135c8260f77fa3b4c5fea600a6431"
+  integrity sha512-ejAj9hfRJ2XMsNHk/v6Fu2dGS+i4UaXBXGemOfQ/JfQ6mdQg/WXtwleQRLLS4OvfDhv8rYnVwH27YJLMyYsxhw==
+
+"@webassemblyjs/helper-api-error@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/helper-api-error/-/helper-api-error-1.11.6.tgz#6132f68c4acd59dcd141c44b18cbebbd9f2fa768"
+  integrity sha512-o0YkoP4pVu4rN8aTJgAyj9hC2Sv5UlkzCHhxqWj8butaLvnpdc2jOwh4ewE6CX0txSfLn/UYaV/pheS2Txg//Q==
+
+"@webassemblyjs/helper-buffer@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/helper-buffer/-/helper-buffer-1.11.6.tgz#b66d73c43e296fd5e88006f18524feb0f2c7c093"
+  integrity sha512-z3nFzdcp1mb8nEOFFk8DrYLpHvhKC3grJD2ardfKOzmbmJvEf/tPIqCY+sNcwZIY8ZD7IkB2l7/pqhUhqm7hLA==
+
+"@webassemblyjs/helper-numbers@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/helper-numbers/-/helper-numbers-1.11.6.tgz#cbce5e7e0c1bd32cf4905ae444ef64cea919f1b5"
+  integrity sha512-vUIhZ8LZoIWHBohiEObxVm6hwP034jwmc9kuq5GdHZH0wiLVLIPcMCdpJzG4C11cHoQ25TFIQj9kaVADVX7N3g==
+  dependencies:
+    "@webassemblyjs/floating-point-hex-parser" "1.11.6"
+    "@webassemblyjs/helper-api-error" "1.11.6"
+    "@xtuc/long" "4.2.2"
+
+"@webassemblyjs/helper-wasm-bytecode@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/helper-wasm-bytecode/-/helper-wasm-bytecode-1.11.6.tgz#bb2ebdb3b83aa26d9baad4c46d4315283acd51e9"
+  integrity sha512-sFFHKwcmBprO9e7Icf0+gddyWYDViL8bpPjJJl0WHxCdETktXdmtWLGVzoHbqUcY4Be1LkNfwTmXOJUFZYSJdA==
+
+"@webassemblyjs/helper-wasm-section@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/helper-wasm-section/-/helper-wasm-section-1.11.6.tgz#ff97f3863c55ee7f580fd5c41a381e9def4aa577"
+  integrity sha512-LPpZbSOwTpEC2cgn4hTydySy1Ke+XEu+ETXuoyvuyezHO3Kjdu90KK95Sh9xTbmjrCsUwvWwCOQQNta37VrS9g==
+  dependencies:
+    "@webassemblyjs/ast" "1.11.6"
+    "@webassemblyjs/helper-buffer" "1.11.6"
+    "@webassemblyjs/helper-wasm-bytecode" "1.11.6"
+    "@webassemblyjs/wasm-gen" "1.11.6"
+
+"@webassemblyjs/ieee754@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/ieee754/-/ieee754-1.11.6.tgz#bb665c91d0b14fffceb0e38298c329af043c6e3a"
+  integrity sha512-LM4p2csPNvbij6U1f19v6WR56QZ8JcHg3QIJTlSwzFcmx6WSORicYj6I63f9yU1kEUtrpG+kjkiIAkevHpDXrg==
+  dependencies:
+    "@xtuc/ieee754" "^1.2.0"
+
+"@webassemblyjs/leb128@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/leb128/-/leb128-1.11.6.tgz#70e60e5e82f9ac81118bc25381a0b283893240d7"
+  integrity sha512-m7a0FhE67DQXgouf1tbN5XQcdWoNgaAuoULHIfGFIEVKA6tu/edls6XnIlkmS6FrXAquJRPni3ZZKjw6FSPjPQ==
+  dependencies:
+    "@xtuc/long" "4.2.2"
+
+"@webassemblyjs/utf8@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/utf8/-/utf8-1.11.6.tgz#90f8bc34c561595fe156603be7253cdbcd0fab5a"
+  integrity sha512-vtXf2wTQ3+up9Zsg8sa2yWiQpzSsMyXj0qViVP6xKGCUT8p8YJ6HqI7l5eCnWx1T/FYdsv07HQs2wTFbbof/RA==
+
+"@webassemblyjs/wasm-edit@^1.11.5":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/wasm-edit/-/wasm-edit-1.11.6.tgz#c72fa8220524c9b416249f3d94c2958dfe70ceab"
+  integrity sha512-Ybn2I6fnfIGuCR+Faaz7YcvtBKxvoLV3Lebn1tM4o/IAJzmi9AWYIPWpyBfU8cC+JxAO57bk4+zdsTjJR+VTOw==
+  dependencies:
+    "@webassemblyjs/ast" "1.11.6"
+    "@webassemblyjs/helper-buffer" "1.11.6"
+    "@webassemblyjs/helper-wasm-bytecode" "1.11.6"
+    "@webassemblyjs/helper-wasm-section" "1.11.6"
+    "@webassemblyjs/wasm-gen" "1.11.6"
+    "@webassemblyjs/wasm-opt" "1.11.6"
+    "@webassemblyjs/wasm-parser" "1.11.6"
+    "@webassemblyjs/wast-printer" "1.11.6"
+
+"@webassemblyjs/wasm-gen@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/wasm-gen/-/wasm-gen-1.11.6.tgz#fb5283e0e8b4551cc4e9c3c0d7184a65faf7c268"
+  integrity sha512-3XOqkZP/y6B4F0PBAXvI1/bky7GryoogUtfwExeP/v7Nzwo1QLcq5oQmpKlftZLbT+ERUOAZVQjuNVak6UXjPA==
+  dependencies:
+    "@webassemblyjs/ast" "1.11.6"
+    "@webassemblyjs/helper-wasm-bytecode" "1.11.6"
+    "@webassemblyjs/ieee754" "1.11.6"
+    "@webassemblyjs/leb128" "1.11.6"
+    "@webassemblyjs/utf8" "1.11.6"
+
+"@webassemblyjs/wasm-opt@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/wasm-opt/-/wasm-opt-1.11.6.tgz#d9a22d651248422ca498b09aa3232a81041487c2"
+  integrity sha512-cOrKuLRE7PCe6AsOVl7WasYf3wbSo4CeOk6PkrjS7g57MFfVUF9u6ysQBBODX0LdgSvQqRiGz3CXvIDKcPNy4g==
+  dependencies:
+    "@webassemblyjs/ast" "1.11.6"
+    "@webassemblyjs/helper-buffer" "1.11.6"
+    "@webassemblyjs/wasm-gen" "1.11.6"
+    "@webassemblyjs/wasm-parser" "1.11.6"
+
+"@webassemblyjs/wasm-parser@1.11.6", "@webassemblyjs/wasm-parser@^1.11.5":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/wasm-parser/-/wasm-parser-1.11.6.tgz#bb85378c527df824004812bbdb784eea539174a1"
+  integrity sha512-6ZwPeGzMJM3Dqp3hCsLgESxBGtT/OeCvCZ4TA1JUPYgmhAx38tTPR9JaKy0S5H3evQpO/h2uWs2j6Yc/fjkpTQ==
+  dependencies:
+    "@webassemblyjs/ast" "1.11.6"
+    "@webassemblyjs/helper-api-error" "1.11.6"
+    "@webassemblyjs/helper-wasm-bytecode" "1.11.6"
+    "@webassemblyjs/ieee754" "1.11.6"
+    "@webassemblyjs/leb128" "1.11.6"
+    "@webassemblyjs/utf8" "1.11.6"
+
+"@webassemblyjs/wast-printer@1.11.6":
+  version "1.11.6"
+  resolved "https://registry.yarnpkg.com/@webassemblyjs/wast-printer/-/wast-printer-1.11.6.tgz#a7bf8dd7e362aeb1668ff43f35cb849f188eff20"
+  integrity sha512-JM7AhRcE+yW2GWYaKeHL5vt4xqee5N2WcezptmgyhNS+ScggqcT1OtXykhAb13Sn5Yas0j2uv9tHgrjwvzAP4A==
+  dependencies:
+    "@webassemblyjs/ast" "1.11.6"
+    "@xtuc/long" "4.2.2"
+
+"@webpack-cli/configtest@^1.2.0":
+  version "1.2.0"
+  resolved "https://registry.yarnpkg.com/@webpack-cli/configtest/-/configtest-1.2.0.tgz#7b20ce1c12533912c3b217ea68262365fa29a6f5"
+  integrity sha512-4FB8Tj6xyVkyqjj1OaTqCjXYULB9FMkqQ8yGrZjRDrYh0nOE+7Lhs45WioWQQMV+ceFlE368Ukhe6xdvJM9Egg==
+
+"@webpack-cli/info@^1.5.0":
+  version "1.5.0"
+  resolved "https://registry.yarnpkg.com/@webpack-cli/info/-/info-1.5.0.tgz#6c78c13c5874852d6e2dd17f08a41f3fe4c261b1"
+  integrity sha512-e8tSXZpw2hPl2uMJY6fsMswaok5FdlGNRTktvFk2sD8RjH0hE2+XistawJx1vmKteh4NmGmNUrp+Tb2w+udPcQ==
+  dependencies:
+    envinfo "^7.7.3"
+
+"@webpack-cli/serve@^1.7.0":
+  version "1.7.0"
+  resolved "https://registry.yarnpkg.com/@webpack-cli/serve/-/serve-1.7.0.tgz#e1993689ac42d2b16e9194376cfb6753f6254db1"
+  integrity sha512-oxnCNGj88fL+xzV+dacXs44HcDwf1ovs3AuEzvP7mqXw7fQntqIhQ1BRmynh4qEKQSSSRSWVyXRjmTbZIX9V2Q==
+
+"@xtuc/ieee754@^1.2.0":
+  version "1.2.0"
+  resolved "https://registry.yarnpkg.com/@xtuc/ieee754/-/ieee754-1.2.0.tgz#eef014a3145ae477a1cbc00cd1e552336dceb790"
+  integrity sha512-DX8nKgqcGwsc0eJSqYt5lwP4DH5FlHnmuWWBRy7X0NcaGR0ZtuyeESgMwTYVEtxmsNGY+qit4QYT/MIYTOTPeA==
+
+"@xtuc/long@4.2.2":
+  version "4.2.2"
+  resolved "https://registry.yarnpkg.com/@xtuc/long/-/long-4.2.2.tgz#d291c6a4e97989b5c61d9acf396ae4fe133a718d"
+  integrity sha512-NuHqBY1PB/D8xU6s/thBgOAiAP7HOYDQ32+BFZILJ8ivkUkAHQnWfn6WhL79Owj1qmUnoN/YPhktdIoucipkAQ==
+
+acorn-import-assertions@^1.9.0:
+  version "1.9.0"
+  resolved "https://registry.yarnpkg.com/acorn-import-assertions/-/acorn-import-assertions-1.9.0.tgz#507276249d684797c84e0734ef84860334cfb1ac"
+  integrity sha512-cmMwop9x+8KFhxvKrKfPYmN6/pKTYYHBqLa0DfvVZcKMJWNyWLnaqND7dx/qn66R7ewM1UX5XMaDVP5wlVTaVA==
+
+acorn@^8.7.1, acorn@^8.8.2:
+  version "8.11.2"
+  resolved "https://registry.yarnpkg.com/acorn/-/acorn-8.11.2.tgz#ca0d78b51895be5390a5903c5b3bdcdaf78ae40b"
+  integrity sha512-nc0Axzp/0FILLEVsm4fNwLCwMttvhEI263QtVPQcbpfZZ3ts0hLsZGOpE6czNlid7CJ9MlyH8reXkpsf3YUY4w==
+
+aggregate-error@^3.0.0:
+  version "3.1.0"
+  resolved "https://registry.yarnpkg.com/aggregate-error/-/aggregate-error-3.1.0.tgz#92670ff50f5359bdb7a3e0d40d0ec30c5737687a"
+  integrity sha512-4I7Td01quW/RpocfNayFdFVk1qSuoh0E7JrbRJ16nH01HhKFQ88INq9Sd+nd72zqRySlr9BmDA8xlEJ6vJMrYA==
+  dependencies:
+    clean-stack "^2.0.0"
+    indent-string "^4.0.0"
+
+ajv-keywords@^3.5.2:
+  version "3.5.2"
+  resolved "https://registry.yarnpkg.com/ajv-keywords/-/ajv-keywords-3.5.2.tgz#31f29da5ab6e00d1c2d329acf7b5929614d5014d"
+  integrity sha512-5p6WTN0DdTGVQk6VjcEju19IgaHudalcfabD7yhDGeA6bcQnmL+CpveLJq/3hvfwd1aof6L386Ougkx6RfyMIQ==
+
+ajv@^6.12.5:
+  version "6.12.6"
+  resolved "https://registry.yarnpkg.com/ajv/-/ajv-6.12.6.tgz#baf5a62e802b07d977034586f8c3baf5adf26df4"
+  integrity sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==
+  dependencies:
+    fast-deep-equal "^3.1.1"
+    fast-json-stable-stringify "^2.0.0"
+    json-schema-traverse "^0.4.1"
+    uri-js "^4.2.2"
+
+ansi-styles@^3.2.1:
+  version "3.2.1"
+  resolved "https://registry.yarnpkg.com/ansi-styles/-/ansi-styles-3.2.1.tgz#41fbb20243e50b12be0f04b8dedbf07520ce841d"
+  integrity sha512-VT0ZI6kZRdTh8YyJw3SMbYm/u+NqfsAxEpWO0Pf9sq8/e94WxxOpPKx9FR1FlyCtOVDNOQ+8ntlqFxiRc+r5qA==
+  dependencies:
+    color-convert "^1.9.0"
+
+ansi-styles@^4.1.0:
+  version "4.3.0"
+  resolved "https://registry.yarnpkg.com/ansi-styles/-/ansi-styles-4.3.0.tgz#edd803628ae71c04c85ae7a0906edad34b648937"
+  integrity sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==
+  dependencies:
+    color-convert "^2.0.1"
+
+array-union@^2.1.0:
+  version "2.1.0"
+  resolved "https://registry.yarnpkg.com/array-union/-/array-union-2.1.0.tgz#b798420adbeb1de828d84acd8a2e23d3efe85e8d"
+  integrity sha512-HGyxoOTYUyCM6stUe6EJgnd4EoewAI7zMdfqO+kGjnlZmBDz/cR5pf8r/cR4Wq60sL/p0IkcjUEEPwS3GFrIyw==
+
+balanced-match@^1.0.0:
+  version "1.0.2"
+  resolved "https://registry.yarnpkg.com/balanced-match/-/balanced-match-1.0.2.tgz#e83e3a7e3f300b34cb9d87f615fa0cbf357690ee"
+  integrity sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==
+
+big.js@^5.2.2:
+  version "5.2.2"
+  resolved "https://registry.yarnpkg.com/big.js/-/big.js-5.2.2.tgz#65f0af382f578bcdc742bd9c281e9cb2d7768328"
+  integrity sha512-vyL2OymJxmarO8gxMr0mhChsO9QGwhynfuu4+MHTAW6czfq9humCB7rKpUjDd9YUiDPU4mzpyupFSvOClAwbmQ==
+
+boolbase@^1.0.0:
+  version "1.0.0"
+  resolved "https://registry.yarnpkg.com/boolbase/-/boolbase-1.0.0.tgz#68dff5fbe60c51eb37725ea9e3ed310dcc1e776e"
+  integrity sha512-JZOSA7Mo9sNGB8+UjSgzdLtokWAky1zbztM3WRLCbZ70/3cTANmQmOdR7y2g+J0e2WXywy1yS468tY+IruqEww==
+
+brace-expansion@^1.1.7:
+  version "1.1.11"
+  resolved "https://registry.yarnpkg.com/brace-expansion/-/brace-expansion-1.1.11.tgz#3c7fcbf529d87226f3d2f52b966ff5271eb441dd"
+  integrity sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==
+  dependencies:
+    balanced-match "^1.0.0"
+    concat-map "0.0.1"
+
+braces@^3.0.2:
+  version "3.0.2"
+  resolved "https://registry.yarnpkg.com/braces/-/braces-3.0.2.tgz#3454e1a462ee8d599e236df336cd9ea4f8afe107"
+  integrity sha512-b8um+L1RzM3WDSzvhm6gIz1yfTbBt6YTlcEKAvsmqCZZFw46z626lVj9j1yEPW33H5H+lBQpZMP1k8l+78Ha0A==
+  dependencies:
+    fill-range "^7.0.1"
+
+browserslist@^4.0.0, browserslist@^4.14.5, browserslist@^4.21.4:
+  version "4.22.1"
+  resolved "https://registry.yarnpkg.com/browserslist/-/browserslist-4.22.1.tgz#ba91958d1a59b87dab6fed8dfbcb3da5e2e9c619"
+  integrity sha512-FEVc202+2iuClEhZhrWy6ZiAcRLvNMyYcxZ8raemul1DYVOVdFsbqckWLdsixQZCpJlwe77Z3UTalE7jsjnKfQ==
+  dependencies:
+    caniuse-lite "^1.0.30001541"
+    electron-to-chromium "^1.4.535"
+    node-releases "^2.0.13"
+    update-browserslist-db "^1.0.13"
+
+buffer-from@^1.0.0:
+  version "1.1.2"
+  resolved "https://registry.yarnpkg.com/buffer-from/-/buffer-from-1.1.2.tgz#2b146a6fd72e80b4f55d255f35ed59a3a9a41bd5"
+  integrity sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==
+
+cacache@^15.0.5:
+  version "15.3.0"
+  resolved "https://registry.yarnpkg.com/cacache/-/cacache-15.3.0.tgz#dc85380fb2f556fe3dda4c719bfa0ec875a7f1eb"
+  integrity sha512-VVdYzXEn+cnbXpFgWs5hTT7OScegHVmLhJIR8Ufqk3iFD6A6j5iSX1KuBTfNEv4tdJWE2PzA6IVFtcLC7fN9wQ==
+  dependencies:
+    "@npmcli/fs" "^1.0.0"
+    "@npmcli/move-file" "^1.0.1"
+    chownr "^2.0.0"
+    fs-minipass "^2.0.0"
+    glob "^7.1.4"
+    infer-owner "^1.0.4"
+    lru-cache "^6.0.0"
+    minipass "^3.1.1"
+    minipass-collect "^1.0.2"
+    minipass-flush "^1.0.5"
+    minipass-pipeline "^1.2.2"
+    mkdirp "^1.0.3"
+    p-map "^4.0.0"
+    promise-inflight "^1.0.1"
+    rimraf "^3.0.2"
+    ssri "^8.0.1"
+    tar "^6.0.2"
+    unique-filename "^1.1.1"
+
+callsites@^3.0.0:
+  version "3.1.0"
+  resolved "https://registry.yarnpkg.com/callsites/-/callsites-3.1.0.tgz#b3630abd8943432f54b3f0519238e33cd7df2f73"
+  integrity sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==
+
+camelcase-css@^2.0.1:
+  version "2.0.1"
+  resolved "https://registry.yarnpkg.com/camelcase-css/-/camelcase-css-2.0.1.tgz#ee978f6947914cc30c6b44741b6ed1df7f043fd5"
+  integrity sha512-QOSvevhslijgYwRx6Rv7zKdMF8lbRmx+uQGx2+vDc+KI/eBnsy9kit5aj23AgGu3pa4t9AgwbnXWqS+iOY+2aA==
+
+caniuse-api@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/caniuse-api/-/caniuse-api-3.0.0.tgz#5e4d90e2274961d46291997df599e3ed008ee4c0"
+  integrity sha512-bsTwuIg/BZZK/vreVTYYbSWoe2F+71P7K5QGEX+pT250DZbfU1MQ5prOKpPR+LL6uWKK3KMwMCAS74QB3Um1uw==
+  dependencies:
+    browserslist "^4.0.0"
+    caniuse-lite "^1.0.0"
+    lodash.memoize "^4.1.2"
+    lodash.uniq "^4.5.0"
+
+caniuse-lite@^1.0.0, caniuse-lite@^1.0.30001541:
+  version "1.0.30001563"
+  resolved "https://registry.yarnpkg.com/caniuse-lite/-/caniuse-lite-1.0.30001563.tgz#aa68a64188903e98f36eb9c56e48fba0c1fe2a32"
+  integrity sha512-na2WUmOxnwIZtwnFI2CZ/3er0wdNzU7hN+cPYz/z2ajHThnkWjNBOpEPP4n+4r2WPM847JaMotaJE3bnfzjyKw==
+
+chalk@^2.4.2:
+  version "2.4.2"
+  resolved "https://registry.yarnpkg.com/chalk/-/chalk-2.4.2.tgz#cd42541677a54333cf541a49108c1432b44c9424"
+  integrity sha512-Mti+f9lpJNcwF4tWV8/OrTTtF1gZi+f8FqlyAdouralcFWFQWF2+NgCHShjkCb+IFBLq9buZwE1xckQU4peSuQ==
+  dependencies:
+    ansi-styles "^3.2.1"
+    escape-string-regexp "^1.0.5"
+    supports-color "^5.3.0"
+
+chalk@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/chalk/-/chalk-3.0.0.tgz#3f73c2bf526591f574cc492c51e2456349f844e4"
+  integrity sha512-4D3B6Wf41KOYRFdszmDqMCGq5VV/uMAB273JILmO+3jAlh8X4qDtdtgCR3fxtbLEMzSx22QdhnDcJvu2u1fVwg==
+  dependencies:
+    ansi-styles "^4.1.0"
+    supports-color "^7.1.0"
+
+chalk@^4.0.0, chalk@^4.1.0:
+  version "4.1.2"
+  resolved "https://registry.yarnpkg.com/chalk/-/chalk-4.1.2.tgz#aac4e2b7734a740867aeb16bf02aad556a1e7a01"
+  integrity sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==
+  dependencies:
+    ansi-styles "^4.1.0"
+    supports-color "^7.1.0"
+
+chownr@^2.0.0:
+  version "2.0.0"
+  resolved "https://registry.yarnpkg.com/chownr/-/chownr-2.0.0.tgz#15bfbe53d2eab4cf70f18a8cd68ebe5b3cb1dece"
+  integrity sha512-bIomtDF5KGpdogkLd9VspvFzk9KfpyyGlS8YFVZl7TGPBHL5snIOnxeshwVgPteQ9b4Eydl+pVbIyE1DcvCWgQ==
+
+chrome-trace-event@^1.0.2:
+  version "1.0.3"
+  resolved "https://registry.yarnpkg.com/chrome-trace-event/-/chrome-trace-event-1.0.3.tgz#1015eced4741e15d06664a957dbbf50d041e26ac"
+  integrity sha512-p3KULyQg4S7NIHixdwbGX+nFHkoBiA4YQmyWtjb8XngSKV124nJmRysgAeujbUVb15vh+RvFUfCPqU7rXk+hZg==
+
+ckeditor5@~35.1.0:
+  version "35.1.0"
+  resolved "https://registry.yarnpkg.com/ckeditor5/-/ckeditor5-35.1.0.tgz#4fe60a90d5da69b6e59a97bb8358c536665ee4c4"
+  integrity sha512-Mk8qPXT1OW1BxwVbDnphJmNww8kodKv48HUqSWBCI5i+hOZ/zXNdBoD48NCYqJ5Lr2rJCvlfZ93t3cc//20hwg==
+  dependencies:
+    "@ckeditor/ckeditor5-clipboard" "^35.1.0"
+    "@ckeditor/ckeditor5-core" "^35.1.0"
+    "@ckeditor/ckeditor5-engine" "^35.1.0"
+    "@ckeditor/ckeditor5-enter" "^35.1.0"
+    "@ckeditor/ckeditor5-paragraph" "^35.1.0"
+    "@ckeditor/ckeditor5-select-all" "^35.1.0"
+    "@ckeditor/ckeditor5-typing" "^35.1.0"
+    "@ckeditor/ckeditor5-ui" "^35.1.0"
+    "@ckeditor/ckeditor5-undo" "^35.1.0"
+    "@ckeditor/ckeditor5-upload" "^35.1.0"
+    "@ckeditor/ckeditor5-utils" "^35.1.0"
+    "@ckeditor/ckeditor5-widget" "^35.1.0"
+
+clean-stack@^2.0.0:
+  version "2.2.0"
+  resolved "https://registry.yarnpkg.com/clean-stack/-/clean-stack-2.2.0.tgz#ee8472dbb129e727b31e8a10a427dee9dfe4008b"
+  integrity sha512-4diC9HaTE+KRAMWhDhrGOECgWZxoevMc5TlkObMqNSsVU62PYzXZ/SMTjzyGAFF1YusgxGcSWTEXBhp0CPwQ1A==
+
+cli-cursor@^3.1.0:
+  version "3.1.0"
+  resolved "https://registry.yarnpkg.com/cli-cursor/-/cli-cursor-3.1.0.tgz#264305a7ae490d1d03bf0c9ba7c925d1753af307"
+  integrity sha512-I/zHAwsKf9FqGoXM4WWRACob9+SNukZTd94DWF57E4toouRulbCxcUh6RKUEOQlYTHJnzkPMySvPNaaSLNfLZw==
+  dependencies:
+    restore-cursor "^3.1.0"
+
+cli-spinners@^2.6.1:
+  version "2.9.1"
+  resolved "https://registry.yarnpkg.com/cli-spinners/-/cli-spinners-2.9.1.tgz#9c0b9dad69a6d47cbb4333c14319b060ed395a35"
+  integrity sha512-jHgecW0pxkonBJdrKsqxgRX9AcG+u/5k0Q7WPDfi8AogLAdwxEkyYYNWwZ5GvVFoFx2uiY1eNcSK00fh+1+FyQ==
+
+clone-deep@^4.0.1:
+  version "4.0.1"
+  resolved "https://registry.yarnpkg.com/clone-deep/-/clone-deep-4.0.1.tgz#c19fd9bdbbf85942b4fd979c84dcf7d5f07c2387"
+  integrity sha512-neHB9xuzh/wk0dIHweyAXv2aPGZIVk3pLMe+/RNzINf17fe0OG96QroktYAUm7SM1PBnzTabaLboqqxDyMU+SQ==
+  dependencies:
+    is-plain-object "^2.0.4"
+    kind-of "^6.0.2"
+    shallow-clone "^3.0.0"
+
+color-convert@2.0.1, color-convert@^2.0.1:
+  version "2.0.1"
+  resolved "https://registry.yarnpkg.com/color-convert/-/color-convert-2.0.1.tgz#72d3a68d598c9bdb3af2ad1e84f21d896abd4de3"
+  integrity sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==
+  dependencies:
+    color-name "~1.1.4"
+
+color-convert@^1.9.0:
+  version "1.9.3"
+  resolved "https://registry.yarnpkg.com/color-convert/-/color-convert-1.9.3.tgz#bb71850690e1f136567de629d2d5471deda4c1e8"
+  integrity sha512-QfAUtd+vFdAtFQcC8CCyYt1fYWxSqAiK2cSD6zDB8N3cpsEBAvRxp9zOGg6G/SHHJYAT88/az/IuDGALsNVbGg==
+  dependencies:
+    color-name "1.1.3"
+
+color-name@1.1.3:
+  version "1.1.3"
+  resolved "https://registry.yarnpkg.com/color-name/-/color-name-1.1.3.tgz#a7d0558bd89c42f795dd42328f740831ca53bc25"
+  integrity sha512-72fSenhMw2HZMTVHeCA9KCmpEIbzWiQsjN+BHcBbS9vr1mtt+vJjPdksIBNUmKAW8TFUDPJK5SUU3QhE9NEXDw==
+
+color-name@^1.0.0, color-name@~1.1.4:
+  version "1.1.4"
+  resolved "https://registry.yarnpkg.com/color-name/-/color-name-1.1.4.tgz#c2a09a87acbde69543de6f63fa3995c826c536a2"
+  integrity sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==
+
+color-parse@1.4.2:
+  version "1.4.2"
+  resolved "https://registry.yarnpkg.com/color-parse/-/color-parse-1.4.2.tgz#78651f5d34df1a57f997643d86f7f87268ad4eb5"
+  integrity sha512-RI7s49/8yqDj3fECFZjUI1Yi0z/Gq1py43oNJivAIIDSyJiOZLfYCRQEgn8HEVAj++PcRe8AnL2XF0fRJ3BTnA==
+  dependencies:
+    color-name "^1.0.0"
+
+colord@^2.9.1:
+  version "2.9.3"
+  resolved "https://registry.yarnpkg.com/colord/-/colord-2.9.3.tgz#4f8ce919de456f1d5c1c368c307fe20f3e59fb43"
+  integrity sha512-jeC1axXpnb0/2nn/Y1LPuLdgXBLH7aDcHu4KEKfqw3CUhX7ZpfBSlPKyqXE6btIgEzfWtrX3/tyBCaCvXvMkOw==
+
+colorette@^2.0.14:
+  version "2.0.20"
+  resolved "https://registry.yarnpkg.com/colorette/-/colorette-2.0.20.tgz#9eb793e6833067f7235902fcd3b09917a000a95a"
+  integrity sha512-IfEDxwoWIjkeXL1eXcDiow4UbKjhLdq6/EuSVR9GMN7KVH3r9gQ83e73hsz1Nd1T3ijd5xv1wcWRYO+D6kCI2w==
+
+commander@^2.20.0:
+  version "2.20.3"
+  resolved "https://registry.yarnpkg.com/commander/-/commander-2.20.3.tgz#fd485e84c03eb4881c20722ba48035e8531aeb33"
+  integrity sha512-GpVkmM8vF2vQUkj2LvZmD35JxeJOLCwJ9cUkugyk2nuhbv3+mJvpLYYt+0+USMxE+oj+ey/lJEnhZw75x/OMcQ==
+
+commander@^7.0.0, commander@^7.2.0:
+  version "7.2.0"
+  resolved "https://registry.yarnpkg.com/commander/-/commander-7.2.0.tgz#a36cb57d0b501ce108e4d20559a150a391d97ab7"
+  integrity sha512-QrWXB+ZQSVPmIWIhtEO9H+gwHaMGYiF5ChvoJ+K9ZGHG/sVsa6yiesAD1GC/x46sET00Xlwo1u49RVVVzvcSkw==
+
+commondir@^1.0.1:
+  version "1.0.1"
+  resolved "https://registry.yarnpkg.com/commondir/-/commondir-1.0.1.tgz#ddd800da0c66127393cca5950ea968a3aaf1253b"
+  integrity sha512-W9pAhw0ja1Edb5GVdIF1mjZw/ASI0AlShXM83UUGe2DVr5TdAPEA1OA8m/g8zWp9x6On7gqufY+FatDbC3MDQg==
+
+concat-map@0.0.1:
+  version "0.0.1"
+  resolved "https://registry.yarnpkg.com/concat-map/-/concat-map-0.0.1.tgz#d8a96bd77fd68df7793a73036a3ba0d5405d477b"
+  integrity sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==
+
+cosmiconfig@^7.0.0:
+  version "7.1.0"
+  resolved "https://registry.yarnpkg.com/cosmiconfig/-/cosmiconfig-7.1.0.tgz#1443b9afa596b670082ea46cbd8f6a62b84635f6"
+  integrity sha512-AdmX6xUzdNASswsFtmwSt7Vj8po9IuqXm0UXz7QKPuEUmPB4XyjGfaAr2PSuELMwkRMVH1EpIkX5bTZGRB3eCA==
+  dependencies:
+    "@types/parse-json" "^4.0.0"
+    import-fresh "^3.2.1"
+    parse-json "^5.0.0"
+    path-type "^4.0.0"
+    yaml "^1.10.0"
+
+cross-spawn@^7.0.3:
+  version "7.0.3"
+  resolved "https://registry.yarnpkg.com/cross-spawn/-/cross-spawn-7.0.3.tgz#f73a85b9d5d41d045551c177e2882d4ac85728a6"
+  integrity sha512-iRDPJKUPVEND7dHPO8rkbOnPpyDygcDFtWjpeWNCgy8WP2rXcxXL8TskReQl6OrB2G7+UJrags1q15Fudc7G6w==
+  dependencies:
+    path-key "^3.1.0"
+    shebang-command "^2.0.0"
+    which "^2.0.1"
+
+css-declaration-sorter@^6.3.1:
+  version "6.4.1"
+  resolved "https://registry.yarnpkg.com/css-declaration-sorter/-/css-declaration-sorter-6.4.1.tgz#28beac7c20bad7f1775be3a7129d7eae409a3a71"
+  integrity sha512-rtdthzxKuyq6IzqX6jEcIzQF/YqccluefyCYheovBOLhFT/drQA9zj/UbRAa9J7C0o6EG6u3E6g+vKkay7/k3g==
+
+css-loader@^6.8.1:
+  version "6.8.1"
+  resolved "https://registry.yarnpkg.com/css-loader/-/css-loader-6.8.1.tgz#0f8f52699f60f5e679eab4ec0fcd68b8e8a50a88"
+  integrity sha512-xDAXtEVGlD0gJ07iclwWVkLoZOpEvAWaSyf6W18S2pOC//K8+qUDIx8IIT3D+HjnmkJPQeesOPv5aiUaJsCM2g==
+  dependencies:
+    icss-utils "^5.1.0"
+    postcss "^8.4.21"
+    postcss-modules-extract-imports "^3.0.0"
+    postcss-modules-local-by-default "^4.0.3"
+    postcss-modules-scope "^3.0.0"
+    postcss-modules-values "^4.0.0"
+    postcss-value-parser "^4.2.0"
+    semver "^7.3.8"
+
+css-select@^4.1.3:
+  version "4.3.0"
+  resolved "https://registry.yarnpkg.com/css-select/-/css-select-4.3.0.tgz#db7129b2846662fd8628cfc496abb2b59e41529b"
+  integrity sha512-wPpOYtnsVontu2mODhA19JrqWxNsfdatRKd64kmpRbQgh1KtItko5sTnEpPdpSaJszTOhEMlF/RPz28qj4HqhQ==
+  dependencies:
+    boolbase "^1.0.0"
+    css-what "^6.0.1"
+    domhandler "^4.3.1"
+    domutils "^2.8.0"
+    nth-check "^2.0.1"
+
+css-tree@^1.1.2, css-tree@^1.1.3:
+  version "1.1.3"
+  resolved "https://registry.yarnpkg.com/css-tree/-/css-tree-1.1.3.tgz#eb4870fb6fd7707327ec95c2ff2ab09b5e8db91d"
+  integrity sha512-tRpdppF7TRazZrjJ6v3stzv93qxRcSsFmW6cX0Zm2NVKpxE1WV1HblnghVv9TreireHkqI/VDEsfolRF1p6y7Q==
+  dependencies:
+    mdn-data "2.0.14"
+    source-map "^0.6.1"
+
+css-what@^6.0.1:
+  version "6.1.0"
+  resolved "https://registry.yarnpkg.com/css-what/-/css-what-6.1.0.tgz#fb5effcf76f1ddea2c81bdfaa4de44e79bac70f4"
+  integrity sha512-HTUrgRJ7r4dsZKU6GjmpfRK1O76h97Z8MfS1G0FozR+oF2kG6Vfe8JE6zwrkbxigziPHinCJ+gCPjA9EaBDtRw==
+
+cssesc@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/cssesc/-/cssesc-3.0.0.tgz#37741919903b868565e1c09ea747445cd18983ee"
+  integrity sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==
+
+cssnano-preset-default@^5.2.14:
+  version "5.2.14"
+  resolved "https://registry.yarnpkg.com/cssnano-preset-default/-/cssnano-preset-default-5.2.14.tgz#309def4f7b7e16d71ab2438052093330d9ab45d8"
+  integrity sha512-t0SFesj/ZV2OTylqQVOrFgEh5uanxbO6ZAdeCrNsUQ6fVuXwYTxJPNAGvGTxHbD68ldIJNec7PyYZDBrfDQ+6A==
+  dependencies:
+    css-declaration-sorter "^6.3.1"
+    cssnano-utils "^3.1.0"
+    postcss-calc "^8.2.3"
+    postcss-colormin "^5.3.1"
+    postcss-convert-values "^5.1.3"
+    postcss-discard-comments "^5.1.2"
+    postcss-discard-duplicates "^5.1.0"
+    postcss-discard-empty "^5.1.1"
+    postcss-discard-overridden "^5.1.0"
+    postcss-merge-longhand "^5.1.7"
+    postcss-merge-rules "^5.1.4"
+    postcss-minify-font-values "^5.1.0"
+    postcss-minify-gradients "^5.1.1"
+    postcss-minify-params "^5.1.4"
+    postcss-minify-selectors "^5.2.1"
+    postcss-normalize-charset "^5.1.0"
+    postcss-normalize-display-values "^5.1.0"
+    postcss-normalize-positions "^5.1.1"
+    postcss-normalize-repeat-style "^5.1.1"
+    postcss-normalize-string "^5.1.0"
+    postcss-normalize-timing-functions "^5.1.0"
+    postcss-normalize-unicode "^5.1.1"
+    postcss-normalize-url "^5.1.0"
+    postcss-normalize-whitespace "^5.1.1"
+    postcss-ordered-values "^5.1.3"
+    postcss-reduce-initial "^5.1.2"
+    postcss-reduce-transforms "^5.1.0"
+    postcss-svgo "^5.1.0"
+    postcss-unique-selectors "^5.1.1"
+
+cssnano-utils@^3.1.0:
+  version "3.1.0"
+  resolved "https://registry.yarnpkg.com/cssnano-utils/-/cssnano-utils-3.1.0.tgz#95684d08c91511edfc70d2636338ca37ef3a6861"
+  integrity sha512-JQNR19/YZhz4psLX/rQ9M83e3z2Wf/HdJbryzte4a3NSuafyp9w/I4U+hx5C2S9g41qlstH7DEWnZaaj83OuEA==
+
+cssnano@^5.0.0:
+  version "5.1.15"
+  resolved "https://registry.yarnpkg.com/cssnano/-/cssnano-5.1.15.tgz#ded66b5480d5127fcb44dac12ea5a983755136bf"
+  integrity sha512-j+BKgDcLDQA+eDifLx0EO4XSA56b7uut3BQFH+wbSaSTuGLuiyTa/wbRYthUXX8LC9mLg+WWKe8h+qJuwTAbHw==
+  dependencies:
+    cssnano-preset-default "^5.2.14"
+    lilconfig "^2.0.3"
+    yaml "^1.10.2"
+
+csso@^4.2.0:
+  version "4.2.0"
+  resolved "https://registry.yarnpkg.com/csso/-/csso-4.2.0.tgz#ea3a561346e8dc9f546d6febedd50187cf389529"
+  integrity sha512-wvlcdIbf6pwKEk7vHj8/Bkc0B4ylXZruLvOgs9doS5eOsOpuodOV2zJChSpkp+pRpYQLQMeF04nr3Z68Sta9jA==
+  dependencies:
+    css-tree "^1.1.2"
+
+debug@^4.1.0:
+  version "4.3.4"
+  resolved "https://registry.yarnpkg.com/debug/-/debug-4.3.4.tgz#1319f6579357f2338d3337d2cdd4914bb5dcc865"
+  integrity sha512-PRWFHuSU3eDtQJPvnNY7Jcket1j0t5OuOsFzPPzsekD52Zl8qUfFIPEiswXqIvHWGVHOgX+7G/vCNNhehwxfkQ==
+  dependencies:
+    ms "2.1.2"
+
+deep-is@~0.1.3:
+  version "0.1.4"
+  resolved "https://registry.yarnpkg.com/deep-is/-/deep-is-0.1.4.tgz#a6f2dce612fadd2ef1f519b73551f17e85199831"
+  integrity sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==
+
+del@^5.0.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/del/-/del-5.1.0.tgz#d9487c94e367410e6eff2925ee58c0c84a75b3a7"
+  integrity sha512-wH9xOVHnczo9jN2IW68BabcecVPxacIA3g/7z6vhSU/4stOKQzeCRK0yD0A24WiAAUJmmVpWqrERcTxnLo3AnA==
+  dependencies:
+    globby "^10.0.1"
+    graceful-fs "^4.2.2"
+    is-glob "^4.0.1"
+    is-path-cwd "^2.2.0"
+    is-path-inside "^3.0.1"
+    p-map "^3.0.0"
+    rimraf "^3.0.0"
+    slash "^3.0.0"
+
+dir-glob@^3.0.1:
+  version "3.0.1"
+  resolved "https://registry.yarnpkg.com/dir-glob/-/dir-glob-3.0.1.tgz#56dbf73d992a4a93ba1584f4534063fd2e41717f"
+  integrity sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==
+  dependencies:
+    path-type "^4.0.0"
+
+dom-serializer@^1.0.1:
+  version "1.4.1"
+  resolved "https://registry.yarnpkg.com/dom-serializer/-/dom-serializer-1.4.1.tgz#de5d41b1aea290215dc45a6dae8adcf1d32e2d30"
+  integrity sha512-VHwB3KfrcOOkelEG2ZOfxqLZdfkil8PtJi4P8N2MMXucZq2yLp75ClViUlOVwyoHEDjYU433Aq+5zWP61+RGag==
+  dependencies:
+    domelementtype "^2.0.1"
+    domhandler "^4.2.0"
+    entities "^2.0.0"
+
+domelementtype@^2.0.1, domelementtype@^2.2.0:
+  version "2.3.0"
+  resolved "https://registry.yarnpkg.com/domelementtype/-/domelementtype-2.3.0.tgz#5c45e8e869952626331d7aab326d01daf65d589d"
+  integrity sha512-OLETBj6w0OsagBwdXnPdN0cnMfF9opN69co+7ZrbfPGrdpPVNBUj02spi6B1N7wChLQiPn4CSH/zJvXw56gmHw==
+
+domhandler@^4.2.0, domhandler@^4.3.1:
+  version "4.3.1"
+  resolved "https://registry.yarnpkg.com/domhandler/-/domhandler-4.3.1.tgz#8d792033416f59d68bc03a5aa7b018c1ca89279c"
+  integrity sha512-GrwoxYN+uWlzO8uhUXRl0P+kHE4GtVPfYzVLcUxPL7KNdHKj66vvlhiweIHqYYXWlw+T8iLMp42Lm67ghw4WMQ==
+  dependencies:
+    domelementtype "^2.2.0"
+
+domutils@^2.8.0:
+  version "2.8.0"
+  resolved "https://registry.yarnpkg.com/domutils/-/domutils-2.8.0.tgz#4437def5db6e2d1f5d6ee859bd95ca7d02048135"
+  integrity sha512-w96Cjofp72M5IIhpjgobBimYEfoPjx1Vx0BSX9P30WBdZW2WIKU0T1Bd0kz2eNZ9ikjKgHbEyKx8BB6H1L3h3A==
+  dependencies:
+    dom-serializer "^1.0.1"
+    domelementtype "^2.2.0"
+    domhandler "^4.2.0"
+
+electron-to-chromium@^1.4.535:
+  version "1.4.589"
+  resolved "https://registry.yarnpkg.com/electron-to-chromium/-/electron-to-chromium-1.4.589.tgz#3fc83c284ed8f1f58e0cb3c664c8ebcb4d0b42fb"
+  integrity sha512-zF6y5v/YfoFIgwf2dDfAqVlPPsyQeWNpEWXbAlDUS8Ax4Z2VoiiZpAPC0Jm9hXEkJm2vIZpwB6rc4KnLTQffbQ==
+
+emojis-list@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/emojis-list/-/emojis-list-3.0.0.tgz#5570662046ad29e2e916e71aae260abdff4f6a78"
+  integrity sha512-/kyM18EfinwXZbno9FyUGeFh87KC8HRQBQGildHZbEuRyWFOmv1U10o9BBp8XVZDVNNuQKyIGIu5ZYAAXJ0V2Q==
+
+enhanced-resolve@^5.0.0, enhanced-resolve@^5.15.0:
+  version "5.15.0"
+  resolved "https://registry.yarnpkg.com/enhanced-resolve/-/enhanced-resolve-5.15.0.tgz#1af946c7d93603eb88e9896cee4904dc012e9c35"
+  integrity sha512-LXYT42KJ7lpIKECr2mAXIaMldcNCh/7E0KBKOu4KSfkHmP+mZmSs+8V5gBAqisWBy0OO4W5Oyys0GO1Y8KtdKg==
+  dependencies:
+    graceful-fs "^4.2.4"
+    tapable "^2.2.0"
+
+entities@^2.0.0:
+  version "2.2.0"
+  resolved "https://registry.yarnpkg.com/entities/-/entities-2.2.0.tgz#098dc90ebb83d8dffa089d55256b351d34c4da55"
+  integrity sha512-p92if5Nz619I0w+akJrLZH0MX0Pb5DX39XOwQTtXSdQQOaYH03S1uIQp4mhOZtAXrxq4ViO67YTiLBo2638o9A==
+
+envinfo@^7.7.3:
+  version "7.11.0"
+  resolved "https://registry.yarnpkg.com/envinfo/-/envinfo-7.11.0.tgz#c3793f44284a55ff8c82faf1ffd91bc6478ea01f"
+  integrity sha512-G9/6xF1FPbIw0TtalAMaVPpiq2aDEuKLXM314jPVAO9r2fo2a4BLqMNkmRS7O/xPPZ+COAhGIz3ETvHEV3eUcg==
+
+error-ex@^1.3.1:
+  version "1.3.2"
+  resolved "https://registry.yarnpkg.com/error-ex/-/error-ex-1.3.2.tgz#b4ac40648107fdcdcfae242f428bea8a14d4f1bf"
+  integrity sha512-7dFHNmqeFSEt2ZBsCriorKnn3Z2pj+fd9kmI6QoWw4//DL+icEBfc0U7qJCisqrTsKTjw4fNFy2pW9OqStD84g==
+  dependencies:
+    is-arrayish "^0.2.1"
+
+es-module-lexer@^1.2.1:
+  version "1.4.1"
+  resolved "https://registry.yarnpkg.com/es-module-lexer/-/es-module-lexer-1.4.1.tgz#41ea21b43908fe6a287ffcbe4300f790555331f5"
+  integrity sha512-cXLGjP0c4T3flZJKQSuziYoq7MlT+rnvfZjfp7h+I7K9BNX54kP9nyWvdbwjQ4u1iWbOL4u96fgeZLToQlZC7w==
+
+escalade@^3.1.1:
+  version "3.1.1"
+  resolved "https://registry.yarnpkg.com/escalade/-/escalade-3.1.1.tgz#d8cfdc7000965c5a0174b4a82eaa5c0552742e40"
+  integrity sha512-k0er2gUkLf8O0zKJiAhmkTnJlTvINGv7ygDNPbeIsX/TJjGJZHuh9B2UxbsaEkmlEo9MfhrSzmhIlhRlI2GXnw==
+
+escape-string-regexp@^1.0.5:
+  version "1.0.5"
+  resolved "https://registry.yarnpkg.com/escape-string-regexp/-/escape-string-regexp-1.0.5.tgz#1b61c0562190a8dff6ae3bb2cf0200ca130b86d4"
+  integrity sha512-vbRorB5FUQWvla16U8R/qgaFIya2qGzwDrNmCZuYKrbdSUMG6I1ZCGQRefkRVhuOkIGVne7BQ35DSfo1qvJqFg==
+
+escodegen@^1.9.0:
+  version "1.14.3"
+  resolved "https://registry.yarnpkg.com/escodegen/-/escodegen-1.14.3.tgz#4e7b81fba61581dc97582ed78cab7f0e8d63f503"
+  integrity sha512-qFcX0XJkdg+PB3xjZZG/wKSuT1PnQWx57+TVSjIMmILd2yC/6ByYElPwJnslDsuWuSAp4AwJGumarAAmJch5Kw==
+  dependencies:
+    esprima "^4.0.1"
+    estraverse "^4.2.0"
+    esutils "^2.0.2"
+    optionator "^0.8.1"
+  optionalDependencies:
+    source-map "~0.6.1"
+
+eslint-scope@5.1.1:
+  version "5.1.1"
+  resolved "https://registry.yarnpkg.com/eslint-scope/-/eslint-scope-5.1.1.tgz#e786e59a66cb92b3f6c1fb0d508aab174848f48c"
+  integrity sha512-2NxwbF/hZ0KpepYN0cNbo+FN6XoK7GaHlQhgx/hIZl6Va0bF45RQOOwhLIy8lQDbuCiadSLCBnH2CFYquit5bw==
+  dependencies:
+    esrecurse "^4.3.0"
+    estraverse "^4.1.1"
+
+esprima@^4.0.1:
+  version "4.0.1"
+  resolved "https://registry.yarnpkg.com/esprima/-/esprima-4.0.1.tgz#13b04cdb3e6c5d19df91ab6987a8695619b0aa71"
+  integrity sha512-eGuFFw7Upda+g4p+QHvnW0RyTX/SVeJBDM/gCtMARO0cLuT2HcEKnTPvhjV6aGeqrCB/sbNop0Kszm0jsaWU4A==
+
+esrecurse@^4.3.0:
+  version "4.3.0"
+  resolved "https://registry.yarnpkg.com/esrecurse/-/esrecurse-4.3.0.tgz#7ad7964d679abb28bee72cec63758b1c5d2c9921"
+  integrity sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==
+  dependencies:
+    estraverse "^5.2.0"
+
+estraverse@^4.1.1, estraverse@^4.2.0:
+  version "4.3.0"
+  resolved "https://registry.yarnpkg.com/estraverse/-/estraverse-4.3.0.tgz#398ad3f3c5a24948be7725e83d11a7de28cdbd1d"
+  integrity sha512-39nnKffWz8xN1BU/2c79n9nB9HDzo0niYUqx6xyqUnyoAnQyyWpOTdZEeiCch8BBu515t4wp9ZmgVfVhn9EBpw==
+
+estraverse@^5.2.0:
+  version "5.3.0"
+  resolved "https://registry.yarnpkg.com/estraverse/-/estraverse-5.3.0.tgz#2eea5290702f26ab8fe5370370ff86c965d21123"
+  integrity sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==
+
+esutils@^2.0.2:
+  version "2.0.3"
+  resolved "https://registry.yarnpkg.com/esutils/-/esutils-2.0.3.tgz#74d2eb4de0b8da1293711910d50775b9b710ef64"
+  integrity sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==
+
+events@^3.2.0:
+  version "3.3.0"
+  resolved "https://registry.yarnpkg.com/events/-/events-3.3.0.tgz#31a95ad0a924e2d2c419a813aeb2c4e878ea7400"
+  integrity sha512-mQw+2fkQbALzQ7V0MY0IqdnXNOeTtP4r0lN9z7AAawCXgqea7bDii20AYrIBrFd/Hx0M2Ocz6S111CaFkUcb0Q==
+
+fast-deep-equal@^3.1.1:
+  version "3.1.3"
+  resolved "https://registry.yarnpkg.com/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz#3a7d56b559d6cbc3eb512325244e619a65c6c525"
+  integrity sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==
+
+fast-glob@^3.0.3, fast-glob@^3.2.11:
+  version "3.3.2"
+  resolved "https://registry.yarnpkg.com/fast-glob/-/fast-glob-3.3.2.tgz#a904501e57cfdd2ffcded45e99a54fef55e46129"
+  integrity sha512-oX2ruAFQwf/Orj8m737Y5adxDQO0LAB7/S5MnxCdTNDd4p6BsyIVsv9JQsATbTSq8KHRpLwIHbVlUNatxd+1Ow==
+  dependencies:
+    "@nodelib/fs.stat" "^2.0.2"
+    "@nodelib/fs.walk" "^1.2.3"
+    glob-parent "^5.1.2"
+    merge2 "^1.3.0"
+    micromatch "^4.0.4"
+
+fast-json-stable-stringify@^2.0.0:
+  version "2.1.0"
+  resolved "https://registry.yarnpkg.com/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz#874bf69c6f404c2b5d99c481341399fd55892633"
+  integrity sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==
+
+fast-levenshtein@~2.0.6:
+  version "2.0.6"
+  resolved "https://registry.yarnpkg.com/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz#3d8a5c66883a16a30ca8643e851f19baa7797917"
+  integrity sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==
+
+fastest-levenshtein@^1.0.12:
+  version "1.0.16"
+  resolved "https://registry.yarnpkg.com/fastest-levenshtein/-/fastest-levenshtein-1.0.16.tgz#210e61b6ff181de91ea9b3d1b84fdedd47e034e5"
+  integrity sha512-eRnCtTTtGZFpQCwhJiUOuxPQWRXVKYDn0b2PeHfXL6/Zi53SLAzAHfVhVWK2AryC/WH05kGfxhFIPvTF0SXQzg==
+
+fastq@^1.6.0:
+  version "1.15.0"
+  resolved "https://registry.yarnpkg.com/fastq/-/fastq-1.15.0.tgz#d04d07c6a2a68fe4599fea8d2e103a937fae6b3a"
+  integrity sha512-wBrocU2LCXXa+lWBt8RoIRD89Fi8OdABODa/kEnyeyjS5aZO5/GNvI5sEINADqP/h8M29UHTHUb53sUu5Ihqdw==
+  dependencies:
+    reusify "^1.0.4"
+
+fill-range@^7.0.1:
+  version "7.0.1"
+  resolved "https://registry.yarnpkg.com/fill-range/-/fill-range-7.0.1.tgz#1919a6a7c75fe38b2c7c77e5198535da9acdda40"
+  integrity sha512-qOo9F+dMUmC2Lcb4BbVvnKJxTPjCm+RRpe4gDuGrzkL7mEVl/djYSu2OdQ2Pa302N4oqkSg9ir6jaLWJ2USVpQ==
+  dependencies:
+    to-regex-range "^5.0.1"
+
+find-cache-dir@^3.3.1:
+  version "3.3.2"
+  resolved "https://registry.yarnpkg.com/find-cache-dir/-/find-cache-dir-3.3.2.tgz#b30c5b6eff0730731aea9bbd9dbecbd80256d64b"
+  integrity sha512-wXZV5emFEjrridIgED11OoUKLxiYjAcqot/NJdAkOhlJ+vGzwhOAfcG5OX1jP+S0PcjEn8bdMJv+g2jwQ3Onig==
+  dependencies:
+    commondir "^1.0.1"
+    make-dir "^3.0.2"
+    pkg-dir "^4.1.0"
+
+find-up@^4.0.0:
+  version "4.1.0"
+  resolved "https://registry.yarnpkg.com/find-up/-/find-up-4.1.0.tgz#97afe7d6cdc0bc5928584b7c8d7b16e8a9aa5d19"
+  integrity sha512-PpOwAdQ/YlXQ2vj8a3h8IipDuYRi3wceVQQGYWxNINccq40Anw7BlsEXCMbt1Zt+OLA6Fq9suIpIWD0OsnISlw==
+  dependencies:
+    locate-path "^5.0.0"
+    path-exists "^4.0.0"
+
+flat@^5.0.2:
+  version "5.0.2"
+  resolved "https://registry.yarnpkg.com/flat/-/flat-5.0.2.tgz#8ca6fe332069ffa9d324c327198c598259ceb241"
+  integrity sha512-b6suED+5/3rTpUBdG1gupIl8MPFCAMA0QXwmljLhvCUKcUvdE4gWky9zpuGCcXHOsz4J9wPGNWq6OKpmIzz3hQ==
+
+fs-extra@^8.1.0:
+  version "8.1.0"
+  resolved "https://registry.yarnpkg.com/fs-extra/-/fs-extra-8.1.0.tgz#49d43c45a88cd9677668cb7be1b46efdb8d2e1c0"
+  integrity sha512-yhlQgA6mnOJUKOsRUFsgJdQCvkKhcz8tlZG5HBQfReYZy46OwLcY+Zia0mtdHsOo9y/hP+CxMN0TU9QxoOtG4g==
+  dependencies:
+    graceful-fs "^4.2.0"
+    jsonfile "^4.0.0"
+    universalify "^0.1.0"
+
+fs-minipass@^2.0.0:
+  version "2.1.0"
+  resolved "https://registry.yarnpkg.com/fs-minipass/-/fs-minipass-2.1.0.tgz#7f5036fdbf12c63c169190cbe4199c852271f9fb"
+  integrity sha512-V/JgOLFCS+R6Vcq0slCuaeWEdNC3ouDlJMNIsacH2VtALiu9mV4LPrHc5cDl8k5aw6J8jwgWWpiTo5RYhmIzvg==
+  dependencies:
+    minipass "^3.0.0"
+
+fs.realpath@^1.0.0:
+  version "1.0.0"
+  resolved "https://registry.yarnpkg.com/fs.realpath/-/fs.realpath-1.0.0.tgz#1504ad2523158caa40db4a2787cb01411994ea4f"
+  integrity sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw==
+
+function-bind@^1.1.2:
+  version "1.1.2"
+  resolved "https://registry.yarnpkg.com/function-bind/-/function-bind-1.1.2.tgz#2c02d864d97f3ea6c8830c464cbd11ab6eab7a1c"
+  integrity sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==
+
+glob-parent@^5.1.2:
+  version "5.1.2"
+  resolved "https://registry.yarnpkg.com/glob-parent/-/glob-parent-5.1.2.tgz#869832c58034fe68a4093c17dc15e8340d8401c4"
+  integrity sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==
+  dependencies:
+    is-glob "^4.0.1"
+
+glob-to-regexp@^0.4.1:
+  version "0.4.1"
+  resolved "https://registry.yarnpkg.com/glob-to-regexp/-/glob-to-regexp-0.4.1.tgz#c75297087c851b9a578bd217dd59a92f59fe546e"
+  integrity sha512-lkX1HJXwyMcprw/5YUZc2s7DrpAiHB21/V+E1rHUrVNokkvB6bqMzT0VfV6/86ZNabt1k14YOIaT7nDvOX3Iiw==
+
+glob@^7.0.0, glob@^7.1.3, glob@^7.1.4:
+  version "7.2.3"
+  resolved "https://registry.yarnpkg.com/glob/-/glob-7.2.3.tgz#b8df0fb802bbfa8e89bd1d938b4e16578ed44f2b"
+  integrity sha512-nFR0zLpU2YCaRxwoCJvL6UvCH2JFyFVIvwTLsIf21AuHlMskA1hhTdk+LlYJtOlYt9v6dvszD2BGRqBL+iQK9Q==
+  dependencies:
+    fs.realpath "^1.0.0"
+    inflight "^1.0.4"
+    inherits "2"
+    minimatch "^3.1.1"
+    once "^1.3.0"
+    path-is-absolute "^1.0.0"
+
+globals@^11.1.0:
+  version "11.12.0"
+  resolved "https://registry.yarnpkg.com/globals/-/globals-11.12.0.tgz#ab8795338868a0babd8525758018c2a7eb95c42e"
+  integrity sha512-WOBp/EEGUiIsJSp7wcv/y6MO+lV9UoncWqxuFfm8eBwzWNgyfBd6Gz+IeKQ9jCmyhoH99g15M3T+QaVHFjizVA==
+
+globby@^10.0.1:
+  version "10.0.2"
+  resolved "https://registry.yarnpkg.com/globby/-/globby-10.0.2.tgz#277593e745acaa4646c3ab411289ec47a0392543"
+  integrity sha512-7dUi7RvCoT/xast/o/dLN53oqND4yk0nsHkhRgn9w65C4PofCLOoJ39iSOg+qVDdWQPIEj+eszMHQ+aLVwwQSg==
+  dependencies:
+    "@types/glob" "^7.1.1"
+    array-union "^2.1.0"
+    dir-glob "^3.0.1"
+    fast-glob "^3.0.3"
+    glob "^7.1.3"
+    ignore "^5.1.1"
+    merge2 "^1.2.3"
+    slash "^3.0.0"
+
+graceful-fs@^4.1.2, graceful-fs@^4.1.6, graceful-fs@^4.2.0, graceful-fs@^4.2.2, graceful-fs@^4.2.4, graceful-fs@^4.2.9:
+  version "4.2.11"
+  resolved "https://registry.yarnpkg.com/graceful-fs/-/graceful-fs-4.2.11.tgz#4183e4e8bf08bb6e05bbb2f7d2e0c8f712ca40e3"
+  integrity sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==
+
+has-flag@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/has-flag/-/has-flag-3.0.0.tgz#b5d454dc2199ae225699f3467e5a07f3b955bafd"
+  integrity sha512-sKJf1+ceQBr4SMkvQnBDNDtf4TXpVhVGateu0t918bl30FnbE2m4vNLX+VWe/dpjlb+HugGYzW7uQXH98HPEYw==
+
+has-flag@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/has-flag/-/has-flag-4.0.0.tgz#944771fd9c81c81265c4d6941860da06bb59479b"
+  integrity sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==
+
+hasown@^2.0.0:
+  version "2.0.0"
+  resolved "https://registry.yarnpkg.com/hasown/-/hasown-2.0.0.tgz#f4c513d454a57b7c7e1650778de226b11700546c"
+  integrity sha512-vUptKVTpIJhcczKBbgnS+RtcuYMB8+oNzPK2/Hp3hanz8JmpATdmmgLgSaadVREkDm+e2giHwY3ZRkyjSIDDFA==
+  dependencies:
+    function-bind "^1.1.2"
+
+icss-utils@^5.0.0, icss-utils@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/icss-utils/-/icss-utils-5.1.0.tgz#c6be6858abd013d768e98366ae47e25d5887b1ae"
+  integrity sha512-soFhflCVWLfRNOPU3iv5Z9VUdT44xFRbzjLsEzSr5AQmgqPMTHdU3PMT1Cf1ssx8fLNJDA1juftYl+PUcv3MqA==
+
+ignore@^5.1.1:
+  version "5.3.0"
+  resolved "https://registry.yarnpkg.com/ignore/-/ignore-5.3.0.tgz#67418ae40d34d6999c95ff56016759c718c82f78"
+  integrity sha512-g7dmpshy+gD7mh88OC9NwSGTKoc3kyLAZQRU1mt53Aw/vnvfXnbC+F/7F7QoYVKbV+KNvJx8wArewKy1vXMtlg==
+
+import-fresh@^3.2.1:
+  version "3.3.0"
+  resolved "https://registry.yarnpkg.com/import-fresh/-/import-fresh-3.3.0.tgz#37162c25fcb9ebaa2e6e53d5b4d88ce17d9e0c2b"
+  integrity sha512-veYYhQa+D1QBKznvhUHxb8faxlrwUnxseDAbAp457E0wLNio2bOSKnjYDhMj+YiAq61xrMGhQk9iXVk5FzgQMw==
+  dependencies:
+    parent-module "^1.0.0"
+    resolve-from "^4.0.0"
+
+import-local@^3.0.2:
+  version "3.1.0"
+  resolved "https://registry.yarnpkg.com/import-local/-/import-local-3.1.0.tgz#b4479df8a5fd44f6cdce24070675676063c95cb4"
+  integrity sha512-ASB07uLtnDs1o6EHjKpX34BKYDSqnFerfTOJL2HvMqF70LnxpjkzDB8J44oT9pu4AMPkQwf8jl6szgvNd2tRIg==
+  dependencies:
+    pkg-dir "^4.2.0"
+    resolve-cwd "^3.0.0"
+
+imurmurhash@^0.1.4:
+  version "0.1.4"
+  resolved "https://registry.yarnpkg.com/imurmurhash/-/imurmurhash-0.1.4.tgz#9218b9b2b928a238b13dc4fb6b6d576f231453ea"
+  integrity sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==
+
+indent-string@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/indent-string/-/indent-string-4.0.0.tgz#624f8f4497d619b2d9768531d58f4122854d7251"
+  integrity sha512-EdDDZu4A2OyIK7Lr/2zG+w5jmbuk1DVBnEwREQvBzspBJkCEbRa8GxU1lghYcaGJCnRWibjDXlq779X1/y5xwg==
+
+infer-owner@^1.0.4:
+  version "1.0.4"
+  resolved "https://registry.yarnpkg.com/infer-owner/-/infer-owner-1.0.4.tgz#c4cefcaa8e51051c2a40ba2ce8a3d27295af9467"
+  integrity sha512-IClj+Xz94+d7irH5qRyfJonOdfTzuDaifE6ZPWfx0N0+/ATZCbuTPq2prFl526urkQd90WyUKIh1DfBQ2hMz9A==
+
+inflight@^1.0.4:
+  version "1.0.6"
+  resolved "https://registry.yarnpkg.com/inflight/-/inflight-1.0.6.tgz#49bd6331d7d02d0c09bc910a1075ba8165b56df9"
+  integrity sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==
+  dependencies:
+    once "^1.3.0"
+    wrappy "1"
+
+inherits@2, inherits@^2.0.3, inherits@^2.0.4:
+  version "2.0.4"
+  resolved "https://registry.yarnpkg.com/inherits/-/inherits-2.0.4.tgz#0fa2c64f932917c3433a0ded55363aae37416b7c"
+  integrity sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==
+
+interpret@^1.0.0:
+  version "1.4.0"
+  resolved "https://registry.yarnpkg.com/interpret/-/interpret-1.4.0.tgz#665ab8bc4da27a774a40584e812e3e0fa45b1a1e"
+  integrity sha512-agE4QfB2Lkp9uICn7BAqoscw4SZP9kTE2hxiFI3jBPmXJfdqiahTbUuKGsMoN2GtqL9AxhYioAcVvgsb1HvRbA==
+
+interpret@^2.2.0:
+  version "2.2.0"
+  resolved "https://registry.yarnpkg.com/interpret/-/interpret-2.2.0.tgz#1a78a0b5965c40a5416d007ad6f50ad27c417df9"
+  integrity sha512-Ju0Bz/cEia55xDwUWEa8+olFpCiQoypjnQySseKtmjNrnps3P+xfpUmGr90T7yjlVJmOtybRvPXhKMbHr+fWnw==
+
+is-arrayish@^0.2.1:
+  version "0.2.1"
+  resolved "https://registry.yarnpkg.com/is-arrayish/-/is-arrayish-0.2.1.tgz#77c99840527aa8ecb1a8ba697b80645a7a926a9d"
+  integrity sha512-zz06S8t0ozoDXMG+ube26zeCTNXcKIPJZJi8hBrF4idCLms4CG9QtK7qBl1boi5ODzFpjswb5JPmHCbMpjaYzg==
+
+is-core-module@^2.13.0:
+  version "2.13.1"
+  resolved "https://registry.yarnpkg.com/is-core-module/-/is-core-module-2.13.1.tgz#ad0d7532c6fea9da1ebdc82742d74525c6273384"
+  integrity sha512-hHrIjvZsftOsvKSn2TRYl63zvxsgE0K+0mYMoH6gD4omR5IWB2KynivBQczo3+wF1cCkjzvptnI9Q0sPU66ilw==
+  dependencies:
+    hasown "^2.0.0"
+
+is-extglob@^2.1.1:
+  version "2.1.1"
+  resolved "https://registry.yarnpkg.com/is-extglob/-/is-extglob-2.1.1.tgz#a88c02535791f02ed37c76a1b9ea9773c833f8c2"
+  integrity sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==
+
+is-glob@^4.0.1:
+  version "4.0.3"
+  resolved "https://registry.yarnpkg.com/is-glob/-/is-glob-4.0.3.tgz#64f61e42cbbb2eec2071a9dac0b28ba1e65d5084"
+  integrity sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==
+  dependencies:
+    is-extglob "^2.1.1"
+
+is-interactive@^1.0.0:
+  version "1.0.0"
+  resolved "https://registry.yarnpkg.com/is-interactive/-/is-interactive-1.0.0.tgz#cea6e6ae5c870a7b0a0004070b7b587e0252912e"
+  integrity sha512-2HvIEKRoqS62guEC+qBjpvRubdX910WCMuJTZ+I9yvqKU2/12eSL549HMwtabb4oupdj2sMP50k+XJfB/8JE6w==
+
+is-number@^7.0.0:
+  version "7.0.0"
+  resolved "https://registry.yarnpkg.com/is-number/-/is-number-7.0.0.tgz#7535345b896734d5f80c4d06c50955527a14f12b"
+  integrity sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==
+
+is-path-cwd@^2.2.0:
+  version "2.2.0"
+  resolved "https://registry.yarnpkg.com/is-path-cwd/-/is-path-cwd-2.2.0.tgz#67d43b82664a7b5191fd9119127eb300048a9fdb"
+  integrity sha512-w942bTcih8fdJPJmQHFzkS76NEP8Kzzvmw92cXsazb8intwLqPibPPdXf4ANdKV3rYMuuQYGIWtvz9JilB3NFQ==
+
+is-path-inside@^3.0.1:
+  version "3.0.3"
+  resolved "https://registry.yarnpkg.com/is-path-inside/-/is-path-inside-3.0.3.tgz#d231362e53a07ff2b0e0ea7fed049161ffd16283"
+  integrity sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==
+
+is-plain-object@^2.0.4:
+  version "2.0.4"
+  resolved "https://registry.yarnpkg.com/is-plain-object/-/is-plain-object-2.0.4.tgz#2c163b3fafb1b606d9d17928f05c2a1c38e07677"
+  integrity sha512-h5PpgXkWitc38BBMYawTYMWJHFZJVnBquFE57xFpjB8pJFiF6gZ+bU+WyI/yqXiFR5mdLsgYNaPe8uao6Uv9Og==
+  dependencies:
+    isobject "^3.0.1"
+
+isexe@^2.0.0:
+  version "2.0.0"
+  resolved "https://registry.yarnpkg.com/isexe/-/isexe-2.0.0.tgz#e8fbf374dc556ff8947a10dcb0572d633f2cfa10"
+  integrity sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==
+
+isobject@^3.0.1:
+  version "3.0.1"
+  resolved "https://registry.yarnpkg.com/isobject/-/isobject-3.0.1.tgz#4e431e92b11a9731636aa1f9c8d1ccbcfdab78df"
+  integrity sha512-WhB9zCku7EGTj/HQQRz5aUQEUeoQZH2bWcltRErOpymJ4boYE6wL9Tbr23krRPSZ+C5zqNSrSw+Cc7sZZ4b7vg==
+
+javascript-stringify@^1.6.0:
+  version "1.6.0"
+  resolved "https://registry.yarnpkg.com/javascript-stringify/-/javascript-stringify-1.6.0.tgz#142d111f3a6e3dae8f4a9afd77d45855b5a9cce3"
+  integrity sha512-fnjC0up+0SjEJtgmmG+teeel68kutkvzfctO/KxE3qJlbunkJYAshgH3boU++gSBHP8z5/r0ts0qRIrHf0RTQQ==
+
+jest-worker@^26.5.0:
+  version "26.6.2"
+  resolved "https://registry.yarnpkg.com/jest-worker/-/jest-worker-26.6.2.tgz#7f72cbc4d643c365e27b9fd775f9d0eaa9c7a8ed"
+  integrity sha512-KWYVV1c4i+jbMpaBC+U++4Va0cp8OisU185o73T1vo99hqi7w8tSJfUXYswwqqrjzwxa6KpRK54WhPvwf5w6PQ==
+  dependencies:
+    "@types/node" "*"
+    merge-stream "^2.0.0"
+    supports-color "^7.0.0"
+
+jest-worker@^27.4.5:
+  version "27.5.1"
+  resolved "https://registry.yarnpkg.com/jest-worker/-/jest-worker-27.5.1.tgz#8d146f0900e8973b106b6f73cc1e9a8cb86f8db0"
+  integrity sha512-7vuh85V5cdDofPyxn58nrPjBktZo0u9x1g8WtjQol+jZDaE+fhN+cIvTj11GndBnMnyfrUOG1sZQxCdjKh+DKg==
+  dependencies:
+    "@types/node" "*"
+    merge-stream "^2.0.0"
+    supports-color "^8.0.0"
+
+js-tokens@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/js-tokens/-/js-tokens-4.0.0.tgz#19203fb59991df98e3a287050d4647cdeaf32499"
+  integrity sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==
+
+jsesc@^2.5.1:
+  version "2.5.2"
+  resolved "https://registry.yarnpkg.com/jsesc/-/jsesc-2.5.2.tgz#80564d2e483dacf6e8ef209650a67df3f0c283a4"
+  integrity sha512-OYu7XEzjkCQ3C5Ps3QIZsQfNpqoJyZZA99wd9aWd05NCtC5pWOkShK2mkL6HXQR6/Cy2lbNdPlZBpuQHXE63gA==
+
+json-parse-even-better-errors@^2.3.0, json-parse-even-better-errors@^2.3.1:
+  version "2.3.1"
+  resolved "https://registry.yarnpkg.com/json-parse-even-better-errors/-/json-parse-even-better-errors-2.3.1.tgz#7c47805a94319928e05777405dc12e1f7a4ee02d"
+  integrity sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==
+
+json-schema-traverse@^0.4.1:
+  version "0.4.1"
+  resolved "https://registry.yarnpkg.com/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz#69f6a87d9513ab8bb8fe63bdb0979c448e684660"
+  integrity sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==
+
+json5@^2.1.2:
+  version "2.2.3"
+  resolved "https://registry.yarnpkg.com/json5/-/json5-2.2.3.tgz#78cd6f1a19bdc12b73db5ad0c61efd66c1e29283"
+  integrity sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==
+
+jsonfile@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/jsonfile/-/jsonfile-4.0.0.tgz#8771aae0799b64076b76640fca058f9c10e33ecb"
+  integrity sha512-m6F1R3z8jjlf2imQHS2Qez5sjKWQzbuuhuJ/FKYFRZvPE3PuHcSMVZzfsLhGVOkfd20obL5SWEBew5ShlquNxg==
+  optionalDependencies:
+    graceful-fs "^4.1.6"
+
+kind-of@^6.0.2:
+  version "6.0.3"
+  resolved "https://registry.yarnpkg.com/kind-of/-/kind-of-6.0.3.tgz#07c05034a6c349fa06e24fa35aa76db4580ce4dd"
+  integrity sha512-dcS1ul+9tmeD95T+x28/ehLgd9mENa3LsvDTtzm3vyBEO7RPptvAD+t44WVXaUjTBRcrpFeFlC8WCruUR456hw==
+
+klona@^2.0.4:
+  version "2.0.6"
+  resolved "https://registry.yarnpkg.com/klona/-/klona-2.0.6.tgz#85bffbf819c03b2f53270412420a4555ef882e22"
+  integrity sha512-dhG34DXATL5hSxJbIexCft8FChFXtmskoZYnoPWjXQuebWYCNkVeV3KkGegCK9CP1oswI/vQibS2GY7Em/sJJA==
+
+levn@~0.3.0:
+  version "0.3.0"
+  resolved "https://registry.yarnpkg.com/levn/-/levn-0.3.0.tgz#3b09924edf9f083c0490fdd4c0bc4421e04764ee"
+  integrity sha512-0OO4y2iOHix2W6ujICbKIaEQXvFQHue65vUG3pb5EUomzPI90z9hsA1VsO/dbIIpC53J8gxM9Q4Oho0jrCM/yA==
+  dependencies:
+    prelude-ls "~1.1.2"
+    type-check "~0.3.2"
+
+lilconfig@^2.0.3:
+  version "2.1.0"
+  resolved "https://registry.yarnpkg.com/lilconfig/-/lilconfig-2.1.0.tgz#78e23ac89ebb7e1bfbf25b18043de756548e7f52"
+  integrity sha512-utWOt/GHzuUxnLKxB6dk81RoOeoNeHgbrXiuGk4yyF5qlRz+iIVWu56E2fqGHFrXz0QNUhLB/8nKqvRH66JKGQ==
+
+lines-and-columns@^1.1.6:
+  version "1.2.4"
+  resolved "https://registry.yarnpkg.com/lines-and-columns/-/lines-and-columns-1.2.4.tgz#eca284f75d2965079309dc0ad9255abb2ebc1632"
+  integrity sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==
+
+loader-runner@^4.2.0:
+  version "4.3.0"
+  resolved "https://registry.yarnpkg.com/loader-runner/-/loader-runner-4.3.0.tgz#c1b4a163b99f614830353b16755e7149ac2314e1"
+  integrity sha512-3R/1M+yS3j5ou80Me59j7F9IMs4PXs3VqRrm0TU3AbKPxlmpoY1TNscJV/oGJXo8qCatFGTfDbY6W6ipGOYXfg==
+
+loader-utils@^2.0.0:
+  version "2.0.4"
+  resolved "https://registry.yarnpkg.com/loader-utils/-/loader-utils-2.0.4.tgz#8b5cb38b5c34a9a018ee1fc0e6a066d1dfcc528c"
+  integrity sha512-xXqpXoINfFhgua9xiqD8fPFHgkoq1mmmpE92WlDbm9rNRd/EbRb+Gqf908T2DMfuHjjJlksiK2RbHVOdD/MqSw==
+  dependencies:
+    big.js "^5.2.2"
+    emojis-list "^3.0.0"
+    json5 "^2.1.2"
+
+locate-path@^5.0.0:
+  version "5.0.0"
+  resolved "https://registry.yarnpkg.com/locate-path/-/locate-path-5.0.0.tgz#1afba396afd676a6d42504d0a67a3a7eb9f62aa0"
+  integrity sha512-t7hw9pI+WvuwNJXwk5zVHpyhIqzg2qTlklJOf0mVxGSbe3Fp2VieZcduNYjaLDoy6p9uGpQEGWG87WpMKlNq8g==
+  dependencies:
+    p-locate "^4.1.0"
+
+lodash-es@^4.17.11, lodash-es@^4.17.15:
+  version "4.17.21"
+  resolved "https://registry.yarnpkg.com/lodash-es/-/lodash-es-4.17.21.tgz#43e626c46e6591b7750beb2b50117390c609e3ee"
+  integrity sha512-mKnC+QJ9pWVzv+C4/U3rRsHapFfHvQFoFB92e52xeyGMcX6/OlIl78je1u8vePzYZSkkogMPJ2yjxxsb89cxyw==
+
+lodash.memoize@^4.1.2:
+  version "4.1.2"
+  resolved "https://registry.yarnpkg.com/lodash.memoize/-/lodash.memoize-4.1.2.tgz#bcc6c49a42a2840ed997f323eada5ecd182e0bfe"
+  integrity sha512-t7j+NzmgnQzTAYXcsHYLgimltOV1MXHtlOWf6GjL9Kj8GK5FInw5JotxvbOs+IvV1/Dzo04/fCGfLVs7aXb4Ag==
+
+lodash.uniq@^4.5.0:
+  version "4.5.0"
+  resolved "https://registry.yarnpkg.com/lodash.uniq/-/lodash.uniq-4.5.0.tgz#d0225373aeb652adc1bc82e4945339a842754773"
+  integrity sha512-xfBaXQd9ryd9dlSDvnvI0lvxfLJlYAZzXomUYzLKtUeOQvOP5piqAWuGtrhWeqaXK9hhoM/iyJc5AV+XfsX3HQ==
+
+lru-cache@^6.0.0:
+  version "6.0.0"
+  resolved "https://registry.yarnpkg.com/lru-cache/-/lru-cache-6.0.0.tgz#6d6fe6570ebd96aaf90fcad1dafa3b2566db3a94"
+  integrity sha512-Jo6dJ04CmSjuznwJSS3pUeWmd/H0ffTlkXXgwZi+eq1UCmqQwCh+eLsYOYCwY991i2Fah4h1BEMCx4qThGbsiA==
+  dependencies:
+    yallist "^4.0.0"
+
+make-dir@^3.0.2:
+  version "3.1.0"
+  resolved "https://registry.yarnpkg.com/make-dir/-/make-dir-3.1.0.tgz#415e967046b3a7f1d185277d84aa58203726a13f"
+  integrity sha512-g3FeP20LNwhALb/6Cz6Dd4F2ngze0jz7tbzrD2wAV+o9FeNHe4rL+yK2md0J/fiSf1sa1ADhXqi5+oVwOM/eGw==
+  dependencies:
+    semver "^6.0.0"
+
+mdn-data@2.0.14:
+  version "2.0.14"
+  resolved "https://registry.yarnpkg.com/mdn-data/-/mdn-data-2.0.14.tgz#7113fc4281917d63ce29b43446f701e68c25ba50"
+  integrity sha512-dn6wd0uw5GsdswPFfsgMp5NSB0/aDe6fK94YJV/AJDYXL6HVLWBsxeq7js7Ad+mU2K9LAlwpk6kN2D5mwCPVow==
+
+merge-stream@^2.0.0:
+  version "2.0.0"
+  resolved "https://registry.yarnpkg.com/merge-stream/-/merge-stream-2.0.0.tgz#52823629a14dd00c9770fb6ad47dc6310f2c1f60"
+  integrity sha512-abv/qOcuPfk3URPfDzmZU1LKmuw8kT+0nIHvKrKgFrwifol/doWcdA4ZqsWQ8ENrFKkd67Mfpo/LovbIUsbt3w==
+
+merge2@^1.2.3, merge2@^1.3.0:
+  version "1.4.1"
+  resolved "https://registry.yarnpkg.com/merge2/-/merge2-1.4.1.tgz#4368892f885e907455a6fd7dc55c0c9d404990ae"
+  integrity sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==
+
+micromatch@^4.0.0, micromatch@^4.0.4:
+  version "4.0.5"
+  resolved "https://registry.yarnpkg.com/micromatch/-/micromatch-4.0.5.tgz#bc8999a7cbbf77cdc89f132f6e467051b49090c6"
+  integrity sha512-DMy+ERcEW2q8Z2Po+WNXuw3c5YaUSFjAO5GsJqfEl7UjvtIuFKO6ZrKvcItdy98dwFI2N1tg3zNIdKaQT+aNdA==
+  dependencies:
+    braces "^3.0.2"
+    picomatch "^2.3.1"
+
+mime-db@1.52.0:
+  version "1.52.0"
+  resolved "https://registry.yarnpkg.com/mime-db/-/mime-db-1.52.0.tgz#bbabcdc02859f4987301c856e3387ce5ec43bf70"
+  integrity sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==
+
+mime-types@^2.1.27:
+  version "2.1.35"
+  resolved "https://registry.yarnpkg.com/mime-types/-/mime-types-2.1.35.tgz#381a871b62a734450660ae3deee44813f70d959a"
+  integrity sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==
+  dependencies:
+    mime-db "1.52.0"
+
+mimic-fn@^2.1.0:
+  version "2.1.0"
+  resolved "https://registry.yarnpkg.com/mimic-fn/-/mimic-fn-2.1.0.tgz#7ed2c2ccccaf84d3ffcb7a69b57711fc2083401b"
+  integrity sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==
+
+minimatch@^3.1.1:
+  version "3.1.2"
+  resolved "https://registry.yarnpkg.com/minimatch/-/minimatch-3.1.2.tgz#19cd194bfd3e428f049a70817c038d89ab4be35b"
+  integrity sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==
+  dependencies:
+    brace-expansion "^1.1.7"
+
+minipass-collect@^1.0.2:
+  version "1.0.2"
+  resolved "https://registry.yarnpkg.com/minipass-collect/-/minipass-collect-1.0.2.tgz#22b813bf745dc6edba2576b940022ad6edc8c617"
+  integrity sha512-6T6lH0H8OG9kITm/Jm6tdooIbogG9e0tLgpY6mphXSm/A9u8Nq1ryBG+Qspiub9LjWlBPsPS3tWQ/Botq4FdxA==
+  dependencies:
+    minipass "^3.0.0"
+
+minipass-flush@^1.0.5:
+  version "1.0.5"
+  resolved "https://registry.yarnpkg.com/minipass-flush/-/minipass-flush-1.0.5.tgz#82e7135d7e89a50ffe64610a787953c4c4cbb373"
+  integrity sha512-JmQSYYpPUqX5Jyn1mXaRwOda1uQ8HP5KAT/oDSLCzt1BYRhQU0/hDtsB1ufZfEEzMZ9aAVmsBw8+FWsIXlClWw==
+  dependencies:
+    minipass "^3.0.0"
+
+minipass-pipeline@^1.2.2:
+  version "1.2.4"
+  resolved "https://registry.yarnpkg.com/minipass-pipeline/-/minipass-pipeline-1.2.4.tgz#68472f79711c084657c067c5c6ad93cddea8214c"
+  integrity sha512-xuIq7cIOt09RPRJ19gdi4b+RiNvDFYe5JH+ggNvBqGqpQXcru3PcRmOZuHBKWK1Txf9+cQ+HMVN4d6z46LZP7A==
+  dependencies:
+    minipass "^3.0.0"
+
+minipass@^3.0.0, minipass@^3.1.1:
+  version "3.3.6"
+  resolved "https://registry.yarnpkg.com/minipass/-/minipass-3.3.6.tgz#7bba384db3a1520d18c9c0e5251c3444e95dd94a"
+  integrity sha512-DxiNidxSEK+tHG6zOIklvNOwm3hvCrbUrdtzY74U6HKTJxvIDfOUL5W5P2Ghd3DTkhhKPYGqeNUIh5qcM4YBfw==
+  dependencies:
+    yallist "^4.0.0"
+
+minipass@^5.0.0:
+  version "5.0.0"
+  resolved "https://registry.yarnpkg.com/minipass/-/minipass-5.0.0.tgz#3e9788ffb90b694a5d0ec94479a45b5d8738133d"
+  integrity sha512-3FnjYuehv9k6ovOEbyOswadCDPX1piCfhV8ncmYtHOjuPwylVWsghTLo7rabjC3Rx5xD4HDx8Wm1xnMF7S5qFQ==
+
+minizlib@^2.1.1:
+  version "2.1.2"
+  resolved "https://registry.yarnpkg.com/minizlib/-/minizlib-2.1.2.tgz#e90d3466ba209b932451508a11ce3d3632145931"
+  integrity sha512-bAxsR8BVfj60DWXHE3u30oHzfl4G7khkSuPW+qvpd7jFRHm7dLxOjUk1EHACJ/hxLY8phGJ0YhYHZo7jil7Qdg==
+  dependencies:
+    minipass "^3.0.0"
+    yallist "^4.0.0"
+
+mkdirp@^1.0.3, mkdirp@^1.0.4:
+  version "1.0.4"
+  resolved "https://registry.yarnpkg.com/mkdirp/-/mkdirp-1.0.4.tgz#3eb5ed62622756d79a5f0e2a221dfebad75c2f7e"
+  integrity sha512-vVqVZQyf3WLx2Shd0qJ9xuvqgAyKPLAiqITEtqW0oIUjzo3PePDd6fW9iFz30ef7Ysp/oiWqbhszeGWW2T6Gzw==
+
+ms@2.1.2:
+  version "2.1.2"
+  resolved "https://registry.yarnpkg.com/ms/-/ms-2.1.2.tgz#d09d1f357b443f493382a8eb3ccd183872ae6009"
+  integrity sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w==
+
+nanoid@^3.3.6:
+  version "3.3.7"
+  resolved "https://registry.yarnpkg.com/nanoid/-/nanoid-3.3.7.tgz#d0c301a691bc8d54efa0a2226ccf3fe2fd656bd8"
+  integrity sha512-eSRppjcPIatRIMC1U6UngP8XFcz8MQWGQdt1MTBQ7NaAmvXDfvNxbvWV3x2y6CdEUciCSsDHDQZbhYaB8QEo2g==
+
+neo-async@^2.6.2:
+  version "2.6.2"
+  resolved "https://registry.yarnpkg.com/neo-async/-/neo-async-2.6.2.tgz#b4aafb93e3aeb2d8174ca53cf163ab7d7308305f"
+  integrity sha512-Yd3UES5mWCSqR+qNT93S3UoYUkqAZ9lLg8a7g9rimsWmYGK8cVToA4/sF3RrshdyV3sAGMXVUmpMYOw+dLpOuw==
+
+node-releases@^2.0.13:
+  version "2.0.13"
+  resolved "https://registry.yarnpkg.com/node-releases/-/node-releases-2.0.13.tgz#d5ed1627c23e3461e819b02e57b75e4899b1c81d"
+  integrity sha512-uYr7J37ae/ORWdZeQ1xxMJe3NtdmqMC/JZK+geofDrkLUApKRHPd18/TxtBOJ4A0/+uUIliorNrfYV6s1b02eQ==
+
+normalize-url@^6.0.1:
+  version "6.1.0"
+  resolved "https://registry.yarnpkg.com/normalize-url/-/normalize-url-6.1.0.tgz#40d0885b535deffe3f3147bec877d05fe4c5668a"
+  integrity sha512-DlL+XwOy3NxAQ8xuC0okPgK46iuVNAK01YN7RueYBqqFeGsBjV9XmCAzAdgt+667bCl5kPh9EqKKDwnaPG1I7A==
+
+nth-check@^2.0.1:
+  version "2.1.1"
+  resolved "https://registry.yarnpkg.com/nth-check/-/nth-check-2.1.1.tgz#c9eab428effce36cd6b92c924bdb000ef1f1ed1d"
+  integrity sha512-lqjrjmaOoAnWfMmBPL+XNnynZh2+swxiX3WUE0s4yEHI6m+AwrK2UZOimIRl3X/4QctVqS8AiZjFqyOGrMXb/w==
+  dependencies:
+    boolbase "^1.0.0"
+
+once@^1.3.0:
+  version "1.4.0"
+  resolved "https://registry.yarnpkg.com/once/-/once-1.4.0.tgz#583b1aa775961d4b113ac17d9c50baef9dd76bd1"
+  integrity sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==
+  dependencies:
+    wrappy "1"
+
+onetime@^5.1.0:
+  version "5.1.2"
+  resolved "https://registry.yarnpkg.com/onetime/-/onetime-5.1.2.tgz#d0e96ebb56b07476df1dd9c4806e5237985ca45e"
+  integrity sha512-kbpaSSGJTWdAY5KPVeMOKXSrPtr8C8C7wodJbcsd51jRnmD+GZu8Y0VoU6Dm5Z4vWr0Ig/1NKuWRKf7j5aaYSg==
+  dependencies:
+    mimic-fn "^2.1.0"
+
+optionator@^0.8.1:
+  version "0.8.3"
+  resolved "https://registry.yarnpkg.com/optionator/-/optionator-0.8.3.tgz#84fa1d036fe9d3c7e21d99884b601167ec8fb495"
+  integrity sha512-+IW9pACdk3XWmmTXG8m3upGUJst5XRGzxMRjXzAuJ1XnIFNvfhjjIuYkDvysnPQ7qzqVzLt78BCruntqRhWQbA==
+  dependencies:
+    deep-is "~0.1.3"
+    fast-levenshtein "~2.0.6"
+    levn "~0.3.0"
+    prelude-ls "~1.1.2"
+    type-check "~0.3.2"
+    word-wrap "~1.2.3"
+
+p-limit@^2.2.0:
+  version "2.3.0"
+  resolved "https://registry.yarnpkg.com/p-limit/-/p-limit-2.3.0.tgz#3dd33c647a214fdfffd835933eb086da0dc21db1"
+  integrity sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==
+  dependencies:
+    p-try "^2.0.0"
+
+p-limit@^3.0.2:
+  version "3.1.0"
+  resolved "https://registry.yarnpkg.com/p-limit/-/p-limit-3.1.0.tgz#e1daccbe78d0d1388ca18c64fea38e3e57e3706b"
+  integrity sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==
+  dependencies:
+    yocto-queue "^0.1.0"
+
+p-locate@^4.1.0:
+  version "4.1.0"
+  resolved "https://registry.yarnpkg.com/p-locate/-/p-locate-4.1.0.tgz#a3428bb7088b3a60292f66919278b7c297ad4f07"
+  integrity sha512-R79ZZ/0wAxKGu3oYMlz8jy/kbhsNrS7SKZ7PxEHBgJ5+F2mtFW2fK2cOtBh1cHYkQsbzFV7I+EoRKe6Yt0oK7A==
+  dependencies:
+    p-limit "^2.2.0"
+
+p-map@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/p-map/-/p-map-3.0.0.tgz#d704d9af8a2ba684e2600d9a215983d4141a979d"
+  integrity sha512-d3qXVTF/s+W+CdJ5A29wywV2n8CQQYahlgz2bFiA+4eVNJbHJodPZ+/gXwPGh0bOqA+j8S+6+ckmvLGPk1QpxQ==
+  dependencies:
+    aggregate-error "^3.0.0"
+
+p-map@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/p-map/-/p-map-4.0.0.tgz#bb2f95a5eda2ec168ec9274e06a747c3e2904d2b"
+  integrity sha512-/bjOqmgETBYB5BoEeGVea8dmvHb2m9GLy1E9W43yeyfP6QQCZGFNa+XRceJEuDB6zqr+gKpIAmlLebMpykw/MQ==
+  dependencies:
+    aggregate-error "^3.0.0"
+
+p-try@^2.0.0:
+  version "2.2.0"
+  resolved "https://registry.yarnpkg.com/p-try/-/p-try-2.2.0.tgz#cb2868540e313d61de58fafbe35ce9004d5540e6"
+  integrity sha512-R4nPAVTAU0B9D35/Gk3uJf/7XYbQcyohSKdvAxIRSNghFl4e71hVoGnBNQz9cWaXxO2I10KTC+3jMdvvoKw6dQ==
+
+parent-module@^1.0.0:
+  version "1.0.1"
+  resolved "https://registry.yarnpkg.com/parent-module/-/parent-module-1.0.1.tgz#691d2709e78c79fae3a156622452d00762caaaa2"
+  integrity sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==
+  dependencies:
+    callsites "^3.0.0"
+
+parse-json@^5.0.0:
+  version "5.2.0"
+  resolved "https://registry.yarnpkg.com/parse-json/-/parse-json-5.2.0.tgz#c76fc66dee54231c962b22bcc8a72cf2f99753cd"
+  integrity sha512-ayCKvm/phCGxOkYRSCM82iDwct8/EonSEgCSxWxD7ve6jHggsFl4fZVQBPRNgQoKiuV/odhFrGzQXZwbifC8Rg==
+  dependencies:
+    "@babel/code-frame" "^7.0.0"
+    error-ex "^1.3.1"
+    json-parse-even-better-errors "^2.3.0"
+    lines-and-columns "^1.1.6"
+
+path-exists@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/path-exists/-/path-exists-4.0.0.tgz#513bdbe2d3b95d7762e8c1137efa195c6c61b5b3"
+  integrity sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==
+
+path-is-absolute@^1.0.0:
+  version "1.0.1"
+  resolved "https://registry.yarnpkg.com/path-is-absolute/-/path-is-absolute-1.0.1.tgz#174b9268735534ffbc7ace6bf53a5a9e1b5c5f5f"
+  integrity sha512-AVbw3UJ2e9bq64vSaS9Am0fje1Pa8pbGqTTsmXfaIiMpnr5DlDhfJOuLj9Sf95ZPVDAUerDfEk88MPmPe7UCQg==
+
+path-key@^3.1.0:
+  version "3.1.1"
+  resolved "https://registry.yarnpkg.com/path-key/-/path-key-3.1.1.tgz#581f6ade658cbba65a0d3380de7753295054f375"
+  integrity sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==
+
+path-parse@^1.0.7:
+  version "1.0.7"
+  resolved "https://registry.yarnpkg.com/path-parse/-/path-parse-1.0.7.tgz#fbc114b60ca42b30d9daf5858e4bd68bbedb6735"
+  integrity sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==
+
+path-type@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/path-type/-/path-type-4.0.0.tgz#84ed01c0a7ba380afe09d90a8c180dcd9d03043b"
+  integrity sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==
+
+picocolors@^1.0.0:
+  version "1.0.0"
+  resolved "https://registry.yarnpkg.com/picocolors/-/picocolors-1.0.0.tgz#cb5bdc74ff3f51892236eaf79d68bc44564ab81c"
+  integrity sha512-1fygroTLlHu66zi26VoTDv8yRgm0Fccecssto+MhsZ0D/DGW2sm8E8AjW7NU5VVTRt5GxbeZ5qBuJr+HyLYkjQ==
+
+picomatch@^2.3.1:
+  version "2.3.1"
+  resolved "https://registry.yarnpkg.com/picomatch/-/picomatch-2.3.1.tgz#3ba3833733646d9d3e4995946c1365a67fb07a42"
+  integrity sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==
+
+pify@^2.3.0:
+  version "2.3.0"
+  resolved "https://registry.yarnpkg.com/pify/-/pify-2.3.0.tgz#ed141a6ac043a849ea588498e7dca8b15330e90c"
+  integrity sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==
+
+pkg-dir@^4.1.0, pkg-dir@^4.2.0:
+  version "4.2.0"
+  resolved "https://registry.yarnpkg.com/pkg-dir/-/pkg-dir-4.2.0.tgz#f099133df7ede422e81d1d8448270eeb3e4261f3"
+  integrity sha512-HRDzbaKjC+AOWVXxAU/x54COGeIv9eb+6CkDSQoNTt4XyWoIJvuPsXizxu/Fr23EiekbtZwmh1IcIG/l/a10GQ==
+  dependencies:
+    find-up "^4.0.0"
+
+pofile@^1.0.9:
+  version "1.1.4"
+  resolved "https://registry.yarnpkg.com/pofile/-/pofile-1.1.4.tgz#eab7e29f5017589b2a61b2259dff608c0cad76a2"
+  integrity sha512-r6Q21sKsY1AjTVVjOuU02VYKVNQGJNQHjTIvs4dEbeuuYfxgYk/DGD2mqqq4RDaVkwdSq0VEtmQUOPe/wH8X3g==
+
+postcss-calc@^8.2.3:
+  version "8.2.4"
+  resolved "https://registry.yarnpkg.com/postcss-calc/-/postcss-calc-8.2.4.tgz#77b9c29bfcbe8a07ff6693dc87050828889739a5"
+  integrity sha512-SmWMSJmB8MRnnULldx0lQIyhSNvuDl9HfrZkaqqE/WHAhToYsAvDq+yAsA/kIyINDszOp3Rh0GFoNuH5Ypsm3Q==
+  dependencies:
+    postcss-selector-parser "^6.0.9"
+    postcss-value-parser "^4.2.0"
+
+postcss-colormin@^5.3.1:
+  version "5.3.1"
+  resolved "https://registry.yarnpkg.com/postcss-colormin/-/postcss-colormin-5.3.1.tgz#86c27c26ed6ba00d96c79e08f3ffb418d1d1988f"
+  integrity sha512-UsWQG0AqTFQmpBegeLLc1+c3jIqBNB0zlDGRWR+dQ3pRKJL1oeMzyqmH3o2PIfn9MBdNrVPWhDbT769LxCTLJQ==
+  dependencies:
+    browserslist "^4.21.4"
+    caniuse-api "^3.0.0"
+    colord "^2.9.1"
+    postcss-value-parser "^4.2.0"
+
+postcss-convert-values@^5.1.3:
+  version "5.1.3"
+  resolved "https://registry.yarnpkg.com/postcss-convert-values/-/postcss-convert-values-5.1.3.tgz#04998bb9ba6b65aa31035d669a6af342c5f9d393"
+  integrity sha512-82pC1xkJZtcJEfiLw6UXnXVXScgtBrjlO5CBmuDQc+dlb88ZYheFsjTn40+zBVi3DkfF7iezO0nJUPLcJK3pvA==
+  dependencies:
+    browserslist "^4.21.4"
+    postcss-value-parser "^4.2.0"
+
+postcss-discard-comments@^5.1.2:
+  version "5.1.2"
+  resolved "https://registry.yarnpkg.com/postcss-discard-comments/-/postcss-discard-comments-5.1.2.tgz#8df5e81d2925af2780075840c1526f0660e53696"
+  integrity sha512-+L8208OVbHVF2UQf1iDmRcbdjJkuBF6IS29yBDSiWUIzpYaAhtNl6JYnYm12FnkeCwQqF5LeklOu6rAqgfBZqQ==
+
+postcss-discard-duplicates@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-discard-duplicates/-/postcss-discard-duplicates-5.1.0.tgz#9eb4fe8456706a4eebd6d3b7b777d07bad03e848"
+  integrity sha512-zmX3IoSI2aoenxHV6C7plngHWWhUOV3sP1T8y2ifzxzbtnuhk1EdPwm0S1bIUNaJ2eNbWeGLEwzw8huPD67aQw==
+
+postcss-discard-empty@^5.1.1:
+  version "5.1.1"
+  resolved "https://registry.yarnpkg.com/postcss-discard-empty/-/postcss-discard-empty-5.1.1.tgz#e57762343ff7f503fe53fca553d18d7f0c369c6c"
+  integrity sha512-zPz4WljiSuLWsI0ir4Mcnr4qQQ5e1Ukc3i7UfE2XcrwKK2LIPIqE5jxMRxO6GbI3cv//ztXDsXwEWT3BHOGh3A==
+
+postcss-discard-overridden@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-discard-overridden/-/postcss-discard-overridden-5.1.0.tgz#7e8c5b53325747e9d90131bb88635282fb4a276e"
+  integrity sha512-21nOL7RqWR1kasIVdKs8HNqQJhFxLsyRfAnUDm4Fe4t4mCWL9OJiHvlHPjcd8zc5Myu89b/7wZDnOSjFgeWRtw==
+
+postcss-import@^14.1.0:
+  version "14.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-import/-/postcss-import-14.1.0.tgz#a7333ffe32f0b8795303ee9e40215dac922781f0"
+  integrity sha512-flwI+Vgm4SElObFVPpTIT7SU7R3qk2L7PyduMcokiaVKuWv9d/U+Gm/QAd8NDLuykTWTkcrjOeD2Pp1rMeBTGw==
+  dependencies:
+    postcss-value-parser "^4.0.0"
+    read-cache "^1.0.0"
+    resolve "^1.1.7"
+
+postcss-js@^4.0.0:
+  version "4.0.1"
+  resolved "https://registry.yarnpkg.com/postcss-js/-/postcss-js-4.0.1.tgz#61598186f3703bab052f1c4f7d805f3991bee9d2"
+  integrity sha512-dDLF8pEO191hJMtlHFPRa8xsizHaM82MLfNkUHdUtVEV3tgTp5oj+8qbEqYM57SLfc74KSbw//4SeJma2LRVIw==
+  dependencies:
+    camelcase-css "^2.0.1"
+
+postcss-loader@^4.3.0:
+  version "4.3.0"
+  resolved "https://registry.yarnpkg.com/postcss-loader/-/postcss-loader-4.3.0.tgz#2c4de9657cd4f07af5ab42bd60a673004da1b8cc"
+  integrity sha512-M/dSoIiNDOo8Rk0mUqoj4kpGq91gcxCfb9PoyZVdZ76/AuhxylHDYZblNE8o+EQ9AMSASeMFEKxZf5aU6wlx1Q==
+  dependencies:
+    cosmiconfig "^7.0.0"
+    klona "^2.0.4"
+    loader-utils "^2.0.0"
+    schema-utils "^3.0.0"
+    semver "^7.3.4"
+
+postcss-merge-longhand@^5.1.7:
+  version "5.1.7"
+  resolved "https://registry.yarnpkg.com/postcss-merge-longhand/-/postcss-merge-longhand-5.1.7.tgz#24a1bdf402d9ef0e70f568f39bdc0344d568fb16"
+  integrity sha512-YCI9gZB+PLNskrK0BB3/2OzPnGhPkBEwmwhfYk1ilBHYVAZB7/tkTHFBAnCrvBBOmeYyMYw3DMjT55SyxMBzjQ==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+    stylehacks "^5.1.1"
+
+postcss-merge-rules@^5.1.4:
+  version "5.1.4"
+  resolved "https://registry.yarnpkg.com/postcss-merge-rules/-/postcss-merge-rules-5.1.4.tgz#2f26fa5cacb75b1402e213789f6766ae5e40313c"
+  integrity sha512-0R2IuYpgU93y9lhVbO/OylTtKMVcHb67zjWIfCiKR9rWL3GUk1677LAqD/BcHizukdZEjT8Ru3oHRoAYoJy44g==
+  dependencies:
+    browserslist "^4.21.4"
+    caniuse-api "^3.0.0"
+    cssnano-utils "^3.1.0"
+    postcss-selector-parser "^6.0.5"
+
+postcss-minify-font-values@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-minify-font-values/-/postcss-minify-font-values-5.1.0.tgz#f1df0014a726083d260d3bd85d7385fb89d1f01b"
+  integrity sha512-el3mYTgx13ZAPPirSVsHqFzl+BBBDrXvbySvPGFnQcTI4iNslrPaFq4muTkLZmKlGk4gyFAYUBMH30+HurREyA==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+
+postcss-minify-gradients@^5.1.1:
+  version "5.1.1"
+  resolved "https://registry.yarnpkg.com/postcss-minify-gradients/-/postcss-minify-gradients-5.1.1.tgz#f1fe1b4f498134a5068240c2f25d46fcd236ba2c"
+  integrity sha512-VGvXMTpCEo4qHTNSa9A0a3D+dxGFZCYwR6Jokk+/3oB6flu2/PnPXAh2x7x52EkY5xlIHLm+Le8tJxe/7TNhzw==
+  dependencies:
+    colord "^2.9.1"
+    cssnano-utils "^3.1.0"
+    postcss-value-parser "^4.2.0"
+
+postcss-minify-params@^5.1.4:
+  version "5.1.4"
+  resolved "https://registry.yarnpkg.com/postcss-minify-params/-/postcss-minify-params-5.1.4.tgz#c06a6c787128b3208b38c9364cfc40c8aa5d7352"
+  integrity sha512-+mePA3MgdmVmv6g+30rn57USjOGSAyuxUmkfiWpzalZ8aiBkdPYjXWtHuwJGm1v5Ojy0Z0LaSYhHaLJQB0P8Jw==
+  dependencies:
+    browserslist "^4.21.4"
+    cssnano-utils "^3.1.0"
+    postcss-value-parser "^4.2.0"
+
+postcss-minify-selectors@^5.2.1:
+  version "5.2.1"
+  resolved "https://registry.yarnpkg.com/postcss-minify-selectors/-/postcss-minify-selectors-5.2.1.tgz#d4e7e6b46147b8117ea9325a915a801d5fe656c6"
+  integrity sha512-nPJu7OjZJTsVUmPdm2TcaiohIwxP+v8ha9NehQ2ye9szv4orirRU3SDdtUmKH+10nzn0bAyOXZ0UEr7OpvLehg==
+  dependencies:
+    postcss-selector-parser "^6.0.5"
+
+postcss-mixins@^9.0.2:
+  version "9.0.4"
+  resolved "https://registry.yarnpkg.com/postcss-mixins/-/postcss-mixins-9.0.4.tgz#75cd3cdb619a7e08c4c51ebb094db5f6d65b3831"
+  integrity sha512-XVq5jwQJDRu5M1XGkdpgASqLk37OqkH4JCFDXl/Dn7janOJjCTEKL+36cnRVy7bMtoBzALfO7bV7nTIsFnUWLA==
+  dependencies:
+    fast-glob "^3.2.11"
+    postcss-js "^4.0.0"
+    postcss-simple-vars "^7.0.0"
+    sugarss "^4.0.1"
+
+postcss-modules-extract-imports@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/postcss-modules-extract-imports/-/postcss-modules-extract-imports-3.0.0.tgz#cda1f047c0ae80c97dbe28c3e76a43b88025741d"
+  integrity sha512-bdHleFnP3kZ4NYDhuGlVK+CMrQ/pqUm8bx/oGL93K6gVwiclvX5x0n76fYMKuIGKzlABOy13zsvqjb0f92TEXw==
+
+postcss-modules-local-by-default@^4.0.3:
+  version "4.0.3"
+  resolved "https://registry.yarnpkg.com/postcss-modules-local-by-default/-/postcss-modules-local-by-default-4.0.3.tgz#b08eb4f083050708998ba2c6061b50c2870ca524"
+  integrity sha512-2/u2zraspoACtrbFRnTijMiQtb4GW4BvatjaG/bCjYQo8kLTdevCUlwuBHx2sCnSyrI3x3qj4ZK1j5LQBgzmwA==
+  dependencies:
+    icss-utils "^5.0.0"
+    postcss-selector-parser "^6.0.2"
+    postcss-value-parser "^4.1.0"
+
+postcss-modules-scope@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/postcss-modules-scope/-/postcss-modules-scope-3.0.0.tgz#9ef3151456d3bbfa120ca44898dfca6f2fa01f06"
+  integrity sha512-hncihwFA2yPath8oZ15PZqvWGkWf+XUfQgUGamS4LqoP1anQLOsOJw0vr7J7IwLpoY9fatA2qiGUGmuZL0Iqlg==
+  dependencies:
+    postcss-selector-parser "^6.0.4"
+
+postcss-modules-values@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/postcss-modules-values/-/postcss-modules-values-4.0.0.tgz#d7c5e7e68c3bb3c9b27cbf48ca0bb3ffb4602c9c"
+  integrity sha512-RDxHkAiEGI78gS2ofyvCsu7iycRv7oqw5xMWn9iMoR0N/7mf9D50ecQqUo5BZ9Zh2vH4bCUR/ktCqbB9m8vJjQ==
+  dependencies:
+    icss-utils "^5.0.0"
+
+postcss-nesting@^10.1.4:
+  version "10.2.0"
+  resolved "https://registry.yarnpkg.com/postcss-nesting/-/postcss-nesting-10.2.0.tgz#0b12ce0db8edfd2d8ae0aaf86427370b898890be"
+  integrity sha512-EwMkYchxiDiKUhlJGzWsD9b2zvq/r2SSubcRrgP+jujMXFzqvANLt16lJANC+5uZ6hjI7lpRmI6O8JIl+8l1KA==
+  dependencies:
+    "@csstools/selector-specificity" "^2.0.0"
+    postcss-selector-parser "^6.0.10"
+
+postcss-normalize-charset@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-normalize-charset/-/postcss-normalize-charset-5.1.0.tgz#9302de0b29094b52c259e9b2cf8dc0879879f0ed"
+  integrity sha512-mSgUJ+pd/ldRGVx26p2wz9dNZ7ji6Pn8VWBajMXFf8jk7vUoSrZ2lt/wZR7DtlZYKesmZI680qjr2CeFF2fbUg==
+
+postcss-normalize-display-values@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-normalize-display-values/-/postcss-normalize-display-values-5.1.0.tgz#72abbae58081960e9edd7200fcf21ab8325c3da8"
+  integrity sha512-WP4KIM4o2dazQXWmFaqMmcvsKmhdINFblgSeRgn8BJ6vxaMyaJkwAzpPpuvSIoG/rmX3M+IrRZEz2H0glrQNEA==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+
+postcss-normalize-positions@^5.1.1:
+  version "5.1.1"
+  resolved "https://registry.yarnpkg.com/postcss-normalize-positions/-/postcss-normalize-positions-5.1.1.tgz#ef97279d894087b59325b45c47f1e863daefbb92"
+  integrity sha512-6UpCb0G4eofTCQLFVuI3EVNZzBNPiIKcA1AKVka+31fTVySphr3VUgAIULBhxZkKgwLImhzMR2Bw1ORK+37INg==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+
+postcss-normalize-repeat-style@^5.1.1:
+  version "5.1.1"
+  resolved "https://registry.yarnpkg.com/postcss-normalize-repeat-style/-/postcss-normalize-repeat-style-5.1.1.tgz#e9eb96805204f4766df66fd09ed2e13545420fb2"
+  integrity sha512-mFpLspGWkQtBcWIRFLmewo8aC3ImN2i/J3v8YCFUwDnPu3Xz4rLohDO26lGjwNsQxB3YF0KKRwspGzE2JEuS0g==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+
+postcss-normalize-string@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-normalize-string/-/postcss-normalize-string-5.1.0.tgz#411961169e07308c82c1f8c55f3e8a337757e228"
+  integrity sha512-oYiIJOf4T9T1N4i+abeIc7Vgm/xPCGih4bZz5Nm0/ARVJ7K6xrDlLwvwqOydvyL3RHNf8qZk6vo3aatiw/go3w==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+
+postcss-normalize-timing-functions@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-normalize-timing-functions/-/postcss-normalize-timing-functions-5.1.0.tgz#d5614410f8f0b2388e9f240aa6011ba6f52dafbb"
+  integrity sha512-DOEkzJ4SAXv5xkHl0Wa9cZLF3WCBhF3o1SKVxKQAa+0pYKlueTpCgvkFAHfk+Y64ezX9+nITGrDZeVGgITJXjg==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+
+postcss-normalize-unicode@^5.1.1:
+  version "5.1.1"
+  resolved "https://registry.yarnpkg.com/postcss-normalize-unicode/-/postcss-normalize-unicode-5.1.1.tgz#f67297fca3fea7f17e0d2caa40769afc487aa030"
+  integrity sha512-qnCL5jzkNUmKVhZoENp1mJiGNPcsJCs1aaRmURmeJGES23Z/ajaln+EPTD+rBeNkSryI+2WTdW+lwcVdOikrpA==
+  dependencies:
+    browserslist "^4.21.4"
+    postcss-value-parser "^4.2.0"
+
+postcss-normalize-url@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-normalize-url/-/postcss-normalize-url-5.1.0.tgz#ed9d88ca82e21abef99f743457d3729a042adcdc"
+  integrity sha512-5upGeDO+PVthOxSmds43ZeMeZfKH+/DKgGRD7TElkkyS46JXAUhMzIKiCa7BabPeIy3AQcTkXwVVN7DbqsiCew==
+  dependencies:
+    normalize-url "^6.0.1"
+    postcss-value-parser "^4.2.0"
+
+postcss-normalize-whitespace@^5.1.1:
+  version "5.1.1"
+  resolved "https://registry.yarnpkg.com/postcss-normalize-whitespace/-/postcss-normalize-whitespace-5.1.1.tgz#08a1a0d1ffa17a7cc6efe1e6c9da969cc4493cfa"
+  integrity sha512-83ZJ4t3NUDETIHTa3uEg6asWjSBYL5EdkVB0sDncx9ERzOKBVJIUeDO9RyA9Zwtig8El1d79HBp0JEi8wvGQnA==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+
+postcss-ordered-values@^5.1.3:
+  version "5.1.3"
+  resolved "https://registry.yarnpkg.com/postcss-ordered-values/-/postcss-ordered-values-5.1.3.tgz#b6fd2bd10f937b23d86bc829c69e7732ce76ea38"
+  integrity sha512-9UO79VUhPwEkzbb3RNpqqghc6lcYej1aveQteWY+4POIwlqkYE21HKWaLDF6lWNuqCobEAyTovVhtI32Rbv2RQ==
+  dependencies:
+    cssnano-utils "^3.1.0"
+    postcss-value-parser "^4.2.0"
+
+postcss-reduce-initial@^5.1.2:
+  version "5.1.2"
+  resolved "https://registry.yarnpkg.com/postcss-reduce-initial/-/postcss-reduce-initial-5.1.2.tgz#798cd77b3e033eae7105c18c9d371d989e1382d6"
+  integrity sha512-dE/y2XRaqAi6OvjzD22pjTUQ8eOfc6m/natGHgKFBK9DxFmIm69YmaRVQrGgFlEfc1HePIurY0TmDeROK05rIg==
+  dependencies:
+    browserslist "^4.21.4"
+    caniuse-api "^3.0.0"
+
+postcss-reduce-transforms@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-reduce-transforms/-/postcss-reduce-transforms-5.1.0.tgz#333b70e7758b802f3dd0ddfe98bb1ccfef96b6e9"
+  integrity sha512-2fbdbmgir5AvpW9RLtdONx1QoYG2/EtqpNQbFASDlixBbAYuTcJ0dECwlqNqH7VbaUnEnh8SrxOe2sRIn24XyQ==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+
+postcss-selector-parser@^6.0.10, postcss-selector-parser@^6.0.2, postcss-selector-parser@^6.0.4, postcss-selector-parser@^6.0.5, postcss-selector-parser@^6.0.9:
+  version "6.0.13"
+  resolved "https://registry.yarnpkg.com/postcss-selector-parser/-/postcss-selector-parser-6.0.13.tgz#d05d8d76b1e8e173257ef9d60b706a8e5e99bf1b"
+  integrity sha512-EaV1Gl4mUEV4ddhDnv/xtj7sxwrwxdetHdWUGnT4VJQf+4d05v6lHYZr8N573k5Z0BViss7BDhfWtKS3+sfAqQ==
+  dependencies:
+    cssesc "^3.0.0"
+    util-deprecate "^1.0.2"
+
+postcss-simple-vars@^7.0.0:
+  version "7.0.1"
+  resolved "https://registry.yarnpkg.com/postcss-simple-vars/-/postcss-simple-vars-7.0.1.tgz#836b3097a54dcd13dbd3c36a5dbdd512fad2954c"
+  integrity sha512-5GLLXaS8qmzHMOjVxqkk1TZPf1jMqesiI7qLhnlyERalG0sMbHIbJqrcnrpmZdKCLglHnRHoEBB61RtGTsj++A==
+
+postcss-svgo@^5.1.0:
+  version "5.1.0"
+  resolved "https://registry.yarnpkg.com/postcss-svgo/-/postcss-svgo-5.1.0.tgz#0a317400ced789f233a28826e77523f15857d80d"
+  integrity sha512-D75KsH1zm5ZrHyxPakAxJWtkyXew5qwS70v56exwvw542d9CRtTo78K0WeFxZB4G7JXKKMbEZtZayTGdIky/eA==
+  dependencies:
+    postcss-value-parser "^4.2.0"
+    svgo "^2.7.0"
+
+postcss-unique-selectors@^5.1.1:
+  version "5.1.1"
+  resolved "https://registry.yarnpkg.com/postcss-unique-selectors/-/postcss-unique-selectors-5.1.1.tgz#a9f273d1eacd09e9aa6088f4b0507b18b1b541b6"
+  integrity sha512-5JiODlELrz8L2HwxfPnhOWZYWDxVHWL83ufOv84NrcgipI7TaeRsatAhK4Tr2/ZiYldpK/wBvw5BD3qfaK96GA==
+  dependencies:
+    postcss-selector-parser "^6.0.5"
+
+postcss-value-parser@^4.0.0, postcss-value-parser@^4.1.0, postcss-value-parser@^4.2.0:
+  version "4.2.0"
+  resolved "https://registry.yarnpkg.com/postcss-value-parser/-/postcss-value-parser-4.2.0.tgz#723c09920836ba6d3e5af019f92bc0971c02e514"
+  integrity sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==
+
+postcss@^8.4.12, postcss@^8.4.21:
+  version "8.4.31"
+  resolved "https://registry.yarnpkg.com/postcss/-/postcss-8.4.31.tgz#92b451050a9f914da6755af352bdc0192508656d"
+  integrity sha512-PS08Iboia9mts/2ygV3eLpY5ghnUcfLV/EXTOW1E2qYxJKGGBUtNjN76FYHnMs36RmARn41bC0AZmn+rR0OVpQ==
+  dependencies:
+    nanoid "^3.3.6"
+    picocolors "^1.0.0"
+    source-map-js "^1.0.2"
+
+prelude-ls@~1.1.2:
+  version "1.1.2"
+  resolved "https://registry.yarnpkg.com/prelude-ls/-/prelude-ls-1.1.2.tgz#21932a549f5e52ffd9a827f570e04be62a97da54"
+  integrity sha512-ESF23V4SKG6lVSGZgYNpbsiaAkdab6ZgOxe52p7+Kid3W3u3bxR4Vfd/o21dmN7jSt0IwgZ4v5MUd26FEtXE9w==
+
+promise-inflight@^1.0.1:
+  version "1.0.1"
+  resolved "https://registry.yarnpkg.com/promise-inflight/-/promise-inflight-1.0.1.tgz#98472870bf228132fcbdd868129bad12c3c029e3"
+  integrity sha512-6zWPyEOFaQBJYcGMHBKTKJ3u6TBsnMFOIZSa6ce1e/ZrrsOlnHRHbabMjLiBYKp+n44X9eUI6VUPaukCXHuG4g==
+
+punycode@^2.1.0:
+  version "2.3.1"
+  resolved "https://registry.yarnpkg.com/punycode/-/punycode-2.3.1.tgz#027422e2faec0b25e1549c3e1bd8309b9133b6e5"
+  integrity sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==
+
+queue-microtask@^1.2.2:
+  version "1.2.3"
+  resolved "https://registry.yarnpkg.com/queue-microtask/-/queue-microtask-1.2.3.tgz#4929228bbc724dfac43e0efb058caf7b6cfb6243"
+  integrity sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==
+
+randombytes@^2.1.0:
+  version "2.1.0"
+  resolved "https://registry.yarnpkg.com/randombytes/-/randombytes-2.1.0.tgz#df6f84372f0270dc65cdf6291349ab7a473d4f2a"
+  integrity sha512-vYl3iOX+4CKUWuxGi9Ukhie6fsqXqS9FE2Zaic4tNFD2N2QQaXOMFbuKK4QmDHC0JO6B1Zp41J0LpT0oR68amQ==
+  dependencies:
+    safe-buffer "^5.1.0"
+
+raw-loader@^4.0.1, raw-loader@^4.0.2:
+  version "4.0.2"
+  resolved "https://registry.yarnpkg.com/raw-loader/-/raw-loader-4.0.2.tgz#1aac6b7d1ad1501e66efdac1522c73e59a584eb6"
+  integrity sha512-ZnScIV3ag9A4wPX/ZayxL/jZH+euYb6FcUinPcgiQW0+UBtEv0O6Q3lGd3cqJ+GHH+rksEv3Pj99oxJ3u3VIKA==
+  dependencies:
+    loader-utils "^2.0.0"
+    schema-utils "^3.0.0"
+
+read-cache@^1.0.0:
+  version "1.0.0"
+  resolved "https://registry.yarnpkg.com/read-cache/-/read-cache-1.0.0.tgz#e664ef31161166c9751cdbe8dbcf86b5fb58f774"
+  integrity sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==
+  dependencies:
+    pify "^2.3.0"
+
+"readable-stream@2 || 3":
+  version "3.6.2"
+  resolved "https://registry.yarnpkg.com/readable-stream/-/readable-stream-3.6.2.tgz#56a9b36ea965c00c5a93ef31eb111a0f11056967"
+  integrity sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==
+  dependencies:
+    inherits "^2.0.3"
+    string_decoder "^1.1.1"
+    util-deprecate "^1.0.1"
+
+rechoir@^0.6.2:
+  version "0.6.2"
+  resolved "https://registry.yarnpkg.com/rechoir/-/rechoir-0.6.2.tgz#85204b54dba82d5742e28c96756ef43af50e3384"
+  integrity sha512-HFM8rkZ+i3zrV+4LQjwQ0W+ez98pApMGM3HUrN04j3CqzPOzl9nmP15Y8YXNm8QHGv/eacOVEjqhmWpkRV0NAw==
+  dependencies:
+    resolve "^1.1.6"
+
+rechoir@^0.7.0:
+  version "0.7.1"
+  resolved "https://registry.yarnpkg.com/rechoir/-/rechoir-0.7.1.tgz#9478a96a1ca135b5e88fc027f03ee92d6c645686"
+  integrity sha512-/njmZ8s1wVeR6pjTZ+0nCnv8SpZNRMT2D1RLOJQESlYFDBvwpTA4KWJpZ+sBJ4+vhjILRcK7JIFdGCdxEAAitg==
+  dependencies:
+    resolve "^1.9.0"
+
+resolve-cwd@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/resolve-cwd/-/resolve-cwd-3.0.0.tgz#0f0075f1bb2544766cf73ba6a6e2adfebcb13f2d"
+  integrity sha512-OrZaX2Mb+rJCpH/6CpSqt9xFVpN++x01XnN2ie9g6P5/3xelLAkXWVADpdz1IHD/KFfEXyE6V0U01OQ3UO2rEg==
+  dependencies:
+    resolve-from "^5.0.0"
+
+resolve-from@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/resolve-from/-/resolve-from-4.0.0.tgz#4abcd852ad32dd7baabfe9b40e00a36db5f392e6"
+  integrity sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==
+
+resolve-from@^5.0.0:
+  version "5.0.0"
+  resolved "https://registry.yarnpkg.com/resolve-from/-/resolve-from-5.0.0.tgz#c35225843df8f776df21c57557bc087e9dfdfc69"
+  integrity sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==
+
+resolve@^1.1.6, resolve@^1.1.7, resolve@^1.9.0:
+  version "1.22.8"
+  resolved "https://registry.yarnpkg.com/resolve/-/resolve-1.22.8.tgz#b6c87a9f2aa06dfab52e3d70ac8cde321fa5a48d"
+  integrity sha512-oKWePCxqpd6FlLvGV1VU0x7bkPmmCNolxzjMf4NczoDnQcIWrAF+cPtZn5i6n+RfD2d9i0tzpKnG6Yk168yIyw==
+  dependencies:
+    is-core-module "^2.13.0"
+    path-parse "^1.0.7"
+    supports-preserve-symlinks-flag "^1.0.0"
+
+restore-cursor@^3.1.0:
+  version "3.1.0"
+  resolved "https://registry.yarnpkg.com/restore-cursor/-/restore-cursor-3.1.0.tgz#39f67c54b3a7a58cea5236d95cf0034239631f7e"
+  integrity sha512-l+sSefzHpj5qimhFSE5a8nufZYAM3sBSVMAPtYkmC+4EH2anSGaEMXSD0izRQbu9nfyQ9y5JrVmp7E8oZrUjvA==
+  dependencies:
+    onetime "^5.1.0"
+    signal-exit "^3.0.2"
+
+reusify@^1.0.4:
+  version "1.0.4"
+  resolved "https://registry.yarnpkg.com/reusify/-/reusify-1.0.4.tgz#90da382b1e126efc02146e90845a88db12925d76"
+  integrity sha512-U9nH88a3fc/ekCF1l0/UP1IosiuIjyTh7hBvXVMHYgVcfGvt897Xguj2UOLDeI5BG2m7/uwyaLVT6fbtCwTyzw==
+
+rimraf@^3.0.0, rimraf@^3.0.2:
+  version "3.0.2"
+  resolved "https://registry.yarnpkg.com/rimraf/-/rimraf-3.0.2.tgz#f1a5402ba6220ad52cc1282bac1ae3aa49fd061a"
+  integrity sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==
+  dependencies:
+    glob "^7.1.3"
+
+run-parallel@^1.1.9:
+  version "1.2.0"
+  resolved "https://registry.yarnpkg.com/run-parallel/-/run-parallel-1.2.0.tgz#66d1368da7bdf921eb9d95bd1a9229e7f21a43ee"
+  integrity sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==
+  dependencies:
+    queue-microtask "^1.2.2"
+
+safe-buffer@^5.1.0, safe-buffer@~5.2.0:
+  version "5.2.1"
+  resolved "https://registry.yarnpkg.com/safe-buffer/-/safe-buffer-5.2.1.tgz#1eaf9fa9bdb1fdd4ec75f58f9cdb4e6b7827eec6"
+  integrity sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==
+
+schema-utils@^3.0.0, schema-utils@^3.1.1, schema-utils@^3.2.0:
+  version "3.3.0"
+  resolved "https://registry.yarnpkg.com/schema-utils/-/schema-utils-3.3.0.tgz#f50a88877c3c01652a15b622ae9e9795df7a60fe"
+  integrity sha512-pN/yOAvcC+5rQ5nERGuwrjLlYvLTbCibnZ1I7B1LaiAz9BRBlE9GMgE/eqV30P7aJQUf7Ddimy/RsbYO/GrVGg==
+  dependencies:
+    "@types/json-schema" "^7.0.8"
+    ajv "^6.12.5"
+    ajv-keywords "^3.5.2"
+
+semver@^6.0.0:
+  version "6.3.1"
+  resolved "https://registry.yarnpkg.com/semver/-/semver-6.3.1.tgz#556d2ef8689146e46dcea4bfdd095f3434dffcb4"
+  integrity sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==
+
+semver@^7.3.4, semver@^7.3.5, semver@^7.3.8:
+  version "7.5.4"
+  resolved "https://registry.yarnpkg.com/semver/-/semver-7.5.4.tgz#483986ec4ed38e1c6c48c34894a9182dbff68a6e"
+  integrity sha512-1bCSESV6Pv+i21Hvpxp3Dx+pSD8lIPt8uVjRrxAUt/nbswYc+tK6Y2btiULjd4+fnq15PX+nqQDC7Oft7WkwcA==
+  dependencies:
+    lru-cache "^6.0.0"
+
+serialize-javascript@^5.0.1:
+  version "5.0.1"
+  resolved "https://registry.yarnpkg.com/serialize-javascript/-/serialize-javascript-5.0.1.tgz#7886ec848049a462467a97d3d918ebb2aaf934f4"
+  integrity sha512-SaaNal9imEO737H2c05Og0/8LUXG7EnsZyMa8MzkmuHoELfT6txuj0cMqRj6zfPKnmQ1yasR4PCJc8x+M4JSPA==
+  dependencies:
+    randombytes "^2.1.0"
+
+serialize-javascript@^6.0.1:
+  version "6.0.1"
+  resolved "https://registry.yarnpkg.com/serialize-javascript/-/serialize-javascript-6.0.1.tgz#b206efb27c3da0b0ab6b52f48d170b7996458e5c"
+  integrity sha512-owoXEFjWRllis8/M1Q+Cw5k8ZH40e3zhp/ovX+Xr/vi1qj6QesbyXXViFbpNvWvPNAD62SutwEXavefrLJWj7w==
+  dependencies:
+    randombytes "^2.1.0"
+
+shallow-clone@^3.0.0:
+  version "3.0.1"
+  resolved "https://registry.yarnpkg.com/shallow-clone/-/shallow-clone-3.0.1.tgz#8f2981ad92531f55035b01fb230769a40e02efa3"
+  integrity sha512-/6KqX+GVUdqPuPPd2LxDDxzX6CAbjJehAAOKlNpqqUpAqPM6HeL8f+o3a+JsyGjn2lv0WY8UsTgUJjU9Ok55NA==
+  dependencies:
+    kind-of "^6.0.2"
+
+shebang-command@^2.0.0:
+  version "2.0.0"
+  resolved "https://registry.yarnpkg.com/shebang-command/-/shebang-command-2.0.0.tgz#ccd0af4f8835fbdc265b82461aaf0c36663f34ea"
+  integrity sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==
+  dependencies:
+    shebang-regex "^3.0.0"
+
+shebang-regex@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/shebang-regex/-/shebang-regex-3.0.0.tgz#ae16f1644d873ecad843b0307b143362d4c42172"
+  integrity sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==
+
+shelljs@^0.8.1:
+  version "0.8.5"
+  resolved "https://registry.yarnpkg.com/shelljs/-/shelljs-0.8.5.tgz#de055408d8361bed66c669d2f000538ced8ee20c"
+  integrity sha512-TiwcRcrkhHvbrZbnRcFYMLl30Dfov3HKqzp5tO5b4pt6G/SezKcYhmDg15zXVBswHmctSAQKznqNW2LO5tTDow==
+  dependencies:
+    glob "^7.0.0"
+    interpret "^1.0.0"
+    rechoir "^0.6.2"
+
+signal-exit@^3.0.2:
+  version "3.0.7"
+  resolved "https://registry.yarnpkg.com/signal-exit/-/signal-exit-3.0.7.tgz#a9a1767f8af84155114eaabd73f99273c8f59ad9"
+  integrity sha512-wnD2ZE+l+SPC/uoS0vXeE9L1+0wuaMqKlfz9AMUo38JsyLSBWSFcHR1Rri62LZc12vLr1gb3jl7iwQhgwpAbGQ==
+
+slash@^3.0.0:
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/slash/-/slash-3.0.0.tgz#6539be870c165adbd5240220dbe361f1bc4d4634"
+  integrity sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==
+
+source-list-map@^2.0.0, source-list-map@^2.0.1:
+  version "2.0.1"
+  resolved "https://registry.yarnpkg.com/source-list-map/-/source-list-map-2.0.1.tgz#3993bd873bfc48479cca9ea3a547835c7c154b34"
+  integrity sha512-qnQ7gVMxGNxsiL4lEuJwe/To8UnK7fAnmbGEEH8RpLouuKbeEm0lhbQVFIrNSuB+G7tVrAlVsZgETT5nljf+Iw==
+
+source-map-js@^1.0.2:
+  version "1.0.2"
+  resolved "https://registry.yarnpkg.com/source-map-js/-/source-map-js-1.0.2.tgz#adbc361d9c62df380125e7f161f71c826f1e490c"
+  integrity sha512-R0XvVJ9WusLiqTCEiGCmICCMplcCkIwwR11mOSD9CR5u+IXYdiseeEuXCVAjS54zqwkLcPNnmU4OeJ6tUrWhDw==
+
+source-map-support@~0.5.20:
+  version "0.5.21"
+  resolved "https://registry.yarnpkg.com/source-map-support/-/source-map-support-0.5.21.tgz#04fe7c7f9e1ed2d662233c28cb2b35b9f63f6e4f"
+  integrity sha512-uBHU3L3czsIyYXKX88fdrGovxdSCoTGDRZ6SYXtSRxLZUzHg5P/66Ht6uoUlHu9EZod+inXhKo3qQgwXUT/y1w==
+  dependencies:
+    buffer-from "^1.0.0"
+    source-map "^0.6.0"
+
+source-map@^0.6.0, source-map@^0.6.1, source-map@~0.6.1:
+  version "0.6.1"
+  resolved "https://registry.yarnpkg.com/source-map/-/source-map-0.6.1.tgz#74722af32e9614e9c287a8d0bbde48b5e2f1a263"
+  integrity sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==
+
+source-map@^0.7.4:
+  version "0.7.4"
+  resolved "https://registry.yarnpkg.com/source-map/-/source-map-0.7.4.tgz#a9bbe705c9d8846f4e08ff6765acf0f1b0898656"
+  integrity sha512-l3BikUxvPOcn5E74dZiq5BGsTb5yEwhaTSzccU6t4sDOH8NWJCstKO5QT2CvtFoK6F0saL7p9xHAqHOlCPJygA==
+
+ssri@^8.0.1:
+  version "8.0.1"
+  resolved "https://registry.yarnpkg.com/ssri/-/ssri-8.0.1.tgz#638e4e439e2ffbd2cd289776d5ca457c4f51a2af"
+  integrity sha512-97qShzy1AiyxvPNIkLWoGua7xoQzzPjQ0HAH4B0rWKo7SZ6USuPcrUiAFrws0UH8RrbWmgq3LMTObhPIHbbBeQ==
+  dependencies:
+    minipass "^3.1.1"
+
+stable@^0.1.8:
+  version "0.1.8"
+  resolved "https://registry.yarnpkg.com/stable/-/stable-0.1.8.tgz#836eb3c8382fe2936feaf544631017ce7d47a3cf"
+  integrity sha512-ji9qxRnOVfcuLDySj9qzhGSEFVobyt1kIOSkj1qZzYLzq7Tos/oUUWvotUPQLlrsidqsK6tBH89Bc9kL5zHA6w==
+
+string_decoder@^1.1.1:
+  version "1.3.0"
+  resolved "https://registry.yarnpkg.com/string_decoder/-/string_decoder-1.3.0.tgz#42f114594a46cf1a8e30b0a84f56c78c3edac21e"
+  integrity sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==
+  dependencies:
+    safe-buffer "~5.2.0"
+
+style-loader@^2.0.0:
+  version "2.0.0"
+  resolved "https://registry.yarnpkg.com/style-loader/-/style-loader-2.0.0.tgz#9669602fd4690740eaaec137799a03addbbc393c"
+  integrity sha512-Z0gYUJmzZ6ZdRUqpg1r8GsaFKypE+3xAzuFeMuoHgjc9KZv3wMyCRjQIWEbhoFSq7+7yoHXySDJyyWQaPajeiQ==
+  dependencies:
+    loader-utils "^2.0.0"
+    schema-utils "^3.0.0"
+
+stylehacks@^5.1.1:
+  version "5.1.1"
+  resolved "https://registry.yarnpkg.com/stylehacks/-/stylehacks-5.1.1.tgz#7934a34eb59d7152149fa69d6e9e56f2fc34bcc9"
+  integrity sha512-sBpcd5Hx7G6seo7b1LkpttvTz7ikD0LlH5RmdcBNb6fFR0Fl7LQwHDFr300q4cwUqi+IYrFGmsIHieMBfnN/Bw==
+  dependencies:
+    browserslist "^4.21.4"
+    postcss-selector-parser "^6.0.4"
+
+sugarss@^4.0.1:
+  version "4.0.1"
+  resolved "https://registry.yarnpkg.com/sugarss/-/sugarss-4.0.1.tgz#128a783ed71ee0fc3b489ce1f7d5a89bc1e24383"
+  integrity sha512-WCjS5NfuVJjkQzK10s8WOBY+hhDxxNt/N6ZaGwxFZ+wN3/lKKFSaaKUNecULcTTvE4urLcKaZFQD8vO0mOZujw==
+
+supports-color@^5.3.0:
+  version "5.5.0"
+  resolved "https://registry.yarnpkg.com/supports-color/-/supports-color-5.5.0.tgz#e2e69a44ac8772f78a1ec0b35b689df6530efc8f"
+  integrity sha512-QjVjwdXIt408MIiAqCX4oUKsgU2EqAGzs2Ppkm4aQYbjm+ZEWEcW4SfFNTr4uMNZma0ey4f5lgLrkB0aX0QMow==
+  dependencies:
+    has-flag "^3.0.0"
+
+supports-color@^7.0.0, supports-color@^7.1.0:
+  version "7.2.0"
+  resolved "https://registry.yarnpkg.com/supports-color/-/supports-color-7.2.0.tgz#1b7dcdcb32b8138801b3e478ba6a51caa89648da"
+  integrity sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==
+  dependencies:
+    has-flag "^4.0.0"
+
+supports-color@^8.0.0:
+  version "8.1.1"
+  resolved "https://registry.yarnpkg.com/supports-color/-/supports-color-8.1.1.tgz#cd6fc17e28500cff56c1b86c0a7fd4a54a73005c"
+  integrity sha512-MpUEN2OodtUzxvKQl72cUF7RQ5EiHsGvSsVG0ia9c5RbWGL2CI4C7EpPS8UTBIplnlzZiNuV56w+FuNxy3ty2Q==
+  dependencies:
+    has-flag "^4.0.0"
+
+supports-preserve-symlinks-flag@^1.0.0:
+  version "1.0.0"
+  resolved "https://registry.yarnpkg.com/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz#6eda4bd344a3c94aea376d4cc31bc77311039e09"
+  integrity sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==
+
+svgo@^2.7.0:
+  version "2.8.0"
+  resolved "https://registry.yarnpkg.com/svgo/-/svgo-2.8.0.tgz#4ff80cce6710dc2795f0c7c74101e6764cfccd24"
+  integrity sha512-+N/Q9kV1+F+UeWYoSiULYo4xYSDQlTgb+ayMobAXPwMnLvop7oxKMo9OzIrX5x3eS4L4f2UHhc9axXwY8DpChg==
+  dependencies:
+    "@trysound/sax" "0.2.0"
+    commander "^7.2.0"
+    css-select "^4.1.3"
+    css-tree "^1.1.3"
+    csso "^4.2.0"
+    picocolors "^1.0.0"
+    stable "^0.1.8"
+
+tapable@^2.1.1, tapable@^2.2.0:
+  version "2.2.1"
+  resolved "https://registry.yarnpkg.com/tapable/-/tapable-2.2.1.tgz#1967a73ef4060a82f12ab96af86d52fdb76eeca0"
+  integrity sha512-GNzQvQTOIP6RyTfE2Qxb8ZVlNmw0n88vp1szwWRimP02mnTsx3Wtn5qRdqY9w2XduFNUgvOwhNnQsjwCp+kqaQ==
+
+tar@^6.0.2:
+  version "6.2.0"
+  resolved "https://registry.yarnpkg.com/tar/-/tar-6.2.0.tgz#b14ce49a79cb1cd23bc9b016302dea5474493f73"
+  integrity sha512-/Wo7DcT0u5HUV486xg675HtjNd3BXZ6xDbzsCUZPt5iw8bTQ63bP0Raut3mvro9u+CUyq7YQd8Cx55fsZXxqLQ==
+  dependencies:
+    chownr "^2.0.0"
+    fs-minipass "^2.0.0"
+    minipass "^5.0.0"
+    minizlib "^2.1.1"
+    mkdirp "^1.0.3"
+    yallist "^4.0.0"
+
+terser-webpack-plugin@^4.2.3:
+  version "4.2.3"
+  resolved "https://registry.yarnpkg.com/terser-webpack-plugin/-/terser-webpack-plugin-4.2.3.tgz#28daef4a83bd17c1db0297070adc07fc8cfc6a9a"
+  integrity sha512-jTgXh40RnvOrLQNgIkwEKnQ8rmHjHK4u+6UBEi+W+FPmvb+uo+chJXntKe7/3lW5mNysgSWD60KyesnhW8D6MQ==
+  dependencies:
+    cacache "^15.0.5"
+    find-cache-dir "^3.3.1"
+    jest-worker "^26.5.0"
+    p-limit "^3.0.2"
+    schema-utils "^3.0.0"
+    serialize-javascript "^5.0.1"
+    source-map "^0.6.1"
+    terser "^5.3.4"
+    webpack-sources "^1.4.3"
+
+terser-webpack-plugin@^5.3.3, terser-webpack-plugin@^5.3.7:
+  version "5.3.9"
+  resolved "https://registry.yarnpkg.com/terser-webpack-plugin/-/terser-webpack-plugin-5.3.9.tgz#832536999c51b46d468067f9e37662a3b96adfe1"
+  integrity sha512-ZuXsqE07EcggTWQjXUj+Aot/OMcD0bMKGgF63f7UxYcu5/AJF53aIpK1YoP5xR9l6s/Hy2b+t1AM0bLNPRuhwA==
+  dependencies:
+    "@jridgewell/trace-mapping" "^0.3.17"
+    jest-worker "^27.4.5"
+    schema-utils "^3.1.1"
+    serialize-javascript "^6.0.1"
+    terser "^5.16.8"
+
+terser@^5.16.8, terser@^5.3.4:
+  version "5.24.0"
+  resolved "https://registry.yarnpkg.com/terser/-/terser-5.24.0.tgz#4ae50302977bca4831ccc7b4fef63a3c04228364"
+  integrity sha512-ZpGR4Hy3+wBEzVEnHvstMvqpD/nABNelQn/z2r0fjVWGQsN3bpOLzQlqDxmb4CDZnXq5lpjnQ+mHQLAOpfM5iw==
+  dependencies:
+    "@jridgewell/source-map" "^0.3.3"
+    acorn "^8.8.2"
+    commander "^2.20.0"
+    source-map-support "~0.5.20"
+
+through2@^3.0.1:
+  version "3.0.2"
+  resolved "https://registry.yarnpkg.com/through2/-/through2-3.0.2.tgz#99f88931cfc761ec7678b41d5d7336b5b6a07bf4"
+  integrity sha512-enaDQ4MUyP2W6ZyT6EsMzqBPZaM/avg8iuo+l2d3QCs0J+6RaqkHV/2/lOwDTueBHeJ/2LG9lrLW3d5rWPucuQ==
+  dependencies:
+    inherits "^2.0.4"
+    readable-stream "2 || 3"
+
+to-fast-properties@^2.0.0:
+  version "2.0.0"
+  resolved "https://registry.yarnpkg.com/to-fast-properties/-/to-fast-properties-2.0.0.tgz#dc5e698cbd079265bc73e0377681a4e4e83f616e"
+  integrity sha512-/OaKK0xYrs3DmxRYqL/yDc+FxFUVYhDlXMhRmv3z915w2HF1tnN1omB354j8VUGO/hbRzyD6Y3sA7v7GS/ceog==
+
+to-regex-range@^5.0.1:
+  version "5.0.1"
+  resolved "https://registry.yarnpkg.com/to-regex-range/-/to-regex-range-5.0.1.tgz#1648c44aae7c8d988a326018ed72f5b4dd0392e4"
+  integrity sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==
+  dependencies:
+    is-number "^7.0.0"
+
+ts-loader@^9.3.0:
+  version "9.5.1"
+  resolved "https://registry.yarnpkg.com/ts-loader/-/ts-loader-9.5.1.tgz#63d5912a86312f1fbe32cef0859fb8b2193d9b89"
+  integrity sha512-rNH3sK9kGZcH9dYzC7CewQm4NtxJTjSEVRJ2DyBZR7f8/wcta+iV44UPCXc5+nzDzivKtlzV6c9P4e+oFhDLYg==
+  dependencies:
+    chalk "^4.1.0"
+    enhanced-resolve "^5.0.0"
+    micromatch "^4.0.0"
+    semver "^7.3.4"
+    source-map "^0.7.4"
+
+type-check@~0.3.2:
+  version "0.3.2"
+  resolved "https://registry.yarnpkg.com/type-check/-/type-check-0.3.2.tgz#5884cab512cf1d355e3fb784f30804b2b520db72"
+  integrity sha512-ZCmOJdvOWDBYJlzAoFkC+Q0+bUyEOS1ltgp1MGU03fqHG+dbi9tBFU2Rd9QKiDZFAYrhPh2JUf7rZRIuHRKtOg==
+  dependencies:
+    prelude-ls "~1.1.2"
+
+undici-types@~5.26.4:
+  version "5.26.5"
+  resolved "https://registry.yarnpkg.com/undici-types/-/undici-types-5.26.5.tgz#bcd539893d00b56e964fd2657a4866b221a65617"
+  integrity sha512-JlCMO+ehdEIKqlFxk6IfVoAUVmgz7cU7zD/h9XZ0qzeosSHmUJVOzSQvvYSYWXkFXC+IfLKSIffhv0sVZup6pA==
+
+unique-filename@^1.1.1:
+  version "1.1.1"
+  resolved "https://registry.yarnpkg.com/unique-filename/-/unique-filename-1.1.1.tgz#1d69769369ada0583103a1e6ae87681b56573230"
+  integrity sha512-Vmp0jIp2ln35UTXuryvjzkjGdRyf9b2lTXuSYUiPmzRcl3FDtYqAwOnTJkAngD9SWhnoJzDbTKwaOrZ+STtxNQ==
+  dependencies:
+    unique-slug "^2.0.0"
+
+unique-slug@^2.0.0:
+  version "2.0.2"
+  resolved "https://registry.yarnpkg.com/unique-slug/-/unique-slug-2.0.2.tgz#baabce91083fc64e945b0f3ad613e264f7cd4e6c"
+  integrity sha512-zoWr9ObaxALD3DOPfjPSqxt4fnZiWblxHIgeWqW8x7UqDzEtHEQLzji2cuJYQFCU6KmoJikOYAZlrTHHebjx2w==
+  dependencies:
+    imurmurhash "^0.1.4"
+
+universalify@^0.1.0:
+  version "0.1.2"
+  resolved "https://registry.yarnpkg.com/universalify/-/universalify-0.1.2.tgz#b646f69be3942dabcecc9d6639c80dc105efaa66"
+  integrity sha512-rBJeI5CXAlmy1pV+617WB9J63U6XcazHHF2f2dbJix4XzpUF0RS3Zbj0FGIOCAva5P/d/GBOYaACQ1w+0azUkg==
+
+update-browserslist-db@^1.0.13:
+  version "1.0.13"
+  resolved "https://registry.yarnpkg.com/update-browserslist-db/-/update-browserslist-db-1.0.13.tgz#3c5e4f5c083661bd38ef64b6328c26ed6c8248c4"
+  integrity sha512-xebP81SNcPuNpPP3uzeW1NYXxI3rxyJzF3pD6sH4jE7o/IX+WtSpwnVU+qIsDPyk0d3hmFQ7mjqc6AtV604hbg==
+  dependencies:
+    escalade "^3.1.1"
+    picocolors "^1.0.0"
+
+uri-js@^4.2.2:
+  version "4.4.1"
+  resolved "https://registry.yarnpkg.com/uri-js/-/uri-js-4.4.1.tgz#9b1a52595225859e55f669d928f88c6c57f2a77e"
+  integrity sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==
+  dependencies:
+    punycode "^2.1.0"
+
+util-deprecate@^1.0.1, util-deprecate@^1.0.2:
+  version "1.0.2"
+  resolved "https://registry.yarnpkg.com/util-deprecate/-/util-deprecate-1.0.2.tgz#450d4dc9fa70de732762fbd2d4a28981419a0ccf"
+  integrity sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==
+
+vanilla-colorful@0.7.2:
+  version "0.7.2"
+  resolved "https://registry.yarnpkg.com/vanilla-colorful/-/vanilla-colorful-0.7.2.tgz#3fb1f4b9f15b797e20fd1ce8e0364f33b073f4a2"
+  integrity sha512-z2YZusTFC6KnLERx1cgoIRX2CjPRP0W75N+3CC6gbvdX5Ch47rZkEMGO2Xnf+IEmi3RiFLxS18gayMA27iU7Kg==
+
+watchpack@^2.4.0:
+  version "2.4.0"
+  resolved "https://registry.yarnpkg.com/watchpack/-/watchpack-2.4.0.tgz#fa33032374962c78113f93c7f2fb4c54c9862a5d"
+  integrity sha512-Lcvm7MGST/4fup+ifyKi2hjyIAwcdI4HRgtvTpIUxBRhB+RFtUh8XtDOxUfctVCnhVi+QQj49i91OyvzkJl6cg==
+  dependencies:
+    glob-to-regexp "^0.4.1"
+    graceful-fs "^4.1.2"
+
+webpack-cli@^4.4.0:
+  version "4.10.0"
+  resolved "https://registry.yarnpkg.com/webpack-cli/-/webpack-cli-4.10.0.tgz#37c1d69c8d85214c5a65e589378f53aec64dab31"
+  integrity sha512-NLhDfH/h4O6UOy+0LSso42xvYypClINuMNBVVzX4vX98TmTaTUxwRbXdhucbFMd2qLaCTcLq/PdYrvi8onw90w==
+  dependencies:
+    "@discoveryjs/json-ext" "^0.5.0"
+    "@webpack-cli/configtest" "^1.2.0"
+    "@webpack-cli/info" "^1.5.0"
+    "@webpack-cli/serve" "^1.7.0"
+    colorette "^2.0.14"
+    commander "^7.0.0"
+    cross-spawn "^7.0.3"
+    fastest-levenshtein "^1.0.12"
+    import-local "^3.0.2"
+    interpret "^2.2.0"
+    rechoir "^0.7.0"
+    webpack-merge "^5.7.3"
+
+webpack-merge@^5.7.3:
+  version "5.10.0"
+  resolved "https://registry.yarnpkg.com/webpack-merge/-/webpack-merge-5.10.0.tgz#a3ad5d773241e9c682803abf628d4cd62b8a4177"
+  integrity sha512-+4zXKdx7UnO+1jaN4l2lHVD+mFvnlZQP/6ljaJVb4SZiwIKeUnrT5l0gkT8z+n4hKpC+jpOv6O9R+gLtag7pSA==
+  dependencies:
+    clone-deep "^4.0.1"
+    flat "^5.0.2"
+    wildcard "^2.0.0"
+
+webpack-sources@^1.4.3:
+  version "1.4.3"
+  resolved "https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-1.4.3.tgz#eedd8ec0b928fbf1cbfe994e22d2d890f330a933"
+  integrity sha512-lgTS3Xhv1lCOKo7SA5TjKXMjpSM4sBjNV5+q2bqesbSPs5FjGmU6jjtBSkX9b4qW87vDIsCIlUPOEhbZrMdjeQ==
+  dependencies:
+    source-list-map "^2.0.0"
+    source-map "~0.6.1"
+
+webpack-sources@^2.0.1:
+  version "2.3.1"
+  resolved "https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-2.3.1.tgz#570de0af163949fe272233c2cefe1b56f74511fd"
+  integrity sha512-y9EI9AO42JjEcrTJFOYmVywVZdKVUfOvDUPsJea5GIr1JOEGFVqwlY2K098fFoIjOkDzHn2AjRvM8dsBZu+gCA==
+  dependencies:
+    source-list-map "^2.0.1"
+    source-map "^0.6.1"
+
+webpack-sources@^3.2.3:
+  version "3.2.3"
+  resolved "https://registry.yarnpkg.com/webpack-sources/-/webpack-sources-3.2.3.tgz#2d4daab8451fd4b240cc27055ff6a0c2ccea0cde"
+  integrity sha512-/DyMEOrDgLKKIG0fmvtz+4dUX/3Ghozwgm6iPp8KRhvn+eQf9+Q7GWxVNMk3+uCPWfdXYC4ExGBckIXdFEfH1w==
+
+webpack@^5.51.1:
+  version "5.89.0"
+  resolved "https://registry.yarnpkg.com/webpack/-/webpack-5.89.0.tgz#56b8bf9a34356e93a6625770006490bf3a7f32dc"
+  integrity sha512-qyfIC10pOr70V+jkmud8tMfajraGCZMBWJtrmuBymQKCrLTRejBI8STDp1MCyZu/QTdZSeacCQYpYNQVOzX5kw==
+  dependencies:
+    "@types/eslint-scope" "^3.7.3"
+    "@types/estree" "^1.0.0"
+    "@webassemblyjs/ast" "^1.11.5"
+    "@webassemblyjs/wasm-edit" "^1.11.5"
+    "@webassemblyjs/wasm-parser" "^1.11.5"
+    acorn "^8.7.1"
+    acorn-import-assertions "^1.9.0"
+    browserslist "^4.14.5"
+    chrome-trace-event "^1.0.2"
+    enhanced-resolve "^5.15.0"
+    es-module-lexer "^1.2.1"
+    eslint-scope "5.1.1"
+    events "^3.2.0"
+    glob-to-regexp "^0.4.1"
+    graceful-fs "^4.2.9"
+    json-parse-even-better-errors "^2.3.1"
+    loader-runner "^4.2.0"
+    mime-types "^2.1.27"
+    neo-async "^2.6.2"
+    schema-utils "^3.2.0"
+    tapable "^2.1.1"
+    terser-webpack-plugin "^5.3.7"
+    watchpack "^2.4.0"
+    webpack-sources "^3.2.3"
+
+which@^2.0.1:
+  version "2.0.2"
+  resolved "https://registry.yarnpkg.com/which/-/which-2.0.2.tgz#7c6a8dd0a636a0327e10b59c9286eee93f3f51b1"
+  integrity sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==
+  dependencies:
+    isexe "^2.0.0"
+
+wildcard@^2.0.0:
+  version "2.0.1"
+  resolved "https://registry.yarnpkg.com/wildcard/-/wildcard-2.0.1.tgz#5ab10d02487198954836b6349f74fff961e10f67"
+  integrity sha512-CC1bOL87PIWSBhDcTrdeLo6eGT7mCFtrg0uIJtqJUFyK+eJnzl8A1niH56uu7KMa5XFrtiV+AQuHO3n7DsHnLQ==
+
+word-wrap@~1.2.3:
+  version "1.2.5"
+  resolved "https://registry.yarnpkg.com/word-wrap/-/word-wrap-1.2.5.tgz#d2c45c6dd4fbce621a66f136cbe328afd0410b34"
+  integrity sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==
+
+wrappy@1:
+  version "1.0.2"
+  resolved "https://registry.yarnpkg.com/wrappy/-/wrappy-1.0.2.tgz#b5243d8f3ec1aa35f1364605bc0d1036e30ab69f"
+  integrity sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==
+
+yallist@^4.0.0:
+  version "4.0.0"
+  resolved "https://registry.yarnpkg.com/yallist/-/yallist-4.0.0.tgz#9bb92790d9c0effec63be73519e11a35019a3a72"
+  integrity sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==
+
+yaml@^1.10.0, yaml@^1.10.2:
+  version "1.10.2"
+  resolved "https://registry.yarnpkg.com/yaml/-/yaml-1.10.2.tgz#2301c5ffbf12b467de8da2333a459e29e7920e4b"
+  integrity sha512-r3vXyErRCYJ7wg28yvBY5VSoAF8ZvlcW9/BwUzEtUsjvX/DKs24dIkuwjtuprwJJHsbyUbLApepYTR1BN4uHrg==
+
+yocto-queue@^0.1.0:
+  version "0.1.0"
+  resolved "https://registry.yarnpkg.com/yocto-queue/-/yocto-queue-0.1.0.tgz#0294eb3dee05028d31ee1a5fa2c556a6aaf10a1b"
+  integrity sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==
--
GitLab


From 38283609416448e8e90c7d447ea8d8d54f172775 Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Tue, 21 Nov 2023 13:56:55 -0600
Subject: [PATCH 02/17] This is necessary.

---
 linkit_media_library.ckeditor5.yml | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/linkit_media_library.ckeditor5.yml b/linkit_media_library.ckeditor5.yml
index 0f96f64..0442284 100644
--- a/linkit_media_library.ckeditor5.yml
+++ b/linkit_media_library.ckeditor5.yml
@@ -1,4 +1,7 @@
-linkit_media_library:
+linkit_media_library_link:
+  ckeditor5:
+    plugins:
+      - linkitMediaLibrary.LinkitMediaLibrary
   drupal:
     label: LinkIt media library
     library: linkit_media_library/ckeditor5
--
GitLab


From 24780d9679981f2b767b537264ecd9c7a7f12825 Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Tue, 21 Nov 2023 16:45:46 -0600
Subject: [PATCH 03/17] Got the button to show up.

---
 js/build/linkitMediaLibrary.js                |  2 +-
 .../linkitMediaLibrary/src/index.js           | 32 +++++++++++++++++++
 2 files changed, 33 insertions(+), 1 deletion(-)

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index 36799ab..fd5345d 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.CKEditor5=r():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=r())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,r,t)=>{e.exports=t("dll-reference CKEditor5.dll")("./src/core.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},r={};function t(o){var i=r[o];if(void 0!==i)return i.exports;var d=r[o]={exports:{}};return e[o](d,d.exports,t),d.exports}t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var o={};return(()=>{"use strict";t.d(o,{default:()=>i});var e=t("ckeditor5/src/core.js");class r extends e.Plugin{static get requires(){return[]}static get pluginName(){return"LinkitMediaLibrary"}}const i={LinkitMediaLibrary:r}})(),o=o.default})()));
\ No newline at end of file
+!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.CKEditor5=r():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=r())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [];\n  }\n\n  init() {\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('_addMediaLibraryButton()');\n    const { editor } = this;\n    const { locale } = editor;\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n\n    linkFormView.children.add(buttonView);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var _=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](_,_.exports,__webpack_require__),_.exports}__webpack_require__.d=(e,r)=>{for(var _ in r)__webpack_require__.o(r,_)&&!__webpack_require__.o(e,_)&&Object.defineProperty(e,_,{enumerable:!0,get:r[_]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index 36e808e..6ebc4a3 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -1,4 +1,6 @@
 import { Plugin } from 'ckeditor5/src/core';
+import { ButtonView } from 'ckeditor5/src/ui';
+

 class LinkitMediaLibrary extends Plugin {
   /**
@@ -8,6 +10,36 @@ class LinkitMediaLibrary extends Plugin {
     return [];
   }

+  init() {
+    const { editor } = this;
+
+    // TRICKY: Work-around until the CKEditor team offers a better solution:
+    // force the ContextualBalloon to get instantiated early thanks to
+    // DrupalImage not yet being optimized like
+    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.
+    if (editor.plugins.get('LinkUI')._createViews) {
+      editor.plugins.get('LinkUI')._createViews();
+    }
+
+    this._addMediaLibraryButton();
+  }
+
+  _addMediaLibraryButton() {
+    console.log('_addMediaLibraryButton()');
+    const { editor } = this;
+    const { locale } = editor;
+    const linkFormView = editor.plugins.get('LinkUI').formView;
+    const buttonView = new ButtonView(locale);
+
+    // Create the toolbar button.
+    buttonView.set({
+      label: editor.t('Media Library'),
+      withText: true,
+    });
+
+    linkFormView.children.add(buttonView);
+  }
+
   /**
    * @inheritdoc
    */
--
GitLab


From 193a5b5850f0fa2a828b54927a4be309dfbf3ae7 Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Tue, 28 Nov 2023 11:28:25 -0600
Subject: [PATCH 04/17] Attached an existing command to get something to
 happen.

---
 js/build/linkitMediaLibrary.js                  |  2 +-
 .../linkitMediaLibrary/src/index.js             | 17 +++++++++++++++++
 js/linkitMediaLibrary.js                        |  0
 3 files changed, 18 insertions(+), 1 deletion(-)
 delete mode 100644 js/linkitMediaLibrary.js

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index fd5345d..f73c0f5 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.CKEditor5=r():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=r())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [];\n  }\n\n  init() {\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('_addMediaLibraryButton()');\n    const { editor } = this;\n    const { locale } = editor;\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n\n    linkFormView.children.add(buttonView);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var _=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](_,_.exports,__webpack_require__),_.exports}__webpack_require__.d=(e,r)=>{for(var _ in r)__webpack_require__.o(r,_)&&!__webpack_require__.o(e,_)&&Object.defineProperty(e,_,{enumerable:!0,get:r[_]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
+!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var d=t[i]={exports:{}};return e[i](d,d.exports,r),d.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{"use strict";r.d(i,{default:()=>d});var e=r("ckeditor5/src/core.js"),t=r("ckeditor5/src/ui.js");class o extends e.Plugin{static get requires(){return[]}init(){const{editor:e}=this;e.plugins.get("LinkUI")._createViews&&e.plugins.get("LinkUI")._createViews(),this._addMediaLibraryButton()}_addMediaLibraryButton(){console.log("_addMediaLibraryButton()");const{editor:e}=this,{locale:r}=e,i=e.config.get("drupalMedia"),o=e.commands.get("insertDrupalMedia"),d=e.plugins.get("LinkUI").formView,s=new t.ButtonView(r),{libraryURL:n,openDialog:a,dialogSettings:l={}}=i;n&&"function"==typeof a&&(s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.set({label:e.t("Media Library"),withText:!0}),this.listenTo(s,"execute",(()=>{a(n,(({attributes:t})=>{e.execute("insertDrupalMedia",t)}),l)})),d.children.add(s))}static get pluginName(){return"LinkitMediaLibrary"}}const d={LinkitMediaLibrary:o}})(),i=i.default})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index 6ebc4a3..dda18a4 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -28,14 +28,31 @@ class LinkitMediaLibrary extends Plugin {
     console.log('_addMediaLibraryButton()');
     const { editor } = this;
     const { locale } = editor;
+    const options = editor.config.get('drupalMedia');
+    const command = editor.commands.get('insertDrupalMedia');
     const linkFormView = editor.plugins.get('LinkUI').formView;
     const buttonView = new ButtonView(locale);

+    const { libraryURL, openDialog, dialogSettings = {} } = options;
+    if (!libraryURL || typeof openDialog !== 'function') {
+      return;
+    }
+
+    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');
     // Create the toolbar button.
     buttonView.set({
       label: editor.t('Media Library'),
       withText: true,
     });
+    this.listenTo(buttonView, 'execute', () => {
+      openDialog(
+        libraryURL,
+        ({ attributes }) => {
+          editor.execute('insertDrupalMedia', attributes);
+        },
+        dialogSettings,
+      );
+    });

     linkFormView.children.add(buttonView);
   }
diff --git a/js/linkitMediaLibrary.js b/js/linkitMediaLibrary.js
deleted file mode 100644
index e69de29..0000000
--
GitLab


From 8215d7a3d38beb137e5350d3da9cb4b8c69d4a7b Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Tue, 28 Nov 2023 14:48:17 -0600
Subject: [PATCH 05/17] Added CKEditor5Plugin class and started moving logic
 over from existing location.

---
 linkit_media_library.ckeditor5.yml            |   9 ++
 .../CKEditor5Plugin/LinkitMediaLibrary.php    | 129 ++++++++++++++++++
 2 files changed, 138 insertions(+)
 create mode 100644 src/Plugin/CKEditor5Plugin/LinkitMediaLibrary.php

diff --git a/linkit_media_library.ckeditor5.yml b/linkit_media_library.ckeditor5.yml
index 0442284..56a7353 100644
--- a/linkit_media_library.ckeditor5.yml
+++ b/linkit_media_library.ckeditor5.yml
@@ -2,6 +2,15 @@ linkit_media_library_link:
   ckeditor5:
     plugins:
       - linkitMediaLibrary.LinkitMediaLibrary
+    config:
+      drupalMedia:
+        openDialog:
+          func:
+            name: Drupal.ckeditor5.openDialog
+            invoke: false
+        dialogSettings:
+          height: 75%
+          dialogClass: media-library-widget-modal
   drupal:
     label: LinkIt media library
     library: linkit_media_library/ckeditor5
diff --git a/src/Plugin/CKEditor5Plugin/LinkitMediaLibrary.php b/src/Plugin/CKEditor5Plugin/LinkitMediaLibrary.php
new file mode 100644
index 0000000..3798e87
--- /dev/null
+++ b/src/Plugin/CKEditor5Plugin/LinkitMediaLibrary.php
@@ -0,0 +1,129 @@
+<?php
+
+declare(strict_types = 1);
+
+namespace Drupal\linkit_media_library\Plugin\CKEditor5Plugin;
+
+use Drupal\ckeditor5\Plugin\CKEditor5PluginDefault;
+use Drupal\ckeditor5\Plugin\CKEditor5PluginDefinition;
+use Drupal\Core\Entity\EntityTypeManagerInterface;
+use Drupal\Core\StringTranslation\StringTranslationTrait;
+use Drupal\Core\Url;
+use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
+use Drupal\editor\EditorInterface;
+use Drupal\media_library\MediaLibraryState;
+use Symfony\Component\DependencyInjection\ContainerInterface;
+
+/**
+ * CKEditor 5 Media Library plugin.
+ *
+ * Provides media library support and options for the CKEditor 5 build.
+ *
+ * @internal
+ *   Plugin classes are internal.
+ */
+class LinkitMediaLibrary extends CKEditor5PluginDefault implements ContainerFactoryPluginInterface {
+
+  use StringTranslationTrait;
+
+  /**
+   * The media type entity storage.
+   *
+   * @var \Drupal\Core\Config\Entity\ConfigEntityStorageInterface
+   */
+  protected $mediaTypeStorage;
+
+  /**
+   * MediaLibrary constructor.
+   *
+   * @param array $configuration
+   *   A configuration array containing information about the plugin instance.
+   * @param string $plugin_id
+   *   The plugin_id for the plugin instance.
+   * @param \Drupal\ckeditor5\Plugin\CKEditor5PluginDefinition $plugin_definition
+   *   The plugin implementation definition.
+   * @param \Drupal\Core\Entity\EntityTypeManagerInterface $entity_type_manager
+   *   The entity type manager.
+   */
+  public function __construct(array $configuration, string $plugin_id, CKEditor5PluginDefinition $plugin_definition, EntityTypeManagerInterface $entity_type_manager) {
+    parent::__construct($configuration, $plugin_id, $plugin_definition);
+    $this->mediaTypeStorage = $entity_type_manager->getStorage('media_type');
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
+    return new static(
+      $configuration,
+      $plugin_id,
+      $plugin_definition,
+      $container->get('entity_type.manager'),
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function getDynamicPluginConfig(array $static_plugin_config, EditorInterface $editor): array {
+    if (!$editor->hasAssociatedFilterFormat()) {
+      return;
+    }
+
+    /** @var \Drupal\filter\FilterFormatInterface $filter_format */
+    $filter_format = $editor->getFilterFormat();
+
+    /** @var \Drupal\filter\FilterPluginCollection $filters */
+    $filters = $filter_format->filters();
+    if (!$filters->has('linkit') || !$filters->get('linkit')->status === TRUE) {
+      return;
+    }
+
+    // Get the profile ID from the editor settings.
+    $profile_id = $editor->getSettings()['plugins']['drupallink']['linkit_profile'];
+
+    /** @var \Drupal\Linkit\ProfileInterface $linkit_profile */
+    $profile = \Drupal::entityTypeManager()
+      ->getStorage('linkit_profile')
+      ->load($profile_id);
+
+    $has_media = FALSE;
+    $bundles = [];
+    foreach ($profile->getMatchers() as $matcher) {
+      if ($matcher->getPluginId() != 'entity:media') {
+        continue;
+      }
+      $has_media = TRUE;
+      $configuration = $matcher->getConfiguration();
+      $bundles = $configuration['settings']['bundles'];
+    }
+
+    if (!$has_media) {
+      return;
+    }
+
+    // If the types are not limited, we must load all media types.
+    if (empty($bundles)) {
+      $bundles = $this->mediaTypeStorage->getQuery()->execute();
+    }
+
+    /** @var \Drupal\media_library\MediaLibraryState $state */
+    $state = MediaLibraryState::create(
+      'linkit_media_library.opener.editor',
+      $bundles,
+      reset($bundles),
+      1,
+      ['filter_format_id' => $editor->getFilterFormat()->id()]
+    );
+
+    $library_url = Url::fromRoute('media_library.ui')
+      ->setOption('query', $state->all())
+      ->toString(TRUE)
+      ->getGeneratedUrl();
+
+    $dynamic_plugin_config = $static_plugin_config;
+    $dynamic_plugin_config['drupalMedia']['libraryURL'] = $library_url;
+    return $dynamic_plugin_config;
+  }
+
+}
--
GitLab


From 64f7b79204f5974b5522285b3dba94d5c0df3c01 Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Tue, 28 Nov 2023 15:55:41 -0600
Subject: [PATCH 06/17] Figured out how to get the correct dialog settings
 populated.

---
 js/build/linkitMediaLibrary.js                       |  2 +-
 js/ckeditor5_plugins/linkitMediaLibrary/src/index.js |  4 +++-
 linkit_media_library.ckeditor5.yml                   |  3 ++-
 src/Plugin/CKEditor5Plugin/LinkitMediaLibrary.php    | 11 ++++++-----
 4 files changed, 12 insertions(+), 8 deletions(-)

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index f73c0f5..5afde80 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var d=t[i]={exports:{}};return e[i](d,d.exports,r),d.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{"use strict";r.d(i,{default:()=>d});var e=r("ckeditor5/src/core.js"),t=r("ckeditor5/src/ui.js");class o extends e.Plugin{static get requires(){return[]}init(){const{editor:e}=this;e.plugins.get("LinkUI")._createViews&&e.plugins.get("LinkUI")._createViews(),this._addMediaLibraryButton()}_addMediaLibraryButton(){console.log("_addMediaLibraryButton()");const{editor:e}=this,{locale:r}=e,i=e.config.get("drupalMedia"),o=e.commands.get("insertDrupalMedia"),d=e.plugins.get("LinkUI").formView,s=new t.ButtonView(r),{libraryURL:n,openDialog:a,dialogSettings:l={}}=i;n&&"function"==typeof a&&(s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.set({label:e.t("Media Library"),withText:!0}),this.listenTo(s,"execute",(()=>{a(n,(({attributes:t})=>{e.execute("insertDrupalMedia",t)}),l)})),d.children.add(s))}static get pluginName(){return"LinkitMediaLibrary"}}const d={LinkitMediaLibrary:o}})(),i=i.default})()));
\ No newline at end of file
+!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{"use strict";r.d(i,{default:()=>n});var e=r("ckeditor5/src/core.js"),t=r("ckeditor5/src/ui.js");class o extends e.Plugin{static get requires(){return[]}init(){const{editor:e}=this;e.plugins.get("LinkUI")._createViews&&e.plugins.get("LinkUI")._createViews(),this._addMediaLibraryButton()}_addMediaLibraryButton(){console.log("_addMediaLibraryButton()");const{editor:e}=this,{locale:r}=e,i=e.config.get("linkitMediaLibrary");console.log("options",i);const o=e.commands.get("insertDrupalMedia"),n=e.plugins.get("LinkUI").formView,s=new t.ButtonView(r),{libraryURL:d,openDialog:a,dialogSettings:l={}}=i;console.log("libraryURL",d),d&&"function"==typeof a&&(s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.set({label:e.t("Media Library"),withText:!0}),this.listenTo(s,"execute",(()=>{a(d,(({attributes:t})=>{e.execute("insertDrupalMedia",t)}),l)})),n.children.add(s))}static get pluginName(){return"LinkitMediaLibrary"}}const n={LinkitMediaLibrary:o}})(),i=i.default})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index dda18a4..1755e33 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -28,12 +28,14 @@ class LinkitMediaLibrary extends Plugin {
     console.log('_addMediaLibraryButton()');
     const { editor } = this;
     const { locale } = editor;
-    const options = editor.config.get('drupalMedia');
+    const options = editor.config.get('linkitMediaLibrary');
+    console.log('options', options);
     const command = editor.commands.get('insertDrupalMedia');
     const linkFormView = editor.plugins.get('LinkUI').formView;
     const buttonView = new ButtonView(locale);

     const { libraryURL, openDialog, dialogSettings = {} } = options;
+    console.log('libraryURL', libraryURL);
     if (!libraryURL || typeof openDialog !== 'function') {
       return;
     }
diff --git a/linkit_media_library.ckeditor5.yml b/linkit_media_library.ckeditor5.yml
index 56a7353..68c45ae 100644
--- a/linkit_media_library.ckeditor5.yml
+++ b/linkit_media_library.ckeditor5.yml
@@ -3,7 +3,7 @@ linkit_media_library_link:
     plugins:
       - linkitMediaLibrary.LinkitMediaLibrary
     config:
-      drupalMedia:
+      linkitMediaLibrary:
         openDialog:
           func:
             name: Drupal.ckeditor5.openDialog
@@ -13,6 +13,7 @@ linkit_media_library_link:
           dialogClass: media-library-widget-modal
   drupal:
     label: LinkIt media library
+    class: Drupal\linkit_media_library\Plugin\CKEditor5Plugin\LinkitMediaLibrary
     library: linkit_media_library/ckeditor5
     elements:
       - <a aria-label title class id target="_blank" rel>
diff --git a/src/Plugin/CKEditor5Plugin/LinkitMediaLibrary.php b/src/Plugin/CKEditor5Plugin/LinkitMediaLibrary.php
index 3798e87..738439b 100644
--- a/src/Plugin/CKEditor5Plugin/LinkitMediaLibrary.php
+++ b/src/Plugin/CKEditor5Plugin/LinkitMediaLibrary.php
@@ -66,8 +66,9 @@ class LinkitMediaLibrary extends CKEditor5PluginDefault implements ContainerFact
    * {@inheritdoc}
    */
   public function getDynamicPluginConfig(array $static_plugin_config, EditorInterface $editor): array {
+
     if (!$editor->hasAssociatedFilterFormat()) {
-      return;
+      return $static_plugin_config;
     }

     /** @var \Drupal\filter\FilterFormatInterface $filter_format */
@@ -76,11 +77,11 @@ class LinkitMediaLibrary extends CKEditor5PluginDefault implements ContainerFact
     /** @var \Drupal\filter\FilterPluginCollection $filters */
     $filters = $filter_format->filters();
     if (!$filters->has('linkit') || !$filters->get('linkit')->status === TRUE) {
-      return;
+      return $static_plugin_config;
     }

     // Get the profile ID from the editor settings.
-    $profile_id = $editor->getSettings()['plugins']['drupallink']['linkit_profile'];
+    $profile_id = $editor->getSettings()['plugins']['linkit_extension']['linkit_profile'];

     /** @var \Drupal\Linkit\ProfileInterface $linkit_profile */
     $profile = \Drupal::entityTypeManager()
@@ -99,7 +100,7 @@ class LinkitMediaLibrary extends CKEditor5PluginDefault implements ContainerFact
     }

     if (!$has_media) {
-      return;
+      return $static_plugin_config;
     }

     // If the types are not limited, we must load all media types.
@@ -122,7 +123,7 @@ class LinkitMediaLibrary extends CKEditor5PluginDefault implements ContainerFact
       ->getGeneratedUrl();

     $dynamic_plugin_config = $static_plugin_config;
-    $dynamic_plugin_config['drupalMedia']['libraryURL'] = $library_url;
+    $dynamic_plugin_config['linkitMediaLibrary']['libraryURL'] = $library_url;
     return $dynamic_plugin_config;
   }

--
GitLab


From 12cae34544da476ddb1f4abde65b8a76d05bde23 Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Tue, 28 Nov 2023 16:35:06 -0600
Subject: [PATCH 07/17] Added a command to trigger when the dialog is closed. A
 little refactoring to make things work, follow established practices.

---
 js/build/linkitMediaLibrary.js                |  2 +-
 .../linkitMediaLibrary/src/index.js           |  7 ++---
 .../src/insertmedialibrarylink.js             | 20 ++++++++++++++
 .../src/linkitmedialibraryediting.js          | 27 +++++++++++++++++++
 4 files changed, 52 insertions(+), 4 deletions(-)
 create mode 100644 js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
 create mode 100644 js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index 5afde80..3276892 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,r)=>{e.exports=r("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};return(()=>{"use strict";r.d(i,{default:()=>n});var e=r("ckeditor5/src/core.js"),t=r("ckeditor5/src/ui.js");class o extends e.Plugin{static get requires(){return[]}init(){const{editor:e}=this;e.plugins.get("LinkUI")._createViews&&e.plugins.get("LinkUI")._createViews(),this._addMediaLibraryButton()}_addMediaLibraryButton(){console.log("_addMediaLibraryButton()");const{editor:e}=this,{locale:r}=e,i=e.config.get("linkitMediaLibrary");console.log("options",i);const o=e.commands.get("insertDrupalMedia"),n=e.plugins.get("LinkUI").formView,s=new t.ButtonView(r),{libraryURL:d,openDialog:a,dialogSettings:l={}}=i;console.log("libraryURL",d),d&&"function"==typeof a&&(s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.set({label:e.t("Media Library"),withText:!0}),this.listenTo(s,"execute",(()=>{a(d,(({attributes:t})=>{e.execute("insertDrupalMedia",t)}),l)})),n.children.add(s))}static get pluginName(){return"LinkitMediaLibrary"}}const n={LinkitMediaLibrary:o}})(),i=i.default})()));
\ No newline at end of file
+!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  init() {\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('_addMediaLibraryButton()');\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    linkFormView.children.add(buttonView);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log("Executed InsertMediaLibraryLink command.")\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?')},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index 1755e33..602a368 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -1,5 +1,6 @@
 import { Plugin } from 'ckeditor5/src/core';
 import { ButtonView } from 'ckeditor5/src/ui';
+import LinkitMediaLibraryEditing from './linkitmedialibraryediting';


 class LinkitMediaLibrary extends Plugin {
@@ -7,7 +8,7 @@ class LinkitMediaLibrary extends Plugin {
    * @inheritdoc
    */
   static get requires() {
-    return [];
+    return [LinkitMediaLibraryEditing];
   }

   init() {
@@ -30,7 +31,7 @@ class LinkitMediaLibrary extends Plugin {
     const { locale } = editor;
     const options = editor.config.get('linkitMediaLibrary');
     console.log('options', options);
-    const command = editor.commands.get('insertDrupalMedia');
+    const command = editor.commands.get('insertMediaLibraryLink');
     const linkFormView = editor.plugins.get('LinkUI').formView;
     const buttonView = new ButtonView(locale);

@@ -50,7 +51,7 @@ class LinkitMediaLibrary extends Plugin {
       openDialog(
         libraryURL,
         ({ attributes }) => {
-          editor.execute('insertDrupalMedia', attributes);
+          editor.execute('insertMediaLibraryLink', attributes);
         },
         dialogSettings,
       );
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
new file mode 100644
index 0000000..658082a
--- /dev/null
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
@@ -0,0 +1,20 @@
+/* eslint-disable import/no-extraneous-dependencies */
+// cspell:ignore insertmedialibrarylink
+import { Command } from 'ckeditor5/src/core';
+
+/**
+ * @module linkitMediaLibrary/insertmedialibrarylink
+ */
+
+/**
+ * The insert media library link command.
+ *
+ * The command is registered by the `LinkitMediaLibraryEditing` plugin as
+ * `insertMediaLibraryLink`.
+ */
+export default class InsertMediaLibraryLink extends Command {
+  execute(attributes) {
+    // @todo Insert the media path into the link URL box.
+    console.log("Executed InsertMediaLibraryLink command.")
+  }
+}
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js
new file mode 100644
index 0000000..110c56f
--- /dev/null
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js
@@ -0,0 +1,27 @@
+import { Plugin } from 'ckeditor5/src/core';
+import InsertMediaLibraryLink from './insertmedialibrarylink';
+
+/**
+ * @module linkitMediaLibrary/linkitmedialibraryediting
+ */
+
+/**
+ * The Drupal Media Editing plugin.
+ *
+ * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.
+ *
+ * @private
+ */
+export default class LinkitMediaLibraryEditing extends Plugin {
+
+
+  /**
+   * @inheritdoc
+   */
+  init() {
+    this.editor.commands.add(
+      'insertMediaLibraryLink',
+      new InsertMediaLibraryLink(this.editor),
+    );
+  }
+}
--
GitLab


From dc6391bba65d58f2d1dbbbc121f73abf76b1a62c Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Wed, 29 Nov 2023 16:33:04 -0600
Subject: [PATCH 08/17] Moving this logic into an event so it happens in the
 same way as Editor Advanced Link.

---
 js/build/linkitMediaLibrary.js                 |  2 +-
 .../linkitMediaLibrary/src/index.js            | 18 ++++++++++++++++--
 2 files changed, 17 insertions(+), 3 deletions(-)

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index 3276892..0e9e86f 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  init() {\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('_addMediaLibraryButton()');\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    linkFormView.children.add(buttonView);\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log("Executed InsertMediaLibraryLink command.")\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?')},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
+!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  init() {\n    console.log('LinkitMediaLibrary.init')\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('LinkitMediaLibrary._addMediaLibraryButton()');\n\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // Copy the same solution from LinkUI as pointed out on\n    // https://www.drupal.org/project/drupal/issues/3317769#comment-14985648 and\n    // https://git.drupalcode.org/project/drupal/-/merge_requests/2909/diffs?commit_id=cc2cece3be1a9513b02a53d8a6862a6841ef4d5a.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        const linkFormView = editor.plugins.get('LinkUI').formView;\n        if (newValue === oldValue || newValue !== linkFormView) {\n          return;\n        }\n        linkFormView.children.add(buttonView, 1);\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log("Executed InsertMediaLibraryLink command.")\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?')},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index 602a368..04ba4ae 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -12,6 +12,7 @@ class LinkitMediaLibrary extends Plugin {
   }

   init() {
+    console.log('LinkitMediaLibrary.init')
     const { editor } = this;

     // TRICKY: Work-around until the CKEditor team offers a better solution:
@@ -26,7 +27,8 @@ class LinkitMediaLibrary extends Plugin {
   }

   _addMediaLibraryButton() {
-    console.log('_addMediaLibraryButton()');
+    console.log('LinkitMediaLibrary._addMediaLibraryButton()');
+
     const { editor } = this;
     const { locale } = editor;
     const options = editor.config.get('linkitMediaLibrary');
@@ -57,7 +59,19 @@ class LinkitMediaLibrary extends Plugin {
       );
     });

-    linkFormView.children.add(buttonView);
+    // Copy the same solution from LinkUI as pointed out on
+    // https://www.drupal.org/project/drupal/issues/3317769#comment-14985648 and
+    // https://git.drupalcode.org/project/drupal/-/merge_requests/2909/diffs?commit_id=cc2cece3be1a9513b02a53d8a6862a6841ef4d5a.
+    editor.plugins
+      .get('ContextualBalloon')
+      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {
+        const linkFormView = editor.plugins.get('LinkUI').formView;
+        if (newValue === oldValue || newValue !== linkFormView) {
+          return;
+        }
+        linkFormView.children.add(buttonView, 1);
+      }
+    )
   }

   /**
--
GitLab


From 0f76b4d85b74d35290732884eec72de83f87c401 Mon Sep 17 00:00:00 2001
From: Gary Ridgway <gary-ridgway@uiowa.edu>
Date: Thu, 30 Nov 2023 13:39:12 -0600
Subject: [PATCH 09/17] Only add the button once.

---
 js/build/linkitMediaLibrary.js                       | 2 +-
 js/ckeditor5_plugins/linkitMediaLibrary/src/index.js | 7 ++++++-
 2 files changed, 7 insertions(+), 2 deletions(-)

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index 0e9e86f..9a0da50 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  init() {\n    console.log('LinkitMediaLibrary.init')\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('LinkitMediaLibrary._addMediaLibraryButton()');\n\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // Copy the same solution from LinkUI as pointed out on\n    // https://www.drupal.org/project/drupal/issues/3317769#comment-14985648 and\n    // https://git.drupalcode.org/project/drupal/-/merge_requests/2909/diffs?commit_id=cc2cece3be1a9513b02a53d8a6862a6841ef4d5a.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        const linkFormView = editor.plugins.get('LinkUI').formView;\n        if (newValue === oldValue || newValue !== linkFormView) {\n          return;\n        }\n        linkFormView.children.add(buttonView, 1);\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log("Executed InsertMediaLibraryLink command.")\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?')},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
+!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  buttonAdded = false;\n\n  init() {\n    console.log('LinkitMediaLibrary.init')\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('LinkitMediaLibrary._addMediaLibraryButton()');\n\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    buttonView.set( 'class', 'ck-media-library' );\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // Copy the same solution from LinkUI as pointed out on\n    // https://www.drupal.org/project/drupal/issues/3317769#comment-14985648 and\n    // https://git.drupalcode.org/project/drupal/-/merge_requests/2909/diffs?commit_id=cc2cece3be1a9513b02a53d8a6862a6841ef4d5a.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        const linkFormView = editor.plugins.get('LinkUI').formView;\n        if (this.buttonAdded || newValue === oldValue || newValue !== linkFormView) {\n          return;\n        }\n\n        linkFormView.children.add(buttonView, 1);\n        this.buttonAdded = true;\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log("Executed InsertMediaLibraryLink command.")\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?')},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index 04ba4ae..c6fdb8a 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -11,6 +11,8 @@ class LinkitMediaLibrary extends Plugin {
     return [LinkitMediaLibraryEditing];
   }

+  buttonAdded = false;
+
   init() {
     console.log('LinkitMediaLibrary.init')
     const { editor } = this;
@@ -49,6 +51,7 @@ class LinkitMediaLibrary extends Plugin {
       label: editor.t('Media Library'),
       withText: true,
     });
+    buttonView.set( 'class', 'ck-media-library' );
     this.listenTo(buttonView, 'execute', () => {
       openDialog(
         libraryURL,
@@ -66,10 +69,12 @@ class LinkitMediaLibrary extends Plugin {
       .get('ContextualBalloon')
       .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {
         const linkFormView = editor.plugins.get('LinkUI').formView;
-        if (newValue === oldValue || newValue !== linkFormView) {
+        if (this.buttonAdded || newValue === oldValue || newValue !== linkFormView) {
           return;
         }
+
         linkFormView.children.add(buttonView, 1);
+        this.buttonAdded = true;
       }
     )
   }
--
GitLab


From a6715f3764932bea7afe0863ebe764ee6d2ccce1 Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Fri, 1 Dec 2023 10:43:22 -0600
Subject: [PATCH 10/17] Updated a comment to reflect how we are working around
 the EAL plugin currently. Some non-working code that I thought might work.

---
 js/build/linkitMediaLibrary.js                         |  2 +-
 js/ckeditor5_plugins/linkitMediaLibrary/src/index.js   |  6 +++---
 .../linkitMediaLibrary/src/insertmedialibrarylink.js   | 10 +++++++++-
 3 files changed, 13 insertions(+), 5 deletions(-)

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index 9a0da50..0451d33 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  buttonAdded = false;\n\n  init() {\n    console.log('LinkitMediaLibrary.init')\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('LinkitMediaLibrary._addMediaLibraryButton()');\n\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    buttonView.set( 'class', 'ck-media-library' );\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // Copy the same solution from LinkUI as pointed out on\n    // https://www.drupal.org/project/drupal/issues/3317769#comment-14985648 and\n    // https://git.drupalcode.org/project/drupal/-/merge_requests/2909/diffs?commit_id=cc2cece3be1a9513b02a53d8a6862a6841ef4d5a.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        const linkFormView = editor.plugins.get('LinkUI').formView;\n        if (this.buttonAdded || newValue === oldValue || newValue !== linkFormView) {\n          return;\n        }\n\n        linkFormView.children.add(buttonView, 1);\n        this.buttonAdded = true;\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log("Executed InsertMediaLibraryLink command.")\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?')},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
+!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  buttonAdded = false;\n\n  init() {\n    console.log('LinkitMediaLibrary.init')\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('LinkitMediaLibrary._addMediaLibraryButton()');\n\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    buttonView.set( 'class', 'ck-media-library' );\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // For now, we are adding the button inside this event because Editor\n    // Advanced Link is adding its form element so the Link UI form view in the\n    // same way and if we don't do it like this, our changes get overridden.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        const linkFormView = editor.plugins.get('LinkUI').formView;\n        if (this.buttonAdded || newValue === oldValue || newValue !== linkFormView) {\n          return;\n        }\n\n        linkFormView.children.add(buttonView, 1);\n        this.buttonAdded = true;\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log(\"Executed InsertMediaLibraryLink command.\");\n    console.log(\"attributes\", attributes);\n    console.log(\"this\", this);\n    const { editor } = this;\n    const linkit = editor.plugins.get(\"Linkit\")\n\n    linkit.set('entityType', attributes['data-entity-type']);\n    linkit.set('entityUuid', attributes['data-entity-uuid']);\n    linkit.set('entitySubstitution', attributes['data-entity-substitution']);\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index c6fdb8a..6ddebf7 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -62,9 +62,9 @@ class LinkitMediaLibrary extends Plugin {
       );
     });

-    // Copy the same solution from LinkUI as pointed out on
-    // https://www.drupal.org/project/drupal/issues/3317769#comment-14985648 and
-    // https://git.drupalcode.org/project/drupal/-/merge_requests/2909/diffs?commit_id=cc2cece3be1a9513b02a53d8a6862a6841ef4d5a.
+    // For now, we are adding the button inside this event because Editor
+    // Advanced Link is adding its form element so the Link UI form view in the
+    // same way and if we don't do it like this, our changes get overridden.
     editor.plugins
       .get('ContextualBalloon')
       .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
index 658082a..b7e80b0 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
@@ -15,6 +15,14 @@ import { Command } from 'ckeditor5/src/core';
 export default class InsertMediaLibraryLink extends Command {
   execute(attributes) {
     // @todo Insert the media path into the link URL box.
-    console.log("Executed InsertMediaLibraryLink command.")
+    console.log("Executed InsertMediaLibraryLink command.");
+    console.log("attributes", attributes);
+    console.log("this", this);
+    const { editor } = this;
+    const linkit = editor.plugins.get("Linkit")
+
+    linkit.set('entityType', attributes['data-entity-type']);
+    linkit.set('entityUuid', attributes['data-entity-uuid']);
+    linkit.set('entitySubstitution', attributes['data-entity-substitution']);
   }
 }
--
GitLab


From e635d4727b669cb3d08551032227b911f5f5db86 Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Fri, 1 Dec 2023 13:25:54 -0600
Subject: [PATCH 11/17] Some cleanup to remove debugging code and stuff that
 does not seem to actually be necessary.

---
 js/build/linkitMediaLibrary.js                |  2 +-
 .../linkitMediaLibrary/src/index.js           | 22 ++++---------------
 .../src/insertmedialibrarylink.js             |  9 ++++----
 3 files changed, 9 insertions(+), 24 deletions(-)

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index 0451d33..685772b 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  buttonAdded = false;\n\n  init() {\n    console.log('LinkitMediaLibrary.init')\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    if (editor.plugins.get('LinkUI')._createViews) {\n      editor.plugins.get('LinkUI')._createViews();\n    }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('LinkitMediaLibrary._addMediaLibraryButton()');\n\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    buttonView.set( 'class', 'ck-media-library' );\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // For now, we are adding the button inside this event because Editor\n    // Advanced Link is adding its form element so the Link UI form view in the\n    // same way and if we don't do it like this, our changes get overridden.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        const linkFormView = editor.plugins.get('LinkUI').formView;\n        if (this.buttonAdded || newValue === oldValue || newValue !== linkFormView) {\n          return;\n        }\n\n        linkFormView.children.add(buttonView, 1);\n        this.buttonAdded = true;\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log(\"Executed InsertMediaLibraryLink command.\");\n    console.log(\"attributes\", attributes);\n    console.log(\"this\", this);\n    const { editor } = this;\n    const linkit = editor.plugins.get(\"Linkit\")\n\n    linkit.set('entityType', attributes['data-entity-type']);\n    linkit.set('entityUuid', attributes['data-entity-uuid']);\n    linkit.set('entitySubstitution', attributes['data-entity-substitution']);\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
+!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  buttonAdded = false;\n\n  init() {\n    console.log('LinkitMediaLibrary.init')\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    // if (editor.plugins.get('LinkUI')._createViews) {\n    //   editor.plugins.get('LinkUI')._createViews();\n    // }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('LinkitMediaLibrary._addMediaLibraryButton()');\n\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    // buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    buttonView.set( 'class', 'ck-media-library' );\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // For now, we are adding the button inside this event because Editor\n    // Advanced Link is adding its form element so the Link UI form view in the\n    // same way and if we don't do it like this, our changes get overridden.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        if (this.buttonAdded || newValue === oldValue || newValue !== linkFormView) {\n          return;\n        }\n\n        linkFormView.children.add(buttonView, 1);\n        this.buttonAdded = true;\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log("Executed InsertMediaLibraryLink command.");\n    console.log("attributes", attributes);\n    const { editor } = this;\n    const linkit = editor.plugins.get("Linkit");\n    console.log("linkit", linkit);\n\n    linkit.set(\'entityType\', attributes[\'data-entity-type\']);\n    linkit.set(\'entityUuid\', attributes[\'data-entity-uuid\']);\n    linkit.set(\'entitySubstitution\', attributes[\'data-entity-substitution\']);\n    console.log("linkit", linkit);\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?')},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index 6ddebf7..4b349d6 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -4,6 +4,9 @@ import LinkitMediaLibraryEditing from './linkitmedialibraryediting';


 class LinkitMediaLibrary extends Plugin {
+
+  buttonAdded = false;
+
   /**
    * @inheritdoc
    */
@@ -11,41 +14,25 @@ class LinkitMediaLibrary extends Plugin {
     return [LinkitMediaLibraryEditing];
   }

-  buttonAdded = false;
-
   init() {
-    console.log('LinkitMediaLibrary.init')
     const { editor } = this;

-    // TRICKY: Work-around until the CKEditor team offers a better solution:
-    // force the ContextualBalloon to get instantiated early thanks to
-    // DrupalImage not yet being optimized like
-    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.
-    if (editor.plugins.get('LinkUI')._createViews) {
-      editor.plugins.get('LinkUI')._createViews();
-    }
-
     this._addMediaLibraryButton();
   }

   _addMediaLibraryButton() {
-    console.log('LinkitMediaLibrary._addMediaLibraryButton()');
-
     const { editor } = this;
     const { locale } = editor;
     const options = editor.config.get('linkitMediaLibrary');
-    console.log('options', options);
-    const command = editor.commands.get('insertMediaLibraryLink');
     const linkFormView = editor.plugins.get('LinkUI').formView;
     const buttonView = new ButtonView(locale);

     const { libraryURL, openDialog, dialogSettings = {} } = options;
-    console.log('libraryURL', libraryURL);
     if (!libraryURL || typeof openDialog !== 'function') {
       return;
     }

-    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');
+    // buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');
     // Create the toolbar button.
     buttonView.set({
       label: editor.t('Media Library'),
@@ -68,7 +55,6 @@ class LinkitMediaLibrary extends Plugin {
     editor.plugins
       .get('ContextualBalloon')
       .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {
-        const linkFormView = editor.plugins.get('LinkUI').formView;
         if (this.buttonAdded || newValue === oldValue || newValue !== linkFormView) {
           return;
         }
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
index b7e80b0..17395ac 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
@@ -14,15 +14,14 @@ import { Command } from 'ckeditor5/src/core';
  */
 export default class InsertMediaLibraryLink extends Command {
   execute(attributes) {
-    // @todo Insert the media path into the link URL box.
-    console.log("Executed InsertMediaLibraryLink command.");
-    console.log("attributes", attributes);
-    console.log("this", this);
     const { editor } = this;
-    const linkit = editor.plugins.get("Linkit")
+    const linkit = editor.plugins.get("Linkit");

+    // Add the media attributes into the Linkit plugin.
     linkit.set('entityType', attributes['data-entity-type']);
     linkit.set('entityUuid', attributes['data-entity-uuid']);
     linkit.set('entitySubstitution', attributes['data-entity-substitution']);
+
+    // @todo Either insert a link or just re-open the link UI balloon.
   }
 }
--
GitLab


From 8927ed17e4a802b875ccc0a28881858c970c41fd Mon Sep 17 00:00:00 2001
From: Gary Ridgway <gary-ridgway@uiowa.edu>
Date: Mon, 4 Dec 2023 11:58:27 -0600
Subject: [PATCH 12/17] Fixing merge conflicts.

---
 css/mediaLibrary.css                          |  5 +++
 js/build/linkitMediaLibrary.js                |  2 +-
 .../linkitMediaLibrary/src/index.js           | 31 ++++++++++++++++---
 linkit_media_library.libraries.yml            |  3 ++
 4 files changed, 35 insertions(+), 6 deletions(-)
 create mode 100644 css/mediaLibrary.css

diff --git a/css/mediaLibrary.css b/css/mediaLibrary.css
new file mode 100644
index 0000000..4626587
--- /dev/null
+++ b/css/mediaLibrary.css
@@ -0,0 +1,5 @@
+.ck.ck-link-form.ck-link-form_layout-vertical button.ck-media-library {
+  width: 100%;
+  border-top: unset;
+  padding: var(--ck-spacing-small) var(--ck-spacing-large);
+}
diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index 685772b..d92efe6 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  buttonAdded = false;\n\n  init() {\n    console.log('LinkitMediaLibrary.init')\n    const { editor } = this;\n\n    // TRICKY: Work-around until the CKEditor team offers a better solution:\n    // force the ContextualBalloon to get instantiated early thanks to\n    // DrupalImage not yet being optimized like\n    // https://github.com/ckeditor/ckeditor5/commit/c276c45a934e4ad7c2a8ccd0bd9a01f6442d4cd3#diff-1753317a1a0b947ca8b66581b533616a5309f6d4236a527b9d21ba03e13a78d8.\n    // if (editor.plugins.get('LinkUI')._createViews) {\n    //   editor.plugins.get('LinkUI')._createViews();\n    // }\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    console.log('LinkitMediaLibrary._addMediaLibraryButton()');\n\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    console.log('options', options);\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    console.log('libraryURL', libraryURL);\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    // buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    buttonView.set( 'class', 'ck-media-library' );\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // For now, we are adding the button inside this event because Editor\n    // Advanced Link is adding its form element so the Link UI form view in the\n    // same way and if we don't do it like this, our changes get overridden.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        if (this.buttonAdded || newValue === oldValue || newValue !== linkFormView) {\n          return;\n        }\n\n        linkFormView.children.add(buttonView, 1);\n        this.buttonAdded = true;\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    // @todo Insert the media path into the link URL box.\n    console.log("Executed InsertMediaLibraryLink command.");\n    console.log("attributes", attributes);\n    const { editor } = this;\n    const linkit = editor.plugins.get("Linkit");\n    console.log("linkit", linkit);\n\n    linkit.set(\'entityType\', attributes[\'data-entity-type\']);\n    linkit.set(\'entityUuid\', attributes[\'data-entity-uuid\']);\n    linkit.set(\'entitySubstitution\', attributes[\'data-entity-substitution\']);\n    console.log("linkit", linkit);\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?')},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
+!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n  buttonAdded = false;\n\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  init() {\n    const { editor } = this;\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    buttonView.set( 'class', 'ck-media-library' );\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // For now, we are adding the button inside this event because Editor\n    // Advanced Link is adding its form element so the Link UI form view in the\n    // same way and if we don't do it like this, our changes get overridden.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        if (!this.buttonAdded && newValue !== oldValue && newValue === linkFormView) {\n          linkFormView.children.add(buttonView, 1);\n          this.buttonAdded = true;\n        }\n\n        // Every time we trigger the menu, we need to put the\n        //     save and close buttons at the bottom because of the\n        //     way that editorAdvancedLink rearranges things.\n        const buttons = [\n          linkFormView.children.find((child) => child.template.attributes.class.indexOf('ck-button-save') > -1),\n          linkFormView.children.find((child) => child.template.attributes.class.indexOf('ck-button-cancel') > -1),\n        ];\n\n        buttons.forEach((item, i) => {\n          linkFormView.children.remove(item);\n          linkFormView.children.add(item);\n\n          if (linkFormView._focusables.has(item)) {\n\n            linkFormView._focusables.remove(item);\n            linkFormView._focusables.add(item);\n\n            linkFormView.focusTracker.remove(item);\n            linkFormView.focusTracker.add(item);\n          }\n        });\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    const { editor } = this;\n    const linkit = editor.plugins.get(\"Linkit\");\n\n    // Add the media attributes into the Linkit plugin.\n    linkit.set('entityType', attributes['data-entity-type']);\n    linkit.set('entityUuid', attributes['data-entity-uuid']);\n    linkit.set('entitySubstitution', attributes['data-entity-substitution']);\n\n    // @todo Either insert a link or just re-open the link UI balloon.\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index 4b349d6..5d2e499 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -25,6 +25,7 @@ class LinkitMediaLibrary extends Plugin {
     const { locale } = editor;
     const options = editor.config.get('linkitMediaLibrary');
     const linkFormView = editor.plugins.get('LinkUI').formView;
+    const command = editor.commands.get('insertMediaLibraryLink');
     const buttonView = new ButtonView(locale);

     const { libraryURL, openDialog, dialogSettings = {} } = options;
@@ -32,7 +33,7 @@ class LinkitMediaLibrary extends Plugin {
       return;
     }

-    // buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');
+    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');
     // Create the toolbar button.
     buttonView.set({
       label: editor.t('Media Library'),
@@ -55,12 +56,32 @@ class LinkitMediaLibrary extends Plugin {
     editor.plugins
       .get('ContextualBalloon')
       .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {
-        if (this.buttonAdded || newValue === oldValue || newValue !== linkFormView) {
-          return;
+        if (!this.buttonAdded && newValue !== oldValue && newValue === linkFormView) {
+          linkFormView.children.add(buttonView, 1);
+          this.buttonAdded = true;
         }

-        linkFormView.children.add(buttonView, 1);
-        this.buttonAdded = true;
+        // Every time we trigger the menu, we need to put the
+        //     save and close buttons at the bottom because of the
+        //     way that editorAdvancedLink rearranges things.
+        const buttons = [
+          linkFormView.children.find((child) => child.template.attributes.class.indexOf('ck-button-save') > -1),
+          linkFormView.children.find((child) => child.template.attributes.class.indexOf('ck-button-cancel') > -1),
+        ];
+
+        buttons.forEach((item, i) => {
+          linkFormView.children.remove(item);
+          linkFormView.children.add(item);
+
+          if (linkFormView._focusables.has(item)) {
+
+            linkFormView._focusables.remove(item);
+            linkFormView._focusables.add(item);
+
+            linkFormView.focusTracker.remove(item);
+            linkFormView.focusTracker.add(item);
+          }
+        });
       }
     )
   }
diff --git a/linkit_media_library.libraries.yml b/linkit_media_library.libraries.yml
index 81c961d..551db49 100644
--- a/linkit_media_library.libraries.yml
+++ b/linkit_media_library.libraries.yml
@@ -2,6 +2,9 @@ ckeditor5:
   version: VERSION
   js:
     js/build/linkitMediaLibrary.js: { preprocess: false, minified: true }
+  css:
+    component:
+      css/mediaLibrary.css: {}
   dependencies:
     - core/drupal
     - ckeditor5/ckeditor5
--
GitLab


From 4b901d4df17c69ee3080596f575bac4a9d963799 Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Tue, 5 Dec 2023 12:29:42 -0600
Subject: [PATCH 13/17] Renamed CSS file to be inline with core naming
 convention.

---
 css/{mediaLibrary.css => linkit-media-library.css} | 0
 linkit_media_library.libraries.yml                 | 2 +-
 2 files changed, 1 insertion(+), 1 deletion(-)
 rename css/{mediaLibrary.css => linkit-media-library.css} (100%)

diff --git a/css/mediaLibrary.css b/css/linkit-media-library.css
similarity index 100%
rename from css/mediaLibrary.css
rename to css/linkit-media-library.css
diff --git a/linkit_media_library.libraries.yml b/linkit_media_library.libraries.yml
index 551db49..7b4ce75 100644
--- a/linkit_media_library.libraries.yml
+++ b/linkit_media_library.libraries.yml
@@ -4,7 +4,7 @@ ckeditor5:
     js/build/linkitMediaLibrary.js: { preprocess: false, minified: true }
   css:
     component:
-      css/mediaLibrary.css: {}
+      css/linkit-media-library.css: {}
   dependencies:
     - core/drupal
     - ckeditor5/ckeditor5
--
GitLab


From fbc42620d915ca6d9b695c95ac229ade58a22ab8 Mon Sep 17 00:00:00 2001
From: Sean Adams-Hiett <sean-adams-hiett@uiowa.edu>
Date: Tue, 5 Dec 2023 14:23:30 -0600
Subject: [PATCH 14/17] Got the basic functionality working. Cleaned up some
 stuff that appears to be unnecessary.

---
 js/build/linkitMediaLibrary.js                |  2 +-
 .../linkitMediaLibrary/src/index.js           | 28 +++++++++++++++----
 .../src/insertmedialibrarylink.js             | 27 ------------------
 .../src/linkitmedialibraryediting.js          | 27 ------------------
 4 files changed, 23 insertions(+), 61 deletions(-)
 delete mode 100644 js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
 delete mode 100644 js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index d92efe6..9b2f437 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.CKEditor5=i():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=i())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n/* harmony import */ var _linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./linkitmedialibraryediting */ \"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js\");\n\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n  buttonAdded = false;\n\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [_linkitmedialibraryediting__WEBPACK_IMPORTED_MODULE_2__[\"default\"]];\n  }\n\n  init() {\n    const { editor } = this;\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    const { editor } = this;\n    const { locale } = editor;\n    const options = editor.config.get('linkitMediaLibrary');\n    const linkFormView = editor.plugins.get('LinkUI').formView;\n    const command = editor.commands.get('insertMediaLibraryLink');\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    buttonView.set( 'class', 'ck-media-library' );\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          editor.execute('insertMediaLibraryLink', attributes);\n        },\n        dialogSettings,\n      );\n    });\n\n    // For now, we are adding the button inside this event because Editor\n    // Advanced Link is adding its form element so the Link UI form view in the\n    // same way and if we don't do it like this, our changes get overridden.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n        if (!this.buttonAdded && newValue !== oldValue && newValue === linkFormView) {\n          linkFormView.children.add(buttonView, 1);\n          this.buttonAdded = true;\n        }\n\n        // Every time we trigger the menu, we need to put the\n        //     save and close buttons at the bottom because of the\n        //     way that editorAdvancedLink rearranges things.\n        const buttons = [\n          linkFormView.children.find((child) => child.template.attributes.class.indexOf('ck-button-save') > -1),\n          linkFormView.children.find((child) => child.template.attributes.class.indexOf('ck-button-cancel') > -1),\n        ];\n\n        buttons.forEach((item, i) => {\n          linkFormView.children.remove(item);\n          linkFormView.children.add(item);\n\n          if (linkFormView._focusables.has(item)) {\n\n            linkFormView._focusables.remove(item);\n            linkFormView._focusables.add(item);\n\n            linkFormView.focusTracker.remove(item);\n            linkFormView.focusTracker.add(item);\n          }\n        });\n      }\n    )\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InsertMediaLibraryLink)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* eslint-disable import/no-extraneous-dependencies */\n// cspell:ignore insertmedialibrarylink\n\n\n/**\n * @module linkitMediaLibrary/insertmedialibrarylink\n */\n\n/**\n * The insert media library link command.\n *\n * The command is registered by the `LinkitMediaLibraryEditing` plugin as\n * `insertMediaLibraryLink`.\n */\nclass InsertMediaLibraryLink extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Command {\n  execute(attributes) {\n    const { editor } = this;\n    const linkit = editor.plugins.get(\"Linkit\");\n\n    // Add the media attributes into the Linkit plugin.\n    linkit.set('entityType', attributes['data-entity-type']);\n    linkit.set('entityUuid', attributes['data-entity-uuid']);\n    linkit.set('entitySubstitution', attributes['data-entity-substitution']);\n\n    // @todo Either insert a link or just re-open the link UI balloon.\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js?")},"./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ LinkitMediaLibraryEditing)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ "ckeditor5/src/core.js");\n/* harmony import */ var _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./insertmedialibrarylink */ "./js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js");\n\n\n\n/**\n * @module linkitMediaLibrary/linkitmedialibraryediting\n */\n\n/**\n * The Drupal Media Editing plugin.\n *\n * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.\n *\n * @private\n */\nclass LinkitMediaLibraryEditing extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n\n  /**\n   * @inheritdoc\n   */\n  init() {\n    this.editor.commands.add(\n      \'insertMediaLibraryLink\',\n      new _insertmedialibrarylink__WEBPACK_IMPORTED_MODULE_1__["default"](this.editor),\n    );\n  }\n}\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js?')},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var i=__webpack_module_cache__[e];if(void 0!==i)return i.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,i)=>{for(var r in i)__webpack_require__.o(i,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},__webpack_require__.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
+!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function i(r){var o=t[r];if(void 0!==o)return o.exports;var d=t[r]={exports:{}};return e[r](d,d.exports,i),d.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};return(()=>{"use strict";i.d(r,{default:()=>d});var e=i("ckeditor5/src/core.js"),t=i("ckeditor5/src/ui.js");class o extends e.Plugin{buttonAdded=!1;static get requires(){return[]}init(){const{editor:e}=this;this._addMediaLibraryButton()}_addMediaLibraryButton(){const{editor:e}=this,{locale:i}=e,r=e.plugins.get("LinkUI"),o=e.plugins.get("Linkit"),d=r._hideUI,n=e.config.get("linkitMediaLibrary"),s=r.formView,a=new t.ButtonView(i),{libraryURL:l,openDialog:c,dialogSettings:u={}}=n;l&&"function"==typeof c&&(a.set({label:e.t("Media Library"),withText:!0}),a.set("class","ck-media-library"),this.listenTo(a,"execute",(()=>{c(l,(({attributes:e})=>{o.set("entityType",e["data-entity-type"]),o.set("entityUuid",e["data-entity-uuid"]),o.set("entitySubstitution",e["data-entity-substitution"]),s.urlInputView.fieldView.element.value=e.href,setTimeout((()=>{s.urlInputView.fieldView.element.focus()}),100)}),u)})),e.plugins.get("ContextualBalloon").on("set:visibleView",((e,t,i,r)=>{this.buttonAdded||i===r||i!==s||(s.children.add(a,1),this.buttonAdded=!0);[s.children.find((e=>e.template.attributes.class.indexOf("ck-button-save")>-1)),s.children.find((e=>e.template.attributes.class.indexOf("ck-button-cancel")>-1))].forEach(((e,t)=>{s.children.remove(e),s.children.add(e),s._focusables.has(e)&&(s._focusables.remove(e),s._focusables.add(e),s.focusTracker.remove(e),s.focusTracker.add(e))}))})),r._hideUI=()=>{0===document.querySelectorAll(".ui-dialog-content").length&&d.bind(r).call()})}static get pluginName(){return"LinkitMediaLibrary"}}const d={LinkitMediaLibrary:o}})(),r=r.default})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index 5d2e499..0b932b5 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -1,6 +1,5 @@
 import { Plugin } from 'ckeditor5/src/core';
 import { ButtonView } from 'ckeditor5/src/ui';
-import LinkitMediaLibraryEditing from './linkitmedialibraryediting';


 class LinkitMediaLibrary extends Plugin {
@@ -11,7 +10,7 @@ class LinkitMediaLibrary extends Plugin {
    * @inheritdoc
    */
   static get requires() {
-    return [LinkitMediaLibraryEditing];
+    return [];
   }

   init() {
@@ -23,9 +22,11 @@ class LinkitMediaLibrary extends Plugin {
   _addMediaLibraryButton() {
     const { editor } = this;
     const { locale } = editor;
+    const linkUI = editor.plugins.get('LinkUI');
+    const linkit = editor.plugins.get("Linkit");
+    const _hideUIOriginal = linkUI._hideUI;
     const options = editor.config.get('linkitMediaLibrary');
-    const linkFormView = editor.plugins.get('LinkUI').formView;
-    const command = editor.commands.get('insertMediaLibraryLink');
+    const linkFormView = linkUI.formView;
     const buttonView = new ButtonView(locale);

     const { libraryURL, openDialog, dialogSettings = {} } = options;
@@ -33,7 +34,6 @@ class LinkitMediaLibrary extends Plugin {
       return;
     }

-    buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');
     // Create the toolbar button.
     buttonView.set({
       label: editor.t('Media Library'),
@@ -44,8 +44,16 @@ class LinkitMediaLibrary extends Plugin {
       openDialog(
         libraryURL,
         ({ attributes }) => {
-          editor.execute('insertMediaLibraryLink', attributes);
+          // Add the media attributes into the Linkit plugin.
+          linkit.set('entityType', attributes['data-entity-type']);
+          linkit.set('entityUuid', attributes['data-entity-uuid']);
+          linkit.set('entitySubstitution', attributes['data-entity-substitution']);
+          linkFormView.urlInputView.fieldView.element.value = attributes['href'];
+          setTimeout(() => {
+            linkFormView.urlInputView.fieldView.element.focus();
+          }, 100)
         },
+
         dialogSettings,
       );
     });
@@ -84,6 +92,14 @@ class LinkitMediaLibrary extends Plugin {
         });
       }
     )
+
+    linkUI._hideUI = () => {
+      const modal = document.querySelectorAll('.ui-dialog-content');
+      if (modal.length === 0) {
+        _hideUIOriginal.bind(linkUI).call();
+      }
+    };
+
   }

   /**
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
deleted file mode 100644
index 17395ac..0000000
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/insertmedialibrarylink.js
+++ /dev/null
@@ -1,27 +0,0 @@
-/* eslint-disable import/no-extraneous-dependencies */
-// cspell:ignore insertmedialibrarylink
-import { Command } from 'ckeditor5/src/core';
-
-/**
- * @module linkitMediaLibrary/insertmedialibrarylink
- */
-
-/**
- * The insert media library link command.
- *
- * The command is registered by the `LinkitMediaLibraryEditing` plugin as
- * `insertMediaLibraryLink`.
- */
-export default class InsertMediaLibraryLink extends Command {
-  execute(attributes) {
-    const { editor } = this;
-    const linkit = editor.plugins.get("Linkit");
-
-    // Add the media attributes into the Linkit plugin.
-    linkit.set('entityType', attributes['data-entity-type']);
-    linkit.set('entityUuid', attributes['data-entity-uuid']);
-    linkit.set('entitySubstitution', attributes['data-entity-substitution']);
-
-    // @todo Either insert a link or just re-open the link UI balloon.
-  }
-}
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js
deleted file mode 100644
index 110c56f..0000000
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/linkitmedialibraryediting.js
+++ /dev/null
@@ -1,27 +0,0 @@
-import { Plugin } from 'ckeditor5/src/core';
-import InsertMediaLibraryLink from './insertmedialibrarylink';
-
-/**
- * @module linkitMediaLibrary/linkitmedialibraryediting
- */
-
-/**
- * The Drupal Media Editing plugin.
- *
- * Handles the transformation from the CKEditor 5 UI to Drupal-specific markup.
- *
- * @private
- */
-export default class LinkitMediaLibraryEditing extends Plugin {
-
-
-  /**
-   * @inheritdoc
-   */
-  init() {
-    this.editor.commands.add(
-      'insertMediaLibraryLink',
-      new InsertMediaLibraryLink(this.editor),
-    );
-  }
-}
--
GitLab


From be6a66dd5c00c8459452b503b084efb9ca9013d4 Mon Sep 17 00:00:00 2001
From: Rodrigo Aguilera <hi@rodrigoaguilera.net>
Date: Tue, 12 Dec 2023 16:21:07 +0100
Subject: [PATCH 15/17] Depend on the linkit plugin.

---
 linkit_media_library.ckeditor5.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/linkit_media_library.ckeditor5.yml b/linkit_media_library.ckeditor5.yml
index 68c45ae..9fc7c58 100644
--- a/linkit_media_library.ckeditor5.yml
+++ b/linkit_media_library.ckeditor5.yml
@@ -19,4 +19,4 @@ linkit_media_library_link:
       - <a aria-label title class id target="_blank" rel>
     conditions:
       plugins:
-        - ckeditor5_link
+        - linkit_extension
--
GitLab


From fc138be523e591481795b37bf927b47cc398e282 Mon Sep 17 00:00:00 2001
From: Alan Ridgway <gary-ridgway@uiowa.edu>
Date: Thu, 11 Jan 2024 10:13:20 -0600
Subject: [PATCH 16/17] Scoping z-index for off canvas tray

---
 css/linkit-media-library.css | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/css/linkit-media-library.css b/css/linkit-media-library.css
index 4626587..514ab5a 100644
--- a/css/linkit-media-library.css
+++ b/css/linkit-media-library.css
@@ -3,3 +3,12 @@
   border-top: unset;
   padding: var(--ck-spacing-small) var(--ck-spacing-large);
 }
+
+.ui-dialog.ui-dialog-off-canvas ~ .ck-body-wrapper .ck-balloon-panel {
+  --ck-z-modal: calc(var(--ck-z-default) + 999);
+}
+
+.ui-dialog.media-library-widget-modal ~ .ck-body-wrapper .ck-balloon-panel {
+  --ck-z-modal: inherit;
+}
+
--
GitLab


From 6496453e55e8d40ed388a032326cb54bf9efaf5b Mon Sep 17 00:00:00 2001
From: Alan Ridgway <gary-ridgway@uiowa.edu>
Date: Thu, 11 Jan 2024 10:13:59 -0600
Subject: [PATCH 17/17] Fixing JS to be scoped properly for off-canvas.
 Removing excess code.

---
 js/build/linkitMediaLibrary.js                |  2 +-
 .../linkitMediaLibrary/src/index.js           | 36 ++++---------------
 2 files changed, 8 insertions(+), 30 deletions(-)

diff --git a/js/build/linkitMediaLibrary.js b/js/build/linkitMediaLibrary.js
index 9b2f437..f7ab6bc 100644
--- a/js/build/linkitMediaLibrary.js
+++ b/js/build/linkitMediaLibrary.js
@@ -1 +1 @@
-!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function i(r){var o=t[r];if(void 0!==o)return o.exports;var d=t[r]={exports:{}};return e[r](d,d.exports,i),d.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};return(()=>{"use strict";i.d(r,{default:()=>d});var e=i("ckeditor5/src/core.js"),t=i("ckeditor5/src/ui.js");class o extends e.Plugin{buttonAdded=!1;static get requires(){return[]}init(){const{editor:e}=this;this._addMediaLibraryButton()}_addMediaLibraryButton(){const{editor:e}=this,{locale:i}=e,r=e.plugins.get("LinkUI"),o=e.plugins.get("Linkit"),d=r._hideUI,n=e.config.get("linkitMediaLibrary"),s=r.formView,a=new t.ButtonView(i),{libraryURL:l,openDialog:c,dialogSettings:u={}}=n;l&&"function"==typeof c&&(a.set({label:e.t("Media Library"),withText:!0}),a.set("class","ck-media-library"),this.listenTo(a,"execute",(()=>{c(l,(({attributes:e})=>{o.set("entityType",e["data-entity-type"]),o.set("entityUuid",e["data-entity-uuid"]),o.set("entitySubstitution",e["data-entity-substitution"]),s.urlInputView.fieldView.element.value=e.href,setTimeout((()=>{s.urlInputView.fieldView.element.focus()}),100)}),u)})),e.plugins.get("ContextualBalloon").on("set:visibleView",((e,t,i,r)=>{this.buttonAdded||i===r||i!==s||(s.children.add(a,1),this.buttonAdded=!0);[s.children.find((e=>e.template.attributes.class.indexOf("ck-button-save")>-1)),s.children.find((e=>e.template.attributes.class.indexOf("ck-button-cancel")>-1))].forEach(((e,t)=>{s.children.remove(e),s.children.add(e),s._focusables.has(e)&&(s._focusables.remove(e),s._focusables.add(e),s.focusTracker.remove(e),s.focusTracker.add(e))}))})),r._hideUI=()=>{0===document.querySelectorAll(".ui-dialog-content").length&&d.bind(r).call()})}static get pluginName(){return"LinkitMediaLibrary"}}const d={LinkitMediaLibrary:o}})(),r=r.default})()));
\ No newline at end of file
+!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.linkitMediaLibrary=t())}(self,(()=>(()=>{var __webpack_modules__={"./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ckeditor5/src/core */ \"ckeditor5/src/core.js\");\n/* harmony import */ var ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ckeditor5/src/ui */ \"ckeditor5/src/ui.js\");\n\n\n\n\nclass LinkitMediaLibrary extends ckeditor5_src_core__WEBPACK_IMPORTED_MODULE_0__.Plugin {\n\n  buttonAdded = false;\n\n  /**\n   * @inheritdoc\n   */\n  static get requires() {\n    return [];\n  }\n\n  init() {\n    const { editor } = this;\n\n    this._addMediaLibraryButton();\n  }\n\n  _addMediaLibraryButton() {\n    const { editor } = this;\n    const { locale } = editor;\n    const linkUI = editor.plugins.get('LinkUI');\n    const linkit = editor.plugins.get(\"Linkit\");\n    const _hideUIOriginal = linkUI._hideUI;\n    const options = editor.config.get('linkitMediaLibrary');\n    const linkFormView = linkUI.formView;\n    const buttonView = new ckeditor5_src_ui__WEBPACK_IMPORTED_MODULE_1__.ButtonView(locale);\n\n    const { libraryURL, openDialog, dialogSettings = {} } = options;\n    if (!libraryURL || typeof openDialog !== 'function') {\n      return;\n    }\n\n    // Create the toolbar button.\n    buttonView.set({\n      label: editor.t('Media Library'),\n      withText: true,\n    });\n    buttonView.set( 'class', 'ck-media-library' );\n    this.listenTo(buttonView, 'execute', () => {\n      openDialog(\n        libraryURL,\n        ({ attributes }) => {\n          // Add the media attributes into the Linkit plugin.\n          linkit.set('entityType', attributes['data-entity-type']);\n          linkit.set('entityUuid', attributes['data-entity-uuid']);\n          linkit.set('entitySubstitution', attributes['data-entity-substitution']);\n          linkFormView.urlInputView.fieldView.element.value = attributes['href'];\n          setTimeout(() => {\n            linkFormView.urlInputView.fieldView.element.focus();\n          }, 100)\n        },\n\n        dialogSettings,\n      );\n    });\n\n    // For now, we are adding the button inside this event because Editor\n    // Advanced Link is adding its form element so the Link UI form view in the\n    // same way and if we don't do it like this, our changes get overridden.\n    editor.plugins\n      .get('ContextualBalloon')\n      .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {\n          if (!this.buttonAdded && newValue !== oldValue && newValue === linkFormView) {\n            linkFormView.children.add(buttonView, 1);\n            this.buttonAdded = true;\n          }\n        }\n      )\n\n    // Here's the issue\n    linkUI._hideUI = () => {\n      const modal = document.querySelectorAll('#drupal-modal.ui-dialog-content');\n      if (modal.length === 0) {\n        _hideUIOriginal.bind(linkUI).call();\n      }\n    };\n\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static get pluginName() {\n    return 'LinkitMediaLibrary';\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  LinkitMediaLibrary,\n});\n\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js?")},"ckeditor5/src/core.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./core.js_from_dll-reference_CKEditor5.dll?')},"ckeditor5/src/ui.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ "dll-reference CKEditor5.dll"))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.linkitMediaLibrary/delegated_./ui.js_from_dll-reference_CKEditor5.dll?')},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__webpack_require__),i.exports}__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/ckeditor5_plugins/linkitMediaLibrary/src/index.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
\ No newline at end of file
diff --git a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
index 0b932b5..877b11b 100644
--- a/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
+++ b/js/ckeditor5_plugins/linkitMediaLibrary/src/index.js
@@ -64,37 +64,16 @@ class LinkitMediaLibrary extends Plugin {
     editor.plugins
       .get('ContextualBalloon')
       .on('set:visibleView', (evt, propertyName, newValue, oldValue) => {
-        if (!this.buttonAdded && newValue !== oldValue && newValue === linkFormView) {
-          linkFormView.children.add(buttonView, 1);
-          this.buttonAdded = true;
-        }
-
-        // Every time we trigger the menu, we need to put the
-        //     save and close buttons at the bottom because of the
-        //     way that editorAdvancedLink rearranges things.
-        const buttons = [
-          linkFormView.children.find((child) => child.template.attributes.class.indexOf('ck-button-save') > -1),
-          linkFormView.children.find((child) => child.template.attributes.class.indexOf('ck-button-cancel') > -1),
-        ];
-
-        buttons.forEach((item, i) => {
-          linkFormView.children.remove(item);
-          linkFormView.children.add(item);
-
-          if (linkFormView._focusables.has(item)) {
-
-            linkFormView._focusables.remove(item);
-            linkFormView._focusables.add(item);
-
-            linkFormView.focusTracker.remove(item);
-            linkFormView.focusTracker.add(item);
+          if (!this.buttonAdded && newValue !== oldValue && newValue === linkFormView) {
+            linkFormView.children.add(buttonView, 1);
+            this.buttonAdded = true;
           }
-        });
-      }
-    )
+        }
+      )

+    // Here's the issue
     linkUI._hideUI = () => {
-      const modal = document.querySelectorAll('.ui-dialog-content');
+      const modal = document.querySelectorAll('#drupal-modal.ui-dialog-content');
       if (modal.length === 0) {
         _hideUIOriginal.bind(linkUI).call();
       }
@@ -109,7 +88,6 @@ class LinkitMediaLibrary extends Plugin {
     return 'LinkitMediaLibrary';
   }
 }
-
 export default {
   LinkitMediaLibrary,
 };
--
GitLab
